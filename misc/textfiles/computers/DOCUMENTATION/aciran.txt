

                             ACIRAN V3.4

                       Linear AC Circuits Analysis


Introduction.
-------------

ACIRAN is a Linear AC Circuit Analysis Program designed to ease small signal
ac analysis of active and passive circuits. ACIRAN can handle Resistors,
Capacitors, Inductors, Transformers(Ideal), Fets, Transistors, Operational
Amplifiers, Transmission Lines, and Voltage Controlled Current Sources.

Using these circuit elements almost any linear circuit can be represented and
analysed. To save time and ease design a number of Fet,Opamp and Transistor
model parameters have been supplied. Should a more complex model be needed
these can be built up using passive components and Voltage Controlled Current
sources.


Installation.
-------------

Two versions of ACIRAN are supplied on a registered disk, a standard version
and a TURBO version which runs much faster but limits the circuit size.
Both are completely compatible, but use Turbo whenever possible as it is
four times faster. 

  ACIRAN V3.4 was created using the  Turbo Pascal Compiler (V 5.5) and
is able to support co-processors, if you machine has a floating point chip
this is detected by ACIRAN and used for all calculations, if you do not have a
co-processor, it is simulated by software. Obviously the program runs much
faster with the co-processor chip fitted. 

Before using ACIRAN first make a backup copy on another disk,including all
model and circuit files, then put the original in a safe place.
Aciran can be run from a single floppy drive, but a hard disk is
recommended. Copy Aciran.exe, all model files, ie those with extensions
ending in TRN,FET, and AMP, and all circuit examples, those ending in
CIR to your working disk. Alternatively create a subdirectory on your
hard disk to hold these files.


Getting Started.
-------------------

At the DOS prompt type ACIRAN <return> and the ACIRAN sign on screen will
appear showing the version number and the circuit constraints.Press any
key to continue and the copyright notice and circuit constraints will
be removed.


The main menu offers the following selection:

  File   Edit   Config   Data   Analyse   Results   Graph

and selection is made by typing the first letter of the word or using the
cursor keys to point to the desired function and then pressing the return key,
or using the mouse to select the function, and clicking on the left mouse
button.

File
----

File provides the following sub-menu

New
Load
Save
Quit

and again selection is made by typing the first letter of the word or using the
cursor keys to point to the desired function and then pressing the return key.

New is used to enter a new circuit description to ACIRAN and as it clears
any previous circuit from memory you should save any data that you have
in memory first.

Load
----

Load allows you to load a previously saved circuit for analysis or
modification. Circuits are expected to have extension .CIR (automatically
appended by ACIRAN). You will be presented with a Lotus 123 style file
selection box. Use the cursor keys or mouse to highlight the file you wish
to load and then press return or click the left mouse button. Press Escape
or the right mouse button to abandon the Load opertion. You can select other
directories by selecting the double dots at the top of the list, and then
move around other directories. Press F1 if you need help on using the
file selector. If you are using the profesional or network version of
Aciran you can change drives by selecting Alt-C. 


Save
----

Save allows you to save your circuit description to disk. If you are entering
a large circuit then you should save it periodically.
Names up to 8 characters are allowed. Longer names will be truncated to 8
characters, do not add a file extension. Full pathnames are supported,
and you will normally be presented with the current directory path.

Quit
----

Quit will exit from ACIRAN and take you back to DOS. Any circuit description
held in memory will be lost so make sure you have saved any data that you
want to keep. ACIRAN will give a warning if you have not saved your circuit
and have made changes.

Edit
----

Edit allows you to make changes to the circuit description such as adding
or deleting components and changing component values. Edit has its own
sub-menu which will be described later.

Config
------

Config allows you to select your printer type, set up certain flags and 
to request additional circuit parameters such as impedance and return loss.
This information is stored in a config file, and along with the circuit 
details in the files.Config has it's own sub-menu which will be descibed later.

Data
----

Data allows you to inspect your circuit description by listing the components,
their values and circuit connections. A sub-menu allows you to send the
data to the screen or to a printer.

Analyse
-------

Analyse instructs ACIRAN to analyse the circuit in memory. An error message
will be issued if there is no circuit present. Logarithmic and Linear frequency
sweeps are allowed. ACIRAN can also carry out Monte-Carlo analysis if component
tolerances have been entered.

Results
-------

A sub-menu overs the choice to Display,Print or File. To view the results
select Display, to obtain a hard copy of these result the Print option
should be selected.Results can also be stored in a text file for later use,
(eg. in reports) using the File option.

Graph
-----

If your system has a Graphics card present ACIRAN can output Graphs of
Frequency vs Amplitude,Phase,Time-delay,Impedance,Return Loss and VSWR on
to the screen, and a hardcopy to a graphics printer.(Epson FX800, LaserJet,
or PostScript)



Entering New Data
-----------------


At the main menu press 'N' (or use the cursor keys) to select New circuit.
The Menu window will now show NEW CIRCUIT and the Status window will ask you
for the Name of your circuit (up to 30 characters). As DOS only supports file
names of up to 8 characters a circuit identifier is useful to give meaningful
names to your circuits.

Enter a circuit name and press <return>. The Status window will now ask if you
wish to enter component tolerances. If you answer 'Y' then ACIRAN will toggle
on the tolerance flag and use the tolerance values entered for each component,
if you do not enter a tolerance it will default to 0%, this is used in 
monte-carlo analysis, described later.

Next you will see a list of component types in a pop up Menu window,use
the normal selection methods to choose a component type. If  the  component
type is Fet, Opamp or Transistor you will be asked if you wish to load model
parameters from disk.

If you select to do so you will be presented with another file selection
box, to choose the component model.



An Example
----------

A number of examples are included on the disk.
They will provide the most ideal method of learning ACIRAN. Enter the first
one from the keyboard. The circuit is shown below:

RC Filter

             R1
node 1      ________                                          node 2
  0---------|       |---------------------o-------------------------0
            --------                      |
          100 +/- 0.5%                    |
                                          |
                                         ----
                                         |  | R2
                                         |  |
                                         |  | 10 +/- 2%
   INPUT                                 ----               OUTPUT
                                          |
                                          o node 3
                                          |
                                        ----- 0.001uF +/- 10%
                                        _____
                                          |     C1
                                          |
                       node 0             |
  0_______________________________________o_________________________0






Select New Circuit.
Enter the circuit description 'RC Filter' <cr>, and select 'Y' for tolerance
entries.

When  the Select component menu is displayed,choose a resistor, and a form
will appear on the screen ,you will be asked for the component identifier,
enter 'R1' and press <return>.(Up to 5 characters can be entered for the
component identifier).

You will now move to the next input filed, you will then be asked for the
value of R1. Enter 100 <return>.

You will then be asked for the tolerance in %. Enter 0.5 <return>. (The
leading Zero is essential).

Next you will be asked 'From Node', Enter 1 <cr>, and then 'To node', Enter
2 <cr>.

        The convention in ACIRAN is that the INPUT NODE is ALWAYS 1 and
the GROUND NODE is ALWAYS 0. The OUTPUT NODE is variable(more about this
later).

Once you have completed the form you must enter F10 to exit and save you data.
If you press Esc the data will be ingored. You can move around the input form
changing the information using the edit keys, until you are happy with what
you have entered. This free format screen input is used extensively in ACIRAN
to give maximum flexibility. In some cases, eg frequency, the previously
entered data is presented and can be accepted by entering <cr>.


Enter component R2 in the same way, it is not important which way round
the passive component is connected.

To enter C1 select Capacitor, and for the value enter 0.001u. the 'u' or 'U'
at the end tell ACIRAN that the value is in microfarads.

A number of multiplier options are allowed and upper or lower case can be
interchanged in all cases except 'M' and 'm'.

The multipliers accepted by ACIRAN are

   'G' or 'g'      Giga   =   x1E9
   'M'             Mega   =   x1E6
   'K' or 'k'      Kilo   =   x1E3
   'm'             milli  =   x1E-3
   'U' or 'u'      micro  =   x1E-6
   'N' or 'n'      nano   =   x1E-9
   'P' or 'p'      pico   =   x1E-12

These multipliers can be entered in a number of formats, eg 1k2, 1K2,1.2K
1200 12e2,12E2 and 1.2e3 are all acceptable and identical .

Now that the circuit has been entered press <Esc> in response to next
component and you will be asked for the Output node.

If you press <cr> without entering any data ACIRAN will assign the highest
node used to the output node. In this circuit this is not the case and you
must enter 2 <cr>.

It is advisable to save your work and so as soon as the main menu returns
press 'F' for File then 'S' for Save.

When asked for a file name enter any valid filename, remember to omit any file
extension.

You can check your circuit configuration by selecting Data. A short menu will
appear offering Display and Print. Display will list to the console and
Print to the LPT1 or PRN device. (If you are not sure about the LPT1 device
consult your DOS handbook).

You should not select Print unless you have a printer ready on-line.

In this case select Display and you will see the circuit listed on the screen.
Check that the circuit connections are correct.

If you do not wish to enter the circuit yourself you can load it from the disk
by selecting Load at the main menu loading 'EXAMPL1'.

Now analyse the circuit by Selecting Analyse at the main menu.

A frequency input form will appear, you must complete at least the
first three entries, some have minimum default values already
loaded.

You can select Log or Linear sweep from the Config menu,the default is Log.
This can be toggled by selecting Sweep when in the Config menu.
For the moment leave it as Log.

Now enter the start frequency. Enter 100k and press <cr>.

Enter End frequency 100M (note capital 'M' for Megahertz).

Finally enter the number of frequency steps, 10 <cr>.

Leave the default number of passes as 1. Remember to press F10 once you are
satisfied with the input data.

If however you enter a number greater than 1 then ACIRAN will analyse your
circuit that number of times, and on each pass it will vary the component
values within the tolerance limits you specified for each  component.
This feature will be discussed later.

ACIRAN will now analyse your circuit from 100 kilohertz to 100 megahertz
in 10 Logarithmic steps. The Sweep mode selected will remain in force in
future analysis unless you specifically change it. During Analysis the 
frequency sweep mode and range are displayed and a counter shows the percentage
of the analysis completed.The output window will show the results of the
frequency response of your RC Filter.

The main menu will re-appear and if you have a printer and want a hard copy
of the result press 'R' to select Results, and at the sub-menu select Print. 
If you have a Graphics card fitted then  you can display a Graph of the
results by pressing 'G' (Graph) from the main menu. Press the Spacebar to
step through each graph in turn. These two features only function when ACIRAN
has a circuit in memory and an Analysis has been performed.

If your printer has Graphics capability you can obtain hard copies of the
graphical results in one of two ways. When the first Graph of Frequency
vs Amplitude appears you normally press the Spacebar to move onto the next
Graph.

If however you press 'P' or 'p' you will get a Printout of the screen
dumped to your printer. Alternatively if you are familiar with DOS
put GRAPHICS and GRAFTABL in your Autoexec.bat file to make sure that these
files are resident before running ACIRAN.

Then when the Graph you want to print is on the screen, simply press the
PrtScrn key. This prints sideways and gives a much better output. (Note
that GRAPHICS is not compatable with all modes of display,whereas the built
in screen dump facility is).


The results for the RC Filters are shown below.

Transmission Results for RC Filter
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 1.000E+05           -0.021             -3.594
 1.995E+05           -0.081             -7.133        -9.848E-08
 3.981E+05           -0.314            -13.951        -9.421E-08
 7.943E+05           -1.133            -25.910        -8.015E-08
 1.585E+06           -3.381            -41.920        -4.897E-08
 3.162E+06           -7.449            -54.176        -1.521E-08
 6.310E+06          -12.380            -55.459         1.380E-09
 1.259E+07          -16.738            -45.100         4.859E-09
 2.512E+07          -19.376            -29.062         3.073E-09
 5.012E+07          -20.414            -15.964         1.112E-09
 1.000E+08          -20.720             -8.214         3.125E-10


Monte-Carlo

Select Analyse again, but this time change the number of tolerance passes
to 3 . It is not necessary to enter the Start and End frequencies again,or
the number of steps, as ACIRAN will remember the previous values. You can
however change any one of them (or all) if you wish. It is only necessary
that you do not try to violate the input requirements (such as End frequency
coming before Start frequency or a Log sweep on too small a frequency range).

Keep the same frequency range and number of steps as before, and so enter <cr>
for each entry. This time during Analysis the Status window shows the current
Monte-Carlo pass being executed. At each pass the circuit is analysed using
component values selected at random from within component tolerance limits.

After analysis ACIRAN will output the results but this time the heading Upper
Limit appears. This shows the upper limits reached during the Monte-Carlo
passes. The Lower Limits are printed next. If you select Graph you will see not
one but two graphs showing the spread of results obtained. This tolerance
analysis lets you see how your circuit is likely to vary in performance
due to component tolerances. In this example only 3 passes  have been selected
but in practice several hundred passes may be needed to give a representative
picture.

However this would take a lot longer and for large circuits the time can become
excessive especially if there are a large number of frequencies.

The largest number of passes is 32767.
 
Transmission Results for RC Filter
Upper Limit
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 1.000E+05           -0.018             -3.379
 1.995E+05           -0.067             -6.484        -5.843E-08
 3.981E+05           -0.299            -13.614        -7.385E-08
 7.943E+05           -1.074            -25.274        -6.628E-08
 1.585E+06           -2.929            -39.513        -4.426E-08
 3.162E+06           -6.685            -52.542        -9.989E-09
 6.310E+06          -11.976            -55.550         1.063E-09
 1.259E+07          -16.502            -43.637         5.704E-09
 2.512E+07          -19.260            -29.356         2.645E-09
 5.012E+07          -20.320            -14.844         1.141E-09
 1.000E+08          -20.538             -7.840         4.125E-10

Lower Limit
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 1.000E+05           -0.024             -3.880
 1.995E+05           -0.087             -7.383        -8.719E-08
 3.981E+05           -0.332            -14.334        -1.266E-07
 7.943E+05           -1.317            -27.800        -1.020E-07
 1.585E+06           -3.699            -43.519        -5.053E-08
 3.162E+06           -7.164            -53.626        -1.681E-08
 6.310E+06          -12.280            -55.933         2.508E-10
 1.259E+07          -16.958            -47.009         3.180E-09
 2.512E+07          -19.423            -31.305         1.976E-09
 5.012E+07          -20.632            -16.109         8.823E-10
 1.000E+08          -20.682             -8.504         2.546E-10




Modifications
-------------

Having entered the circuit (either from the keyboard or from disk), it is
necessary to be able to modify it, in order to fine tune it.

At the Main menu select Edit, and a sub-menu appears with the
following selection:


    Add
    Change
    Delete
    Name 
    Output 

and  selection is made as before.


Add
---

Add allows you to extend your circuit provided there is enough room to do
so. If you had previously saved your circuit (which you ought to do on a
regular basis) it will allow you to carry on building your circuit from where
you left off.

Change
------

Change allows you to change a component value, and if tolerance entries
have been selected, to change the tolerance.

Delete
------

Delete allows the deletion of a component. You will be asked to confirm that
you wish to delete the component. The components list is re-ordered to reflect
the change.A message will confirm that the component has been deleted.

Name
----

Name allows you to change the circuit identifier (or name) of the circuit.


Output
------

Output allows you to change the output node. If you wish you can look at
nodes internal to the circuit to see their response. In some cases a circuit
may have more than one output node, for example a circuit with one input
and two complementary outputs, perhaps with a constant phase shift between
the two outputs.


Esc will exit the Modify menu (as it does all sub menus) and take you back to
the main menu.



How to Modify a Circuit
-----------------------

Change
------

Now change the value of C1 to shift the response of the RC Filter.

If you have exited ACIRAN restart it and load 'EXAMPL1'.
Select Edit and then select Change. You will be presented with a Pick
list, select C1, then <cr> or use a mouse. When asked for the value enter 
0.002u <cr>.

The new value will be assigned to C1.Quit Edit and display the circuit
listing, check that C1 has the new value. Select Analyse and test the
circuit response. If you have not exited from ACIRAN you will not have
to re-enter the Start,End and frequency Step values,nor the Output node.
From the output results (and graphs) you can see the effect of the circuit
change. If you wish you can save this circuit, either as a new one under a
new filename,or you can overwrite the old circuit description.

Suppose for the sake of instruction it is decided that R2 should be changed
from a resistor to an inductor, this would give a notch Filter.

This can be done by first deleting R2 and then adding an inductor L1.

Do this in two stages to show the effect on the circuit listing.


Delete
------

From the main menu select Edit, and then Delete. Select R2 from the list.

It is possible to continue in Edit and do the addition, but instead Quit
and Display the circuit listing.

Notice that component R2 is no longer present.


Add
---

Re-enter Edit and this time select Add.

Press 'I' to select an Inductor.
Enter the component identity as 'L1', it's value as 0.33u (0.33 micro-henry),
Tolerance 10, and its connections 'From node' 2,'To node' 3.

Check the circuit listing.


Re-Analyse the circuit and check that it is now a notch filter. Use the
same frequency range. If you have not exited ACIRAN you need not re-enter
this data. 


Add
---

Suppose the circuit is to work into a 10k load RL. Add RL to see the circuit
response. (Normally you would just change the Load in the Config menu).

Select Modify and then Add. More components can now be added to the circuit.

Select Resistor and enter 'RL' for the component identity.

Give the value 10k and a tolerance of 10%. Connect 'RL' from node 2 to node 0.

The Output node must be re-entered. If you had saved this circuit previously
and were adding more components to complete it, you may have had to update the
Output Node. Alternatively if you had deleted a component the output node
may have been removed from the circuit.
Analyse the circuit again to see the effect.


Name
----

Now that you have changed the circuit you should give it a new name.
Enter the Modify menu and select Name.
Enter 'RLC Notch Filter' <cr>. 
You may wish to save your new circuit under a new filename.

Transmission Results for RLC
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 1.000E+05           -0.153             -7.094
 1.995E+05           -0.347            -13.956        -1.899E-07
 3.981E+05           -1.046            -26.445        -1.692E-07
 7.943E+05           -3.118            -45.138        -1.190E-07
 1.585E+06           -7.452            -64.642        -5.616E-08
 3.162E+06          -14.757            -79.356        -2.012E-08
 6.310E+06          -46.551             89.728         2.635E-07
 1.259E+07          -14.245             78.701        -4.374E-09
 2.512E+07           -7.160             63.709        -3.095E-09
 5.012E+07           -2.956             44.055        -1.931E-09
 1.000E+08           -0.985             25.611        -8.173E-10



How to Configure Aciran.
------------------------

Config
------

At the Main menu select 'C' for Config, and a sub-menu appears with the
following selection:


  Format
  Generator Zin
  Load impedance Zout
  Returnloss
  Impedances 
  Sweep
  Tolerance
  Beep 
  Printer


Format
------

Format allows you to select the format used for impedance results. A
choice of Polar or Cartesian coordinates is available. Choice is made by
pressing the first letter, or postioning the menu bar and pressing <cr>.

IF you select  Polar (this is the default setting) then impedance results
will be output as a Magnitude and Phase angle. On the other hand if you
select Cartesian then impedance results will be output as a Real and Imaginary
part.


Generator
---------

This option allows you to set up the source referance impedance. You may enter
values in the same format as that used for resistors (ie multipiers are 
accepted).


Load
----

This option allows you to set up the load referance impedance. You may enter
values in the same format as that used for resistors (ie multipiers are 
accepted).


Returnloss
----------

ReturnLoss is calculated with respect to the input and output referance 
impedances. The default is 100Mohm real for both input and output. This means
that your circuit is analysed without taking into account the effect of 
realistic source and load impedances.

You can change the Source and Load referance impedances to more practical
values and Return Loss and VSWR will be calcuated relative to these referances.

When Returnloss is selected, Impedance calculations are automatically enabled
as they are required to calculate Return Loss and VSWR.

Once you have changed the referance impedances they will remain in effect
until you load or enter a new circuit, or specifically alter them again.

ALL config options are saved along with the circuit data to save having to
change it every time the circuit file is loaded.

This will be illustrated later by an example.
 

Impedances
----------

Impedance  is calculated with respect to the input and output referance 
impedances.The default is 100Mohm real for both input and output. This means
that your circuit is analysed without taking into consideration the effect of
realistic Source and Load impedances.

You can change the Source and Load referance impedances to more practical
values and Input and Output impedances will be calcuated taking these
referances into account, or if you leave them unchanged you will get the open
circuit input and output impedances without loading effects. Once you have
changed the referance impedances they will remain changed until you load
or enter a new circuit, or specifically alter them.

This will be illustrated later by an example.


Sweep
-----

Sweep allows you to change the sweep mode (Logarithmic or Linear). If you 
start a New circuit the Sweep mode defaults to Logarithmic. This mode
will remain in force until changed by means of the Config Sweep command.


Tolerance
---------

Tolerance simply toggles the Tolerance entries flag on and off. If, in order
to save time you selected no tolerance entries for a circuit, and at a later
date wanted to see the effect of tolerance on your circuit due to one or
more components, you can turn on tolerance by means of this switch. All the
components will originally have 0% tolerance but you can change this by
using the Change feature.


Beep
----
Beep allows you to turn off the warning beeps that are issued by ACIRAN
should you not wish to disturb others. The only exception is the case where
you are about to exit ACIRAN or load a new circuit, and have not saved your
work.

Printer
-------
 
Selecting this option will present a pick list of three printer types. The
default is Epson. Select Epson for dot matrix printers, LaserJet II for HP
Laser Jet Compatible printers, and Postscript for Postscript printers.

You need only do this once as Aciran stores this information along with other
config data in  a file called Aciran.cfg. Each time Aciran starts it looks for
the config file, and if present loads it. On exit it writes the config info
to disk. So even if you do not have a config file to begin with, you will have
one after you run Aciran.


Further Examples
----------------


You have now covered most aspects of ACIRAN with the exception of MODELS.
How to create your own MODELS using any wordprocessor is explained in the
Appendix, for the moment simply examine how you can use the ones supplied on
the disk. To do this look at some more examples which make use of MODELS.

The next circuit (EXAMPL2 on the disk) uses a single transistor in a common
emitter amplifier, and is shown below:

Transistor Amplifier

 node 0
  ------------o---------------------------------o--------------------
              |                                 |
              |                                 |
              |                                 |
              R1 33k                            R4 2.7k 1%
              |   1%                            |                5
              |                                4o-------C2----o--O
              |                       BC107     C      2.2u   |   Output
1   2.2u      |2                                        10%   |
O-----C1----- o----------------------------B   TR1            |
     10%      |                                               R5 100M
Input         |                                 E             |   10%
              |                                3o_______      |
              |                                 |       |     |
              R2 18k                            R3      |     |
              |   1%                            |       C3    |
              |                              1k |  100u |     |
              |                              1% |   10% |     |
  ------------o---------------------------------o-------o-----o------
  node 0




Note that both power supply rails are numbered node zero. This is because
as far as AC analysis is concerned the power supply is an AC short circuit,
normally due to decoupling capacitors.

Enter the circuit as shown. When you select component type Transistor you
will be asked if you want to load model parameters, enter 'Y'.

You will be presented with a filebox similar to the type used for loading
circuit files, select a 'BC107'and press <cr> or mouse left button
. 
How to add more models will be covered later.


If you enter 'N' for loading a model file  ACIRAN will assume that you are
unable to supply a model file and will ask you for details of the transistor
which must be entered from the keyboard. 

In either case once the Transistor parameters are loaded you will be 
presented with a Transistor Form, most of the details will be filled in if
you loaded model parameters from disk (This is also true for FET and OPAMP)
model files). You must enter a circuit identifier,(this is needed to select
the component from a Pick List during subsequent edit operations), also
for the Base, Collector, and Emitter node connections, and these should
be entered with reference to the above circuit.

The default collector current is 1mA, this can be altered once you have
calculated the DC current.

Analyse the circuit from 10 hertz to 10 Megahetrz in 10 Log steps. The resistor
R5 is not needed by ACIRAN but was added so that the results of the ACIRAN
analysis could be compared with the output from a proprietary Circuit Analysis
package that runs on a Vax under VMS4.6.

The results compared almost exactly at low frequencies and only at higher
frequencies could any significant differance be spotted.

This is due to the type of transistor model used by ACIRAN which is a simple
model requiring only 3 nodes. A more precise model can be used which requires
one extra node for each transistor, and the same circuit using just such a
model is illustrated in EXAMPL3.


Transistor Amplifier Results


Transmission Results for Transistor Amplifier
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 1.000E+01           21.483            -75.363
 3.981E+01           34.048           -100.844        -1.800E-03
 1.585E+02           42.801           -137.650        -7.152E-04
 6.310E+02           45.047           -167.343        -1.021E-04
 2.512E+03           45.226           -176.778        -7.076E-06
 1.000E+04           45.197           -179.193        -4.493E-07
 3.981E+04           45.035           -179.800        -2.836E-08
 1.585E+05           44.414           -179.952        -1.783E-09
 6.310E+05           42.307           -179.990        -1.088E-10
 2.512E+06           36.929           -179.998        -5.635E-12
 1.000E+07           27.869           -180.000        -2.458E-13

Transmission Results for Transistor Hybrid Amplifier
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 1.000E+01           20.912            -77.921
 3.981E+01           33.145           -106.462        -2.094E-03
 1.585E+02           40.470           -146.085        -7.225E-04
 6.310E+02           41.860           -170.581        -7.948E-05
 2.512E+03           41.964           -177.795        -5.484E-06
 1.000E+04           41.970            179.839        -5.459E-07
 3.981E+04           41.959            177.113        -2.329E-07
 1.585E+05           41.783            168.106        -2.082E-07
 6.310E+05           39.662            139.859        -1.526E-07
 2.512E+06           31.135            105.908        -3.236E-08
 1.000E+07           19.477             91.180        -3.230E-09



A Transistor can be modeled using the Hybrid PI model as show below:

Hybrid PI Model


                   6   ____rbc____
    2              b'  |         |                   4
    B----rbb-------o---o         o----o--------o-----C
              |    |   |____Cc___|    |        |
              |    |                  |        |
             rbe   Ce                rce       gm
              |    |                  |        |
              |    |                  |        |
              -----o------------------o---------
                            |
                            |
                            E
                            3


The three nodes B,C,E are the same as before,however an extra node b' is
needed to model the Transistor base spreading resistance. The parameters
shown can be calculated from manufactures test data and are dependant on
the small signal 'h' parameters, the transition frequency FT, collector
current and the transistor internode capacitances.

In EXAMPL3 the BC107 transistor has been modeled in this way. Methods of
calculating the Hybrid parameters can be found in the Appendix. The only
new component type is the Voltage controlled Current Source 'gm'.

The Source is a four terminal device which can be used to model all kinds of
active devices such as Fets and Opamps. The From node is the current source,in
this case the Collector, and the To node is the current drain. The + control
node is the drive source for the current generator, here the Base, and the
- control node is the drive sink, for a CE circuit it is the Emitter.

Analyse EXAMPL3 over the same frequency range as EXAMPL2 and examine the
differences.


The rest of this manual will describe the circuit examples supplied on the
disk. Each example was chosen to exhibit certain features of ACIRAN.

All resistors are 1% and all capacitors 10% unless stated otherwise.


EXAMPL4
-------

This is a simple transformer coupled stage connecting a 50 ohm source to a 1k
load. As ACIRAN references both Input and Output to ground it is necessary
to connect the transformer primary and secondary windings to ground for
analysis. In practice these connections could be omitted to provide DC isolation.
In transformer coupled amplifier stages where the second stage is referenced
to ground there is no problem and the transformer can be connected as normal.

As stated before ACIRAN models Ideal transformers, whereas in reality
transformers have winding resistance and inductance.These imperfections
are modeled by adding resistors and inductors to the circuit as shown below.

RP and RS are the primary and secondary DC winding resistances for the
transformer. The inductors LP and LS simulate the transformer inductances.
The primary has 1000 turns and the secondary 1080, therefore as a ratio to
one is required, enter 1.080 into the transformer form at the ratio field.

Analyse the circuit from 20 to 20k in 10 Logarithmic steps.


Transformer Coupled Stage

       
        2             3       T1       4          5
        o------RP-----o-------  -------o----RS----O>---
        |     19.5    |      |  |      |    21        |
        R1 50         |      |  |      |              |
        |             |      }  {      |              |
       1O             LP 1H  }  {      LS 1H   Output RL 1k
                      |      }  {      |              |
    Input             |      |  |      |              |
                      |      |  |      |              |
        O-------------o------o--o------o----------O>---



Transformer Stage Results

Transmission Results for Transformer Coupler
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 2.000E+01           -3.663             47.985
 3.991E+01           -1.347             29.088        -2.163E-03
 7.962E+01           -0.501             15.580        -7.068E-04
 1.589E+02           -0.260              7.955        -1.922E-04
 3.170E+02           -0.197              4.006        -4.932E-05
 6.325E+02           -0.181              2.010        -1.245E-05
 1.262E+03           -0.177              1.008        -3.133E-06
 2.518E+03           -0.176              0.505        -7.872E-07
 5.024E+03           -0.176              0.253        -1.977E-07
 1.002E+04           -0.176              0.127        -4.967E-08
 2.000E+04           -0.176              0.064        -1.248E-08



EXAMPL5
-------

This is an Elliptic-function Bandpass Filter. The filter is to work into
a 10K Load from a 10K Source. At the main menu select Config and then at
the sub-menu select ReturnLoss.
You should then change the source and Load referance impedances,Zin and
Zout, the default is 100Mohms real. You can change these to 10K real and
0 ohms imaginary.

Quit Config and analyse the filter. The filter has a passband from
approximately 15khz to 20khz. Using a Linear sweep examine the response
from 12khz to 24khz in 10 steps. Notice that the filter response changes
sharply below 15khz and above 20khz. Now examine the response from 15khz
to 20 khz in 40 steps, in order to see how much ripple exists in the passband.

Elliptic-Function Bandpass filter


Input       48.59mH      85.65mH      30.19mH      46.39mH               Output
          |---L2---|   |---L3---|   |---L5---|   |---L6---|
1         |        |   |        | 3 |        | 4 |        |5        6 231.1pF
O----o----o       2o---o        o-o-o        o-o-o        o--o--L8--o--C8--O>--
       |  |        |   |        | | |        |   |        |  | 365.4mH     7  |
       |  |---C2---|   |---C3---| | |---C5---|   |---C6---|  |                |
     --o--  986pF       1738pF    |   1820pF      2797pF     |                |
    |     |                     --o--                      --o--              |
    |     |                    |     |                    |     |             |
   C1     L1 27.32mH           |     |                    |     |        10k RL
    |     |                    C4   L4 18.29mH            C7    L7 20.58mH    |
    |     |             4616pF |     |              4103pF|     |             |
     --o--                     |     |                    |     |             |
3091pF |                        --o--                      --o--              |
       |                          |                          |                |
O------o--------------------------o--------------------------o-------------O>--
                                  0

Transmission Results for Elliptic BandPass Filter
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 1.200E+04          -52.119             69.862
 1.320E+04          -65.659           -119.048        -8.578E-04
 1.440E+04          -33.110             38.549         7.645E-04
 1.560E+04            0.092            174.380         1.042E-03
 1.680E+04           -0.451             42.648        -2.252E-04
 1.800E+04           -0.554            -52.955        -2.137E-04
 1.920E+04            0.219           -170.716        -3.333E-04
 2.040E+04          -17.895            -20.975        -6.247E-04
 2.160E+04          -61.207            128.039         7.892E-04
 2.280E+04          -68.615            118.726        -1.755E-05
 2.400E+04          -56.125            -66.878        -1.051E-05

Impedance Results for Elliptic BandPass Filter
Frequency                Input Impedance              Output Impedance
   (Hz)                (Mag)          (Pha)          (Mag)         (Pha)
 1.200E+04           3.668E+03        89.996       2.726E+04      -89.984
 1.320E+04           5.510E+03        89.993       1.814E+04      -89.970
 1.440E+04           1.250E+04        89.938       8.001E+03      -89.878
 1.560E+04           9.765E+03         0.143       1.026E+04       -0.195
 1.680E+04           1.101E+04         5.806       9.082E+03       -5.595
 1.800E+04           1.116E+04       -10.058       8.988E+03        9.983
 1.920E+04           9.476E+03        -0.527       1.059E+04        0.523
 2.040E+04           2.620E+04       -87.452       3.805E+03       87.166
 2.160E+04           7.838E+03       -89.988       1.275E+04       89.887
 2.280E+04           5.410E+03       -89.994       1.847E+04       89.914
 2.400E+04           4.265E+03       -89.995       2.344E+04       89.925

Return Loss Results for Elliptic BandPass Filter
Frequency(Hz)    Input RL(dB)    Output RL(dB)    Input VSWR    Output VSWR
 1.200E+04           0.00             0.00        46889.2749       10870.8338
 1.320E+04           0.00             0.00        20746.3939       4554.9720
 1.440E+04           0.01             0.02        1882.7613       965.9286
 1.560E+04          38.44            37.67          1.0242         1.0265
 1.680E+04          23.11            23.28          1.1503         1.1472
 1.800E+04          19.69            19.80          1.2312         1.2280
 1.920E+04          31.28            30.75          1.0561         1.0597
 2.040E+04           0.26             0.29         67.4989        60.8337
 2.160E+04           0.00             0.02        10099.9979       1046.8380
 2.280E+04           0.00             0.01        21564.9053       1597.0647
 2.400E+04           0.00             0.01        34982.8926       2127.1413



EXAMPL6
-------

This is a VHF/Video amplifier using an FET.The circuit is show below:

Again note that both power rails are at node 0. 

Analyse the circuit from 1M to 200M on a Log sweep.


Fet Amplifier

             node 0
  -----------------------------------o--------------------------------
                                     |
                                     |
                                     |
                                     L1 0.78uH
                                     |
                                     o 5
                                     |
                                     R2 560
                                     |                 Output
                                   4 o---------------O
  Input                              S          
              50                                
      O-------R1-----o----------G   TR1         
      1              2                               
                                     D          
                                    3o          
                                     |          
                                     R3 47      
                                     |          
  -----------------------------------o--------------------------------
                                       node 0

Tr1 = 2N4393


Fet Amplifier Results

Transmission Results for Fet Amplifier
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 1.000E+06           13.851            179.567
 1.699E+06           13.852            179.265        -1.202E-09
 2.885E+06           13.855            178.751        -1.203E-09
 4.901E+06           13.862            177.876        -1.207E-09
 8.326E+06           13.881            176.378        -1.218E-09
 1.414E+07           13.937            173.781        -1.249E-09
 2.402E+07           14.090            169.114        -1.336E-09
 4.081E+07           14.467            160.011        -1.569E-09
 6.931E+07           15.037            140.042        -2.068E-09
 1.177E+08           13.999            100.833        -2.209E-09
 2.000E+08            9.394             60.060        -1.128E-09



EXAMPL7
-------

This example is of a Twin-T notch filter and illustrates the use of an Opamp.
The circuit is shown below:


Twin-T Filter

                                                _________
                                               |         |
                                               |         |
                 0.01uF  2        0.01uF       | |\      |        Output
               ----C1----o---------C3-----     --|-\     |6
               |         |                |      |  \____o________O
               |         |                |      |  /    |
      O--------o1        |               4o------|+/     |
               |         |                |      |/      |
 Input         |         |      3         |              |
               ----R1----+------o--R3-----       A1      |
                 15.9k   |      | 15.9k                  |
                         |      |                        R4 24.9
                    7870 R2     C2 0.02uF                |
                         |      |                        |
                         |  5   |                        |
                         ---o---                         |
                            |                            |
                            |                            |
                            -----------------------------o
                                                         |
                                                         |
                                                         R5 976
                                                         |
                                                         |
      O--------------------------------------------------o--------O
      

A1 = LM124

Analyse the circuit from 10 hertz to 2k hertz in 10 Linear steps.

Note that the notch frequency occurs at about 1khz.
 
Twin-T Filter Results

Transmission Results for Twin-T Network
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 1.000E+01            0.000             -0.057
 2.090E+02            0.001             -1.228        -1.678E-05
 4.080E+02           -0.004             -2.712        -2.261E-05
 6.070E+02           -0.029             -5.244        -4.144E-05
 8.060E+02           -0.192            -12.215        -1.283E-04
 1.005E+03          -20.430             78.647         2.896E-03
 1.204E+03           -0.245             13.854        -3.109E-04
 1.403E+03           -0.056              7.492        -6.091E-05
 1.602E+03           -0.015              5.230        -2.560E-05
 1.801E+03            0.003              4.052        -1.425E-05
 2.000E+03            0.013              3.319        -9.179E-06




EXAMPL8
-------

This is a Single Bandpass Filter section. It has a response curve which
is the inverse of exampl7. It is designed to have a centre frequency of
3.6khz and a 3dB bandwidth of 60Hz. Analyse the circuit on a Linear sweep
from 3.0khz to 4.5khz in 10 steps.

Note that R6 is variable in order that the circuit response can be finely
adjusted.

Experiment by changing the value of R6.


Single Bandpass Filter


                  12.1k
              _____R3________________________________
             |                              0.01uF  |
             |    10k            |-------------C2---o
             o-----R2----        |          88.7k   |
    1        |  |\      |        |        |-----R7--o
    O---R1---o--|-\     | 44.2k  | 0.01uF |  |\     |
      20k    2  |  \____o___R4___o___C1___o__|-\    |
                |  /    3       4|        6  |  \___o_____O
              --|+/ A1           |           |  /   7
              | |/               R5        --|+/ A2
              |                  | 174     | |/
              |                  |         |
 Input        |                 5o----     |          Output
              |                  |   |     |
              |                  |   |     |
              |                  R6<-|     |
              |                  |100+/-50%|
    O---------o------------------o---------o--------------O
                                 0
A1,A2 = LM124

Single BandpassFilter Results

Transmission Results for Single BandPass Filter Section
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 3.000E+03          -17.123             97.547
 3.150E+03          -14.460            100.975         7.238E-05
 3.300E+03          -10.948            107.639         1.467E-04
 3.450E+03           -5.935            124.839         4.052E-04
 3.600E+03           -1.541           -178.534         1.319E-03
 3.750E+03           -6.222           -127.853         6.657E-04
 3.900E+03          -10.642           -112.776         2.065E-04
 4.050E+03          -13.642           -106.677         9.252E-05
 4.200E+03          -15.841           -103.460         5.149E-05
 4.350E+03          -17.558           -101.489         3.255E-05
 4.500E+03          -18.958           -100.164         2.234E-05




EXAMPL9
-------

This circuit is an active delay line with a gain of 20dB and a 100uS constant
within 3% to 3khz. Up till now the circuit Amplitude has been of paramount
importance, but this is not always the case. The Time or Group delay has
an important part to play especially in telecommunication circuits where
poor Group delay response can introduce distortion. 

It is also possible to look at the open circuit input and output impedance.
In this example select Config and then Format. Select 'C' for Cartesian
format. Do not change the referance impedance from the default of 100Mohms.

In this example the circuit provides not only gain but almost constant
Time-delay for frequencies up to 3khz. 


Analyse the circuit on a Linear sweep from 100hz to 3khz.

100uS delay Line


               _____C2___________
              |   0.01uF        |
              |          2740   |
              |        ___R2____o            100k
              |       |         |       ______R5___          10k
       1430   |0.01uF |  |\     |      |          |        ___R8____
        --R1--o--C1---o--|-\    |4750  |5 |\      |       |        |
       |      2       3  |  \___o__R4__o__|-\    6|  10k  |  |\    |
  1    |                 |  /   4      |  |  \____o___R6__o__|-\   |
  O----o               --|+/       -----  |  /    |       7  |  \__o____O
       |               | |/ A1     |    --|+/ A2  |       8  |  /  9
       |               |           |    | |/      ---C3---o--|+/ 
       |----R3---------+-----------|    |         0.01uF  |  |/  A3
Input      10k         |                |                 |        Output
                       |                |                 R7
                       |                |                 | 2150
                       |                |                 |
  O--------------------o----------------o-----------------o-------------O
                                        0

A1,A2,A3 = TL084

Delay Line Results

Transmission Results for 100uS Delay Line
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 1.000E+02           20.006             -3.625
 3.900E+02           20.015            -14.136        -1.007E-04
 6.800E+02           20.026            -24.648        -1.007E-04
 9.700E+02           20.037            -35.160        -1.007E-04
 1.260E+03           20.049            -45.672        -1.007E-04
 1.550E+03           20.061            -56.183        -1.007E-04
 1.840E+03           20.075            -66.693        -1.007E-04
 2.130E+03           20.090            -77.200        -1.006E-04
 2.420E+03           20.105            -87.703        -1.006E-04
 2.710E+03           20.121            -98.199        -1.005E-04
 3.000E+03           20.138           -108.683        -1.004E-04

Impedance Results for 100uS Delay Line
Frequency                Input Impedance              Output Impedance
   (Hz)                (Real)         (Imag)          (Real)         (Imag)
 1.000E+02           9.831E+03      -1.234E+03       4.001E-03     -9.949E-08
 3.900E+02           7.974E+03      -3.836E+03       9.803E-03     -7.576E-07
 6.800E+02           5.727E+03      -4.633E+03       1.561E-02     -1.472E-06
 9.700E+02           4.093E+03      -4.475E+03       2.141E-02     -2.001E-06
 1.260E+03           3.047E+03      -4.035E+03       2.721E-02     -2.397E-06
 1.550E+03           2.382E+03      -3.572E+03       3.302E-02     -2.744E-06
 1.840E+03           1.948E+03      -3.157E+03       3.882E-02     -3.099E-06
 2.130E+03           1.655E+03      -2.801E+03       4.463E-02     -3.496E-06
 2.420E+03           1.452E+03      -2.501E+03       5.043E-02     -3.956E-06
 2.710E+03           1.306E+03      -2.246E+03       5.624E-02     -4.490E-06
 3.000E+03           1.199E+03      -2.029E+03       6.205E-02     -5.103E-06


EXAMPL10 
--------

This is quite a large circuit and demonstrates how ACIRAN can handle even
the most complex analysis.

LowPass Filter




           1            2    7500      3
           O------C1----o-----R1-------o-------------------------->
                 0.1uF                 |
                                       R2 1k
                                       |      |\
                                      4o------|+\ A1
                                       |      |  \_______.
                                 0.1uF C2     |  /       |
                                       |    --|-/        |
                  .--------------------o5   | |/         |
                  |                    |    |            |
                  |              6190  R3   |            |
                  |                   6|    |            | Stage1
       Input      |                ----o-----            |
                  |          /|    |   |                 |
                  |     A2  /-|----|   C3 0.1uF          |
                  |_______ /  |        |                 |
                           \  |       7o------------------
                            \+|----.   R4 7320
                             \|    |   |
                                   |  8o------.
                                   |   |      |
                                   |   R5 <---|
                                   |   |  500 +/- 50%
                                   ----o9
                                       |
                                       R6 6190
                                       |
          O----------------------------o-------------------------->
                                       0

                                       10
          >-------------------R7-------o-------------------------->
                             9310      |
                                       R8 6890
                                       |      |\
                                     11o------|+\ A3
                                       |      |  \_______.
                                 0.1uF C4     |  /       |
                                       |    --|-/        |
                  .--------------------o12  | |/         |
                  |                    |    |            |
                  |               6190 R9   |            |  Stage2
                  |                    |13  |            |
                  |                ----o-----            |
                  |          /|    |   |                 |
                  |      A4 /-|----|   C5 0.1uF          |
                  |_______ /  |        |                 |
                           \  |      14o------------------
                            \+|----.   R10
                             \|    |   |
                                   | 15o------.
                                   |   |      |
                                   |   R11<---|
                                   |   |  500 +/- 50%
                                   ----o16
                                       |
                                       R12 6190
                                       |
          >----------------------------o-------------------------->
                                       0










                                       17
          >------------------R13-------o-------------------------->
                             5110      |
                                       R14 14.7k
                                       |      |\
                                     18o------|+\ A5
                                       |      |  \_______.
                                 0.1uF C6     |  /       |
                                       |    --|-/        |
                  .--------------------o19  | |/         |
                  |                    |    |            |
                  |               6190 R15  |            |
                  |                    |20  |            |
                  |                ----o-----            |
                  |      A6  /|    |   |                 |
                  |         /-|----|   C7 0.1uF          | Stage3
                  |_______ /  |        |                 |
                           \  |      21o------------------
                            \+|----.   R16 2150
                             \|    |   |
                                   | 22o------.
                                   |   |      |
                                   |   R17<---|
                                   |   |   500 +/- 50%
                                   ----o23
                                       |
                                       R18 6190
                                       |
          >----------------------------o---------------------------->
                                       0

                                       24
          >------------------R19-------o---------------------------->
                            4120       |
                                       R20 11.5k
                                       |      |\
                                     25o------|+\ A7
                                       |      |  \_______.
                                 0.1uF C8     |  /       |
                                       |    --|-/        |
                  .--------------------o26  | |/         |
                  |                    |    |            |
                  |               6190 R21  |            |
                  |                    |27  |            |
                  |                ----o-----            | Stage4
                  |          /|    |   |                 |
                  |     A8  /-|----|   C9 0.1uF          |
                  |_______ /  |        |                 |
                           \  |      28o------------------
                            \+|----.   R22 2670
                             \|    |   |
                                   | 29o------.
                                   |   |      |
                                   |   R23<---|
                                   |   |   500 +/- 50%
                                   ----o30
                                       |
                                       R24 6190
                                       |
         >-----------------------------o----------------------------->
                                       0



                                       31                      38
         >-------------------R25-------o--------------R31------o----O >--|
                             6650      |              5360     |         |
                                       R26 4020                |         |
                                       |      |\               |         |
                                     32o------|+\  A9          |         |
                                       |      |  \_______.     |         |
                                 0.1uF C10    |  /       |     |         |
                                       |    --|-/        |     |         |
                  .--------------------o33  | |/         |     |         |
                  |                    |    |            |     |         |
                  |               6190 R27  |            |     |   Output|
                  |                    |34  |  Stage5    |     |         |
                  |                ----o-----            |     |         |
                  |     A10  /|    |   |                 |    C12 0.1uF  RL 1M
                  |         /-|----|   C11 0.1uF         |     |         |
                  |_______ /  |        |                 |     |         |
                           \  |      35o------------------     |         |
                            \+|----.   R28 4990                |         |
                             \|    |   |                       |         |
                                   | 36o------.                |         |
                                   |   |      |                |         |
                                   |   R29<---|                |         |
                                   |   |   500 +/- 50%         |         |
                                   ----o37                     |         |
                                       |                       |         |
                                       R30 6190                |         |
                                       |                       |         |
         >-----------------------------o-----------------------o----O >--|
                                       0

A1-A10 = LM124


Low Pass Filter Results

 
Transmission Results for Low Pass Filter
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 1.000E+02           -6.035           -113.820
 1.200E+02           -6.021           -141.176        -3.883E-03
 1.400E+02           -6.126           -170.857        -4.201E-03
 1.600E+02           -6.217            156.691        -4.632E-03
 1.800E+02           -6.101            118.464        -5.601E-03
 2.000E+02           -6.002             68.703        -7.408E-03
 2.200E+02           -6.061              0.850        -1.030E-02
 2.400E+02           -6.428           -127.396        -2.146E-02
 2.600E+02          -53.155             88.245         1.657E-02
 2.800E+02          -65.822           -144.033        -5.771E-03
 3.000E+02          -66.648             15.946        -3.317E-03




The circuit is an Elliptic-Function Low-Pass Filter using a GIC (Generalized
Impedance Converter). Five stages of GIC are employed. The filter is designed
to have low insertion loss and ripple in the pass band up to 260Hz, and
to have a minimum attenuation outside the passband of 60dB at 270Hz.

In practice variable resistors are needed to adjust the GIC to obtain the
desired response.

Analyse the circuit from 100 to 300Hz in 10 Linear steps. This circuit will
take several minutes to Analyse.


Exampl11
--------

  This example uses a Transmission line as a quarter wavelength transformer to
match an impedance of 95 ohms real to a load of 50 ohms real. The frequency of
interest is 150Mhz (2m wavelength) which gives a line length of 50cm (2m/4).

The impedace of the line to give the required match is equal to the square root
of the source impedance multiplied by the load impedance ie.

        sqrt(95 * 50) = 69ohms

     
Transmission Line Transformer

                  ZL1    
       1          __________________________     2
  input \ _______|                          |____/
        /        |__________________________|    \     output
95 ohms                Zo=69 L=50 Er=1                 50 ohms

        0_________________________________________0


Where Zo = characteristic impedance
      L  = length in cm
      Er = relative permeability


The configure menu is entered and the load impedance set to 50 + j 0.00 and
the generator impedance to 95 + j 0.00. Select Return loss and Linear Sweep.
Analyse the circuit from 148Mhz to 152Mhz in 4 steps, the results are:-

Transmission Results for Transmission Line Transformer
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 1.480E+08           -2.797            -89.130
 1.490E+08           -2.797            -89.565        -1.208E-09
 1.500E+08           -2.798            -90.000        -1.208E-09
 1.510E+08           -2.797            -90.435        -1.208E-09
 1.520E+08           -2.797            -90.870        -1.208E-09


Impedance Results for Transmission Line Transformer
Frequency                Input Impedance              Output Impedance
   (Hz)                (Mag)          (Pha)          (Mag)         (Pha)
 1.480E+08           9.519E+01         0.786       5.013E+01       -0.780
 1.490E+08           9.521E+01         0.393       5.012E+01       -0.390
 1.500E+08           9.522E+01        -0.000       5.012E+01       -0.000
 1.510E+08           9.521E+01        -0.393       5.012E+01        0.390
 1.520E+08           9.519E+01        -0.786       5.013E+01        0.780


Return Loss Results for Transmission Line Transformer
Frequency(Hz)    Input RL(dB)    Output RL(dB)    Input VSWR    Output VSWR
 1.480E+08          43.18            43.18          1.0140         1.0140
 1.490E+08          48.85            48.85          1.0072         1.0072
 1.500E+08          58.74            58.73          1.0023         1.0023
 1.510E+08          48.85            48.85          1.0072         1.0072
 1.520E+08          43.18            43.18          1.0140         1.0140



Exampl12
--------

This example makes use of transmission lines to match a source impedance to
a complex load by means of a Stub Tuner. The theory of Stub Tuner matching is
beyond the scope of this manual and the reader should refer to relevant text
books.

Stub Tuner


                  ZL1                         ZL2 
     1          _______________________  2  __________________ 3
input \ _______|                       |_o_|                  |___/
      /        |_______________________| | |__________________|   \ output
50ohms             Zo=50 L=75 Er=1       |   Z0=50 L=39.8 Er=1    100 + j 50.00
                                         |
      0__________________________________|________________________0
                                         |
             ____________________________|
            |
            |     STUB    
            |     __________________________     4
            |____|                          |____
                 |__________________________|    |
                       Zo=50 L=25 Er=1           /
                                                 \ Short = 1e-3 ohms
                                                 /
                                                 |
                                                 0

Where Zo = characteristic impedance
      L  = length in cm
      Er = relative permeability


 A Stub can be open or short circuit, it is better to use a short otherwise
it tends to radiate. The circuit was analysed over the same frequency range
as before. The source generator was set to 50 + j 0.00 ohms and the load set
to 100 + j 50.00, ie complex.

Transmission Results for Single Stub Match
Frequency(Hz)     Magnitude(db)      Phase(Deg)    Time Delay(Sec)
 1.480E+08            3.855            -87.104
 1.490E+08            3.922            -89.076        -5.478E-09
 1.500E+08            3.981            -91.066        -5.528E-09
 1.510E+08            4.031            -93.071        -5.568E-09
 1.520E+08            4.072            -95.085        -5.596E-09


Impedance Results for Single Stub Match
Frequency                Input Impedance              Output Impedance
   (Hz)                (Mag)          (Pha)          (Mag)         (Pha)
 1.480E+08           5.141E+01        -2.252       1.160E+02      -25.276
 1.490E+08           5.065E+01        -1.059       1.138E+02      -25.999
 1.500E+08           4.998E+01         0.168       1.116E+02      -26.683
 1.510E+08           4.939E+01         1.424       1.095E+02      -27.328
 1.520E+08           4.889E+01         2.704       1.074E+02      -27.936


Return Loss Results for Single Stub Match
Frequency(Hz)    Input RL(dB)    Output RL(dB)    Input VSWR    Output VSWR
 1.480E+08          32.37             6.26          1.0493         2.8937
 1.490E+08          38.95             6.13          1.0228         2.9519
 1.500E+08          56.59             6.00          1.0030         3.0103
 1.510E+08          37.17             5.88          1.0281         3.0687
 1.520E+08          31.65             5.76          1.0537         3.1271

Where Zo = characteristic impedance
      L  = length in cm
      Er = relative permeability


At first appearance the passive line seems to have a gain, this is due to
the impedance transformation, and although a voltage gain is produced the
current gain is less than unity and so is the power gain.



                        Advanced Options

Aciran uses a unity voltage generator as it's source. This is the same as
having an AC voltage generator of 1VAC connected between nodes 1 and 0.

The result is that the gain/loss of the circuit being analysed is the output
value presented, and in most cases there is no reason to change this. In the
next section you will read about SPAC, the PSpice to Aciran file conversion
utility which is supplied to registered users. Aciran is able to accept
independant Voltage and Current Sources for PSpice compatibility, but these
are normally relaced with AC short circuits, in order to preserve the circuit
topology. If the source is connected across the input terminals then it is
completely ignored.

The exception is where the source is an AC Voltage source,in this case its
value is used as an input reference in the same way that PSpice uses such
inputs. This means that you can set the input voltage to Aciran by connecting
an AC Voltage source to the input terminals.

 

                      SPAC Conversion Utility 


Up until now input to ACIRAN has been via the keyboard. SPAC is a 
conversion utility which allows you to input PSpice circuit files to 
ACIRAN. PSpice files are stored as ascii text and spac will read these
files and attempt tp convert them into an Aciran file.

At the prompt type SPAC <cr>.

You will see a version number and copyright notice and be asked to enter
a PSpice filename. Full paths are allowed, but make sure that if the PSpice
circuit has any include files, that these are located in the current path or
directory.

As it progresses SPAC will report on it's progress, the info is also written
to an ascii text file called SPAC.LOG which you can inspect later if there
are any problems. After it has completed you will be asked for the name of
an Aciran file name in which to store the data.

During the conversion SPAC may come across component types it cannot handle,
you will be notified of these, and of any substitutions that take place.
The three files standard.amp, standard.fet and standard.trn must be in the
same directory as SPAC, as these are used to supply model info if SPAC is
unable to find PSpice models that it knows.

PSpice node numbering is somewhat erratic, and so SPAC renumbers the nodes
starting at 1. To help you see what has happened a node table is produced
showing the old and new node numbers. This is needed if SPAC is unsure of
the output node, or if any components cannot be handled and you have to enter
then manually from Aciran.

If SPAC has had to assume the output node, you should find out what it is in
the PSpice circuit, look up the node table to find out what SPAC has changed
it to, and then use the Edit command in Aciran to change the output node to
the correct number.




                    ACTRAN Conversion Utility 
     
     
Up until now input to ACIRAN has been via the keyboard. ACTRAN is a 
conversion utility which allows you to input ORCAD netlist files to 
ACIRAN. ORCAD is a schematic design package which is capable of outputing   
circuit information in a number of CAD formats. This netlist file can then  
be used by other CAD systems such as a PCB layout package. 
  
All the information needed by ACIRAN can be obtained from an ORCAD netlist  
in the SPICE format. If you have used ORCAD to produce your circuit 
diagrams it makes sense to use Actran to convert the netlist file into an   
ACIRAN circuit file, rather than enter the whole circuit again by hand. 
  
The ORCAD system comes complete with a number of component libraries 
however these may not all be in the correct format for SPICE netlist files  
and normally these would need modification. To simplify matters an ACIRAN   
library called ACIRAN.LIB is supplied which contains most of the elements   
used by ACIRAN in the spice format.For more detailed information on ORCAD   
libraries you should consult your ORCAD handbook. 
    
     
How to use ACTRAN 
    
Start by adding ACIRAN.LIB to the begining of the list of Library files 
used by Draft. This will ensure that draft will look in ACIRAN.LIB first 
for any components that it uses.Create your circuit in the normal way. 
   
ACIRAN circuits have one input and one output node and it is necessary to   
tell it what these nodes are in the ORCAD circuit. This is done by having   
one input module port called 'input' and one output module port called 
'output'. The node numbers corresponding to these modules are placed in a   
MAP file by Netlist where they are read by ACTRAN. 
    
Let us assume that you have produced a circuit using ORCAD. Most of the 
circuit examples supplied with ACIRAN are given in their ORCAD form as well 
as ACIRAN circuit files. Once you have annotated and carried out an 
electrical rules check on you circuit without any errors being found use 
Netlist to generate a netlist file in the SPICE format thus: 
    
  Netlist <CircuitFileName> <NetlistFileName> /S Spice <cr> 
     
The Netlist utility supplied by ORCAD will produce two files ,a net file 
and a map file, both of which are used by ACTRAN. 
     
Having successfully produced a Net and Map file in the SPICE format we are  
now ready to run ACTRAN. At the DOS prompt type ACTRAN <cr>. The ACTRAN 
screen will appear and you will be prompted for the netlist filename. Full  
path names are supported. If ACTRAN is successfull in finding the files it  
will report on its progress on the output window while it processes the 
netlist information. 
                                                                               
Should ACTRAN come across any unknown component types these will be ignored 
and a warning will be issued. ACTRAN also produces a LOG file which 
contains a record of all screen output. Once ACTRAN has completed it's work 
you should examine ACTRAN.LOG to check for any errors, this is a simple 
text file which can be viewed by using the TYPE command. 
     
There is the possibility that you will be using transistor, FET and OPAMPs  
that are not listed in the models directory.ORCAD only has the designator   
Q? for both Transistors and FET's and therefore ACTRAN is unable to 
distinguish between them. ACTRAN assumes the component is a FET and looks   
in the models directory for a FET of the given type. If it is not 
sucessfull it then tries to find a transistor of the given type. If the 
component type is still not found ACTRAN leaves it as a transistor and 
gives it the name STANDARD. The Model file STANDARD contains information on a 
general purpose NPN transistor. Actran tells the user that this 
substitution has taken place. A similar event takes place when ACTRAN is 
unable to find model files for Opamps. All Opamps have the designator U?,   
and ACTRAN only expects to find Opamps ic's and therefore the presence of   
other Integrated Circuits will only lead to confusion. 
    
After completing the transfer ACTRAN will ask for a circuit Description of  
up to 30 characters. This is simply the Name that you normally add to a 
ACIRAN circuit file to identify it. Next you will be asked for a file name  
and you should enter any valid ACIRAN circuit file name. ACTRAN will now 
store the circuit file in your circuits directory. 
     

It is important how the values of some components are entered in the ORCAD
sheet so that ACTRAN can read them correctly. The majority of components are
straight forward however Transformers and Transmission Lines are more 
particular. You should study the example files provided in the ORCAD directory.
Note that Transformers require the turns ratio to be supplied as

    <primary turns> <space> : <space> <secondary turns>
                            ^
                          colon

and that Transmission lines require their parameters to be stated as

     Zo=<char impedance> <space> L=<length in cm> <space> Er=<permeability>

The colon and equals signs are important, as well as the order of parameters.



Appendix A - Model Files.


ACIRAN uses model files to hold descriptions of Transistors Fets and Opamps.
You can create your own model files and add them to the Models directory using
any text editor or wordprocessor such as WordStar(Do not use any control codes).

The model for the BC107 Transistor used in EXAMPL2 is shown below:  


BC107
2.7k
18U
192
35%
300M

The file consists of lines of text. Each line contains ONE and only one
parameter and all parameters MUST be supplied. The information can be obtained
from manufacturers data sheets.

The first line contains the component name 'BC107' ( max of 8 characters).
Next comes the value of hie, followed by hoe and hfe. The tolerance value
refers to hfe.
Transistor hfe values can vary enormously even for the same type of transistor.
The 'h' parameters of a transistor vary with temperature and collector current.

Last comes the value of FT. Note the use of multipliers, hie could just have
easily been written as 27e2, 27E2 or 2700. Transistor model files MUST be
given the extension .TRN.


The Fet model file for the 2N4393 Fet used in EXAMPL6 is shown below:


2N4393
15m
45%
11.5p
2p


Again the same rules apply as for the transistor file. First comes the name,
followed by the transconductance gm, the tolerance for gm, the Fet capacitances
Cgs and Cgd. Fet model files MUST have the file extension .FET.




The last model type supported by ACIRAN is the Opamp model. The model file
for the LM124 opamp is listed below:

LM124
100M
600
100
1M
50%


First comes the component name followed by the input impedance and the output
impedance.
Next is the open loop gain in dB and the Gain Bandwidth Product GBW.
The tolerance refers to the open loop gain. Most opamps have a very high
open loop gain in excess of 100dB. Manufacures data sheets give conservative
values for open loop gain and it is well controlled.
Opamp model files MUST have the extension .AMP.



Hybrid PI Model

The Hybrid Pi model for a Transistor is illustrated below:



                       ____rbc____
                   b'  |         |                    
    B----rbb-------o---o         o----o--------o-----C
              |    |   |____Cc___|    |        |
              |    |                  |        |
             rbe   Ce                rce       gm
              |    |                  |        |
              |    |                  |        |
              -----o------------------o---------
                            |
                            |
                            E
                             




The symbols have the following meaning:


rbb = Base spreading resistance
rbe = Input impedance
rbc = Feedback Impedance (effect of Vce changes on Base modulation)
rce = C-E Impedance
Cc = Collector-junction barrier capacitance
Ce = Overlap diode capacitance
gm = Transistor Transconductance





If the CE 'h' parameters are known at low frequencies at a given collector
current Ic (see manufacturers data sheets) then the impedances can be
calculated in the following order:


     |Ic|     |Ic ma |
gm = ----  =  --------
      VT        26


      hfe
rbc = ---
      gm


rbb = hie - rbe



      rbe
rbc = ---
      hre


             1                           1
rce =  -------------        where gbc = ---
       hoe-(1+hfe)gbc                   rbc
                                            
       

The capacitance Cc is the measured CB output capacitance with the input
open (Ie = 0), and is usually specified by the manufacturers as Cob.

Ce is experimentally determined from a measurement of FT, the frequency
at which the CE short-circuit current gain drops to unity.

         gm
Ce =  -------    PI = 3.14159
      2*PI*FT


Typical values for a Hybrid PI model at room temperature and for Ic = 1.3mA
are

gm = 50mA/V     rbb = 100 ohms      rbe = 1k     rbc = 4Mohm

rce = 80Kohm    Cc = 3pF            Ce = 100pF


Appendix B - Upgrade Utility

The utility program upgrade.exe is supplied to allow users of earlier 
versions of aciran to convert their circuit files into the new format 
used by aciran V3.1.

Previous circuit files had the extension CCT. The new circuit files 
contain more information and are not compatible with earlier formats. 
To distinguish them they have the extension CIR.

The new circuit files hold transistor collector current values, and 
all the config information to save the user having to re-enter config 
every time a circuit was loaded.

Any attempt to use the old circuit files by simply re-naming them 
will result in program failure. The utility upgrade should be used 
as follows.

At the dos prompt type:

          upgrade <FileName> <CR>

Upgrade will read the circuit file into memory, perform the necessary 
conversions, and create a new circuit file on disk, in the current 
directory, with the same name, but with the extension CIR.

Upgrade can accept wildcard characters such as ? or *.

You could convert all your files in the current directory by simply: 
entering

         upgrade *.* <CR>

Upgrade applies default config parameter information into the circuit 
files. This gives the following setup.

The next time you load the circuit and make modifications to the config 
parameters these will be saved when you save the circuit. 

THE END.

