


                                   CONTENTS



CHAPTER 1       CHANGES BETWEEN V1.0 AND V1.1

        1.1     DECnet-DOS and DECnet-Rainbow NFT  . . . . . . . . 1-1
        1.2     DECnet-DOS and DECnet-Rainbow SETHOST  . . . . . . 1-2
        1.3     DECnet-DOS and DECnet-Rainbow NDU  . . . . . . . . 1-2
        1.4     DECnet-DOS and DECnet-Rainbow NTU  . . . . . . . . 1-3
        1.5     DECnet-DOS and DECnet-Rainbow TFA  . . . . . . . . 1-3
        1.6     DECnet-DOS and DECnet-Rainbow TTT  . . . . . . . . 1-3
        1.7     DECnet-DOS and DECnet-Rainbow TNTERR . . . . . . . 1-3
        1.8     DECnet-DOS and DECnet-Rainbow DTR/DTS  . . . . . . 1-4
        1.9     DECnet-DOS and DECnet-Rainbow SPAWNER  . . . . . . 1-4
        1.10    DECnet-DOS and DECnet-Rainbow MAIL . . . . . . . . 1-4
        1.11    DECnet-DOS and DECnet-Rainbow FAL  . . . . . . . . 1-4
        1.12    DECnet-DOS and DECnet-Rainbow DIP  . . . . . . . . 1-5
        1.13    Revisions to the DECnet-DOS Programmer's Reference 
                Manual . . . . . . . . . . . . . . . . . . . . . . 1-5
        1.14    DECnet-DOS and DECnet-Rainbow Programming 
                Interface  . . . . . . . . . . . . . . . . . . . . 1-9


CHAPTER 2       SOLVING PROBLEMS, RESTRICTIONS, AND HINTS

        2.1     Asynchronous Installation Problems . . . . . . . . 2-1
        2.2     Asynchronous Performance and Tuning  . . . . . . . 2-6
        2.3     Asynchronous Configuration Problems  . . . . . . . 2-7
        2.4     Ethernet Performance and Tuning  . . . . . . . . . 2-8
        2.5     Ethernet Configuration Problems  . . . . . . . .  2-10
        2.6     General Problems . . . . . . . . . . . . . . . .  2-10
        2.6.1     Problems with Rainbow Only . . . . . . . . . .  2-13
        2.6.2     Problems with IBM PCs Only . . . . . . . . . .  2-13
        2.7     NFT - Network File Transfer  . . . . . . . . . .  2-14
        2.8     Error Messages and Warnings  . . . . . . . . . .  2-15
        2.8.1     Error Messages . . . . . . . . . . . . . . . .  2-15
        2.8.2     Warnings . . . . . . . . . . . . . . . . . . .  2-17
        2.9     SETHOST  . . . . . . . . . . . . . . . . . . . .  2-18
        2.9.1     CTERM ONLY . . . . . . . . . . . . . . . . . .  2-18
        2.9.2     LAT ONLY . . . . . . . . . . . . . . . . . . .  2-19
        2.10    NDU - Network Device Utility . . . . . . . . . .  2-21
        2.10.1    NPDRV - Virtual Printer Driver . . . . . . . .  2-21
        2.10.2    NDDRV - Virtual Disk Driver  . . . . . . . . .  2-22
        2.11    NCP - Network Control Program  . . . . . . . . .  2-22
        2.12    NTU - Network Test Utility . . . . . . . . . . .  2-24
        2.13    TFA - Transparent File Access  . . . . . . . . .  2-25
        2.14    TTT - Transparent Task-to-Task . . . . . . . . .  2-25
        2.15    DTR/DTS  . . . . . . . . . . . . . . . . . . . .  2-25
        2.16    MAIL . . . . . . . . . . . . . . . . . . . . . .  2-25
        2.17    FAL (File Access Listener) . . . . . . . . . . .  2-26
        2.18    DIP - DECnet-DOS Installation Procedure  . . . .  2-28


                                  1



        2.19    C Programming Library  . . . . . . . . . . . . .  2-29


CHAPTER 3       MODEM CONTROL

        3.1     Using Modem Control  . . . . . . . . . . . . . . . 3-1
        3.2     Modem States . . . . . . . . . . . . . . . . . . . 3-2
        3.2.1     General  . . . . . . . . . . . . . . . . . . . . 3-5
        3.2.2     State 1  . . . . . . . . . . . . . . . . . . . . 3-5
        3.2.3     State 2  . . . . . . . . . . . . . . . . . . . . 3-5
        3.2.4     State 3  . . . . . . . . . . . . . . . . . . . . 3-5
        3.2.5     State 4  . . . . . . . . . . . . . . . . . . . . 3-6
        3.2.6     State 5  . . . . . . . . . . . . . . . . . . . . 3-6
        3.2.7     State 6  . . . . . . . . . . . . . . . . . . . . 3-6
        3.2.8     State 7  . . . . . . . . . . . . . . . . . . . . 3-6
        3.3     Interface Requirements . . . . . . . . . . . . . . 3-8
        3.4     Modem Option Selections  . . . . . . . . . . . .  3-10


CHAPTER 4       REPORTING PROBLEMS


FIGURES

        3-1     Modem States . . . . . . . . . . . . . . . . . . . 3-4
        3-2     Minimum Implementation of V.24 Circuits for Full 
                Duplex Modem Control . . . . . . . . . . . . . . . 3-7


TABLES

        1-1     Extended Error Messages - Unable to Make a 
                Connection . . . . . . . . . . . . . . . . . . . . 1-6
        1-2     Extended Error Messages - Disconnecting a Logical 
                Link . . . . . . . . . . . . . . . . . . . . . . . 1-8
        3-1     Asynchronous Mode, Direct Connection . . . . . . . 3-8
        3-2     Asynchronous Mode, Modem Connection  . . . . . . . 3-9
        3-3     User-selectable Modem Options  . . . . . . . . .  3-10
















                                  2



Preface


The following release notes include updated information for DECnet-DOS
V1.1   and  DECnet-Rainbow  V1.1.   You  should  use  these  notes  in
conjunction  with   the   material   presented   in   the   DECnet-DOS
documentation set.


Intended Audience


These release notes are intended for users of the  Rainbow  series  of
personal  computers  and  for  users of the IBM PC, IBM PC/XT, and IBM
Personal Computer AT.  Some  of  the  information  presented  in  this
document  is  very  technical.  If you do not understand the material,
you should seek assistance from the  person  who  is  responsible  for
configuring your network.


ALL-IN-1 is a trademark of Digital Equipment Corporation.

IBM is a  registered  trademark  of  International  Business  Machines
Corporation.

IBM  PC/XT  is  a  trademark  of   International   Business   Machines
Corporation.

IBM Personal Computer AT is  a  trademark  of  International  Business
Machines Corporation.

MS is a trademark of Microsoft Corporation.

Symphony is a trademark of Lotus Development Corporation.




















                                  3












                              CHAPTER 1

                    CHANGES BETWEEN V1.0 AND V1.1




This chapter describes the software changes made from  DECnet-DOS  and
DECnet-Rainbow  Version  1.0  to DECnet-DOS and DECnet-Rainbow Version
1.1.

For DECnet-DOS only, DECnet-DOS V1.1 adds  support  for  IBM  Personal
Computer ATs, support for PC-DOS V3.1, and Ethernet support.

In Version 1.0, the background network task was installed as an MS-DOS
device driver.  In Version 1.1, a number of tasks cooperate to provide
background network processing.  All of these tasks are  terminate  and
stay resident tasks, not device drivers.  They include:  the interrupt
Scheduler (SCH); the Ethernet Data Link Layer (DLL); the LAT  protocol
handler  (LAT);  and  the DECnet Network Process (DNP).  Note that DLL
and LAT apply to DECnet-DOS only.

The processes communicate using software interrupts.   The  interrupts
                                                            __________
used  by  each  process  are  listed  in an appendix to the DECnet-DOS
____________ _________ ______
Programmer's Reference Manual.

The  following  sections  describe  changes  to  the  DECnet-DOS   and
DECnet-Rainbow utilities.



1.1  DECnet-DOS and DECnet-Rainbow NFT



      o  NFT now provides the PRINT and SUBMIT  commands  which  queue
         remote  files  at  the  remote  node,  and /PRINT and /SUBMIT
         switches which can be used with  the  COPY  command  to  copy
         local files to remote nodes to be queued at the remote node.

      o  The /FULL switch for the DIRECTORY command now provides a VMS
         style full directory listing for remote files.



                                 1-1
                    CHANGES BETWEEN V1.0 AND V1.1


      o  NFT will now allow you to copy remote files directly  to  the
         local printer, for example:

         NFT COPY REMOTE::FOO.BAR PRN
         or
         NFT COPY REMOTE::FOO.BAR PRN:


      o  NFT can now do block  mode  file  copies.   Block  mode  file
         copying  is  an image mode file transfer which moves the data
         in 512 byte units independent of any record  characteristics.
         The  end  of  file  byte position is properly retained.  This
         file copy mode may be necessary to copy files with very  long
         records.   To  use block mode when copying, specify /BLOCK as
         the only switch.

      o  The date  and  time  of  creation  of  copied  files  is  now
         preserved.




1.2  DECnet-DOS and DECnet-Rainbow SETHOST


      o  SETHOST now allows you the ability to interrupt a session  to
         perform  some  local task and then continue the session where
         you left off.  Multiple interrupted  sessions  are  supported
         (CTERM  connections  only).   Local  tasks include any MS-DOS
         command or sequence of commands, starting or stopping logging
         of the terminal session, and getting help.

      o  SETHOST now provides VMS style command line editing.

      o  SETHOST provides on-line help.

      o  LAT  support   is   now   provided   by   SETHOST   (Ethernet
         configurations  only).   When  SETHOST attempts to connect to
         the remote node it first attempts to use  LAT  protocol.   If
         that fails, SETHOST attempts a CTERM connection.  There is no
         multiple session LAT support.




1.3  DECnet-DOS and DECnet-Rainbow NDU


      o  NDU can now CREATE virtual disk volumes in 4 different sizes,
         1.2, 10, 20, and 32 MB.




                                 1-2
                    CHANGES BETWEEN V1.0 AND V1.1


1.4  DECnet-DOS and DECnet-Rainbow NTU


      o  The SET RECORDING command is no longer available.  Use the TO
         file option instead.

      o  LOOP command syntax has been changed to  be  more  consistent
         with  other  DECnet  implementations.   The LOOP commands are
         now:  LOOP EXECUTOR, LOOP CIRCUIT, LOOP NODE, and  LOOP  LINE
         CONTROLLER.




1.5  DECnet-DOS and DECnet-Rainbow TFA


      o  TFA now has on-line help.

      o  TFA can now be unloaded after use to  make  memory  available
         for other tasks.  TNT unloads TFA.




1.6  DECnet-DOS and DECnet-Rainbow TTT


      o  TTT now has on-line help.

      o  TTT can now be unloaded after use to  make  memory  available
         for other tasks.  TNT unloads TTT.




1.7  DECnet-DOS and DECnet-Rainbow TNTERR


      o  TNTERRs name has been changed to TNT.

      o  TNT provides on-line help.

      o  TNT can unload TTT or TFA from memory.










                                 1-3
                    CHANGES BETWEEN V1.0 AND V1.1


1.8  DECnet-DOS and DECnet-Rainbow DTR/DTS


      o  DTR now has on-line help.




1.9  DECnet-DOS and DECnet-Rainbow SPAWNER


      o  The DECnet Job Spawner is a new utility with DECnet-DOS V1.1.
         The  job  spawner  runs  as  a  foreground  task  waiting for
         incoming connections.  When a connection arrives, the spawner
         looks  up the requested object name or number in its database
         and runs the program which services  that  type  of  request.
         When  the  program  finishes,  the  spawner  again  waits for
         incoming connections.  The spawner  supports  FAL,  DTR,  and
         user-written servers.




1.10  DECnet-DOS and DECnet-Rainbow MAIL


      o  MAIL is a new utility  with  V1.1.   MAIL  provides  you  the
         ability  to  transmit  messages  or files to other non MS-DOS
         nodes in your network.  MAIL does not allow  you  to  receive
         mail directly at your personal computer node.




1.11  DECnet-DOS and DECnet-Rainbow FAL


      o  The File Access Listener (FAL) allows  other  nodes  in  your
         network access to files local to your personal computer node.
         Access is password controlled.  FAL can be run with  the  Job
         Spawner.













                                 1-4
                    CHANGES BETWEEN V1.0 AND V1.1


1.12  DECnet-DOS and DECnet-Rainbow DIP


      o  DECnet-DOS and DECnet-Rainbow can now be completely installed
         by  running  the  DECnet  Installation  Procedure  (DIP)  and
         answering a few simple questions.  Refer to  the  appropriate
         installation guide for instructions.




                       __________ ____________ _________ ______
1.13  Revisions to the DECnet-DOS Programmer's Reference Manual


The following tables are revised Versions of Table D-1 and Table  D-2,
which  are  in  Appendix  D ("SUMMARY OF EXTENDED ERROR CODES") of the
__________ ____________ _________ ______
DECnet-DOS Programmer's Reference Manual.

DECnet-DOS  supports  extended  error  support   to   certain   socket
                                                            __________
operations.   When  you  write  a  program  which  uses the getsockopt
                                                        __________
function call, extended error codes can be returned in  opt_status,  a
                  __________
data  member  of  optdata_dn.   This  can occur following an attempted
connection request or after disconnecting a logical link.

Table 1-1 lists extended error codes which can be  returned  following
an  attempted  connection.   It  lists  the  error  messages  found in
________
derrno.h, the decimal value for each message, their  equivalent  error
             _________            _____
message that dnet_conn returns in errno, and the error reason.


























                                 1-5
                    CHANGES BETWEEN V1.0 AND V1.1


Table 1-1:  Extended Error Messages - Unable to Make a Connection

Decimal     derrno.h               dnet_conn              
                                                          
Error Code  Mnemonic               In errno               Reason

 0          EREJBYOBJ              ECONNREFUSED           Connect failed.
                                                          Connection
                                                          rejected by object.

 1          EINSSNETRES            ENOSPC                 Connect failed.
                                                          Insufficient network
                                                          resources.

 2          EUNRNODNAM             EADDRNOTAVAIL          Connect failed.
                                                          Unrecognized
                                                          node name.

 3          EREMNODESHUT           ENETDOWN               Connect failed.
                                                          Remote node
                                                          shutting down.

 4          EUNROBJ                ESRCH                  Connect failed.
                                                          Unrecognized object.

 5          EINVOBJNAM             EINVAL                 Connect failed.
                                                          Invalid object
                                                          name format.

 6          EOBJBUSY               ETOOMANYREFS           Connect failed.
                                                          Object too busy.

10          EINVNODNAM             ENAMETOOLONG           Connect failed.
                                                          Invalid node
                                                          name format.

11          ELOCNODESHUT           EHOSTDOWN              Connect failed.
                                                          Local node
                                                          shutting down.

32          ENODERESOURCES         ENOSPC                 Connect failed. No
                                                          node resources for
                                                          new logical link.

33          EUSERESOURCES          ENOSPC                 Connect failed. No
                                                          user resources for
                                                          new logical link.

34          EACCONREJ              ECONNABORTED           Connect failed.
                                                          Access control
                                                          rejected.



                                 1-6
                    CHANGES BETWEEN V1.0 AND V1.1


Decimal     derrno.h               dnet_conn              
                                                          
Error Code  Mnemonic               In errno               Reason

36          EBADACCOUNT            ECONNABORTED           Connect failed.
                                                          Bad account
                                                          information.

38          ENORESPOBJ             ETIMEDOUT              Connect failed.
                                                          No response
                                                          from object.

39          ENODUNREACH            ENETUNREACH            Connect failed.
                                                          Node unreachable.

43          ECONNTOOBIG            ECONNABORTED           Connect failed.
                                                          Connect image
                                                          data field too
                                                          long.



































                                 1-7
                    CHANGES BETWEEN V1.0 AND V1.1


Table 1-2 lists extended error codes which can be returned following a
                                                         ________
disconnection.   It  lists  the  error messages found in derrno.h, the
decimal value for each message, and the error reason.



Table 1-2:  Extended Error Messages - Disconnecting a Logical Link

Decimal      derrno.h                
                                     
Error Code   Mnemonic                Reason

 0           EREJBYOBJ               The   remote   node   end   user
                                     disconnected a  running  logical
                                     link.

 8           EABTBYNMGT              The     logical     link     was
                                     disconnected by a third party.

 9           EUSERABORT              The remote end user has  aborted
                                     the link.

38           ENORESPOBJ              The  end  user  or  node  at the
                                     other  end  of  the   link   has
                                     crashed or failed.

39           ENODUNREACH             The connection has been lost due
                                     to a local timeout.

41           ENOLINK                 The connection has been lost due
                                     to a protocol failure,  no  such
                                     link found at remote.

42           ECOMPLETE               No    error.    A    local   end
                                     user-initiated   disconnect  has
                                     completed.


















                                 1-8
                    CHANGES BETWEEN V1.0 AND V1.1


1.14  DECnet-DOS and DECnet-Rainbow Programming Interface


      o  The assembler language interface to the  network  process  in
         Version  1.0 was software interrupt 2A (hex).  In Version 1.1
         the interface to the network process is software interrupt 6E
         (hex).  The 2A interface has been retained for compatibility,
         but may be removed in a future release.

      o  A new technique for doing I/O which does not block  is  being
         provided  in Version 1.1, asynchronous I/O.  Asynchronous I/O
         provides a call back  mechanism  to  notify  the  application
         program  that  a request has been completed.  Please refer to
              __________  ____________  _________  ______
         the  DECnet-DOS  Programmer's  Reference  Manual   for   more
         information.

      o  SCBDEF.H

         The  symbol   definition   SCBS_SETOSTAT   was   changed   to
         SCBS_GETOSTAT.

      o  DN.H

         The following definitions for DECnet software components were
         added:

         /*
          * Define DECnet modules as TLA (three letter acronym) strings.
          */
         #define DNMOD_LAT     "LAT"  /* LAT driver */
         #define DNMOD_PDV     "PDV"  /* Port driver */
         #define DNMOD_SCH     "SCH"  /* Real-time Scheduler */
         #define DNMOD_DLL     "DLL"  /* Data Link Layer */
         #define DNMOD_DNP     "DNP"  /* DECnet Network Process */

         /*
          * Define DECnet software module interrupt vectors.
          */
         #define DNMODULE_LAT   0x6a    /* LAT driver */
         #define DNMODULE_PDV   0x6b    /* Port driver */
         #define DNMODULE_SCH   0x6c    /* Real-time Scheduler */
         #define DNMODULE_DLL   0x6d    /* Data Link Layer */
         #define DNMODULE_DNP   0x6e    /* DECnet Network Process */











                                 1-9
                    CHANGES BETWEEN V1.0 AND V1.1


      o  DERRNO.H

         The following symbol definitions were added (note that  these
         are not supported by DECnet-ULTRIX V1.1):

         EUSERABORT      9   - Disconnect: Abort by user
         ENODERESOURCES  32  - Connect: No node resources for new logical link
         EUSERESOURCES   33  - Connect: No user resources for new logical link
         EBADACCOUNT     36  - Connect: Bad account information
         ENOLINK         41  - Disconnect: Protocol failure, no such link
         ECOMPLETE       42  - Disconnect: No error, disconnect completed
         ECONNTOOBIG     43  - Connect: Connect image data field too long

      o  NERROR.C

         Error text for additional DECnet connect  errors  was  added.
         (see new definitions in DERRNO.H)

         The array of character strings, *dnet_errlist[], has changed.
         The  text,  "Connect  failed,  ", which was repeated in every
         string, has been removed and placed  in  a  single,  separate
         character  string,  'connect_error[]'.   If your code indexed
         directly into this global array of strings, you must  account
         for  the  "Connect  failed,  " string in your display code or
         else  use  the  connect_error[]  string.   If  you  used  the
         function  'nerror()', this change will be transparent to your
         program.

      o  DNET_CONN.C

         A 'signal()' function was added for support  of  non-blocking
         connects.   If a 'signal()' function is not supported by your
         C compiler, comment out all references to 'signal' in this  C
         source file before compilation.

                           __________  ____________  _________  ______
         Appendix C of the DECnet-DOS  Programmer's  Reference  Manual
         should include the following entry:

         EINTR   4    Interrupted system call.















                                 1-10
                    CHANGES BETWEEN V1.0 AND V1.1


         Automatic outgoing proxy support was added.  This was done by
         issuing  a  'bind()'  call  to  the  client  socket under the
         following conditions:

         1.  No  access  control  information  passed  in  the  'node'
             argument to 'dnet_conn()'.

         2.  No default access control information found in the  local
             node's node database for the remote node specified in the
             'node' argument to 'dnet_conn()'.

         3.  A user name has been set up for local node in  the  local
             node's database.


      o  The internal function  'dnet_errconvert()'  was  modified  to
         reflect  changes  made  in  DECnet  connect  errors  (see new
         definitions in DERRNO.H) This function  maps  DECnet  connect
         errors to their equivalent 'errno' system error codes so that
         connect  error  returns  from  'dnet_conn()'  will  have  the
         correct  errno  system  error  code in 'errno' for use by the
         function 'nerror()'.

      o  DNMSDOS.H

         ____________
         localinfo_dn  was  revised  to  support  the  complete   path
         specification  for  the  DECnet database path by adding a new
         member to the data structure:

         1.  The complete database path specification is contained  in
             _______________
             lcl_decnet_path.

             _________________
         2.  lcl_decnet_device  is  still  supported   for   backwards
             compatibility.

         3.  See the file for more details on the structure format.


















                                 1-11
                    CHANGES BETWEEN V1.0 AND V1.1


      o  DNET_PATH.C

         _________
         dnet_path now supports getting the complete  DECnet  database
         path  specification.   Note that the function's interface has
         not changed.

      o  IOCB.H

         A  new  data  structure,  CIOCB,  was  added  which  supports
         ASYNCHRONOUS NETWORK I/O.  This structure is identical to the
         IOCB   structure   except   for   one   additional    member,
         'io_callback'.    See  the  file  for  more  details  on  the
         structure's format.

      o  TIME.H

         Three new external definitions were added:

         int daylight;
         long timezone;
         char *tzname[2];

         It is  ASSUMED  that  these  are  defined  by  the  user's  C
         compiler.   If  not  used,  comment  them  out of header file
         before compilation(s); otherwise, if not defined, then define
         them in applications programs.

      o  SOCKET.H

         New flag definitions for the CIOCB / IOCB  'io_flags'  member
         were added:

         #define MSG_ASYNC         0x8    /* perform function asynchronously */
         #define MSG_CALLBACK      0x10   /* perform callback */
         #define MSG_NEOM          0x20   /* do not perform end of message */
         #define MSG_NBOM          0x40   /* do not set beginning of message */

         New address family definitions were added:

         #define AF_SES                6
         #define AF_MAX                6


      o  BEGIN.H & FINISH.H

         Segment names were changed in this file.

      o  SIZE.H

         SIZE.H is NOT necessary for V1.1 assemblies.




                                 1-12
                    CHANGES BETWEEN V1.0 AND V1.1


      o  DNETDB.H

         The use of the flags byte in  the  structure,  'dnet_nodeent'
         has  been  modified.   It  is  now interpreted as a bit field
         flags byte.  The new flag symbols are:

         /*
          * dnet_nodeent.dne_delflag - flags
          */
         #define DNET_NODE_DEL   0x2      /* deleted entry          */
         #define DNET_NODE_CRY   0x4      /* encrypted entry        */
         #define DNET_NODE_LAT   0x8      /* LAT preferred host     */

         A new data structure has been added,  'dnet_accent'.   It  is
         the  incoming  access control information entry.  It uses the
         new database file DECACC.DAT.

      o  PRGPRE.H

         The list of header files was modified.

      o  ERRNO.H

         New symbol definition for ASYNCHRONOUS NETWORK I/O errors was
         added:  Check CIOCB 'io_status' field for this value.

         #define NOTHING -2     /* request not complete - asynch i/o */

      o  TYPES.H

         More type definitions were added:

         /*
          * Defines types used in defining values returned by system level
          *  calls for file status and time information.
          */
         typedef unsigned short ino_t;    /* i-node number (not used on DOS) */
         typedef long time_t;             /* time value */
         typedef short dev_t;             /* device code */
         typedef long off_t;              /* file offset value */














                                 1-13
                    CHANGES BETWEEN V1.0 AND V1.1


      o  New function dnet_installed():

         This is a C library function found in source file DNETINST.C.
         It   performs   installation  checking  of  various  software
         components.  See file DN.H for component symbol definitions.

      o  New function dnet_getacc():

         This is a C library function found in source file DNETACCE.C.
         It fetches incoming access control information.

      o  New function csreg():

         This is an assembly function found in source file  CSREG.ASM.
         It  returns  the current CS (code segment) register value and
         works with the 2 segment model only.

      o  New function dnetses():

         This  is  an  assembly  function   found   in   source   file
         DNETSES.ASM.   It  currently  returns  an  incorrect  Version
         number of 0.0 if SESSION is installed.

      o  New function fbcopy().

         This is an assembly function found in source file FBCOPY.ASM.
         It  performs  a  FAR  byte  copy.   It  does  not  check  for
         source/destination buffer overlap conditions.

      o  New function decnet():

         This is an assembly function found in source file DECNET.ASM.
         (V1.0   file   name  was  INTIOCTL.ASM)  It  provides  direct
         interface to the DECnet Network Process (DNP)  via  interrupt
         vector  6EH.   V1.0  interrupt interface to DNP was via 2AH -
         this interface is  still  supported  in  V1.1  for  backwards
                         ________                   _______
         compatibility.  decnet() replaces the V1.0 ioctl() function.

      o  New format for DECNODE.DAT

         The format for the file DECNODE.DAT is different  in  Version
         1.1 than it was in Version 1.0.  Passwords are now encrypted,
         so that other users cannot read any of the passwords you have
         defined.










                                 1-14












                              CHAPTER 2

              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS



This   chapter   describes   known   problems,    restrictions,    and
troubleshooting hints.




2.1  Asynchronous Installation Problems


      o  When connecting your Rainbow or IBM personal computer to  the
         adjacent  node using an Asynchronous DDCMP connection through
         a null modem cable, remember to switch the send  and  receive
         leads properly.

      o  The use of a terminal switch or a terminal server running LAT
         for  connection  of  your Rainbow or IBM personal computer to
         the adjacent node is not supported.

      o  When  using  the  DECnet  Router  Server   for   asynchronous
         connections,  the circuit must be full duplex and must be set
         to the same line speed as your machine.

         For example:

         Direct:  SET LINE LC-1L SPEED 9600 DUPLEX FULL MODEM NO
         Modem:  SET LINE LC-1L SPEED 1200 DUPLEX FULL MODEM YES

         The circuit cost and hello timer values can  be  set  to  any
         reasonable values.  The state should be set to ON.

      o  When making a direct  Asynchronous  DDCMP  connection  to  an
         RSX11  system,  note  that  entire  controllers  must support
         either terminals or DDCMP lines, but not both.   Insure  that
         your  sysgen  or  system  configuration  does NOT include the
         chosen controller and that your DECnet gen DOES  include  the
         chosen controller.



                                 2-1
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


      o  When using Asynchronous DDCMP and connecting  directly  to  a
         VAX/VMS  system,  note  that VAX/VMS can share the lines on a
         controller between terminal support  and  asynchronous  DDCMP
         support.

      o  When  configuring  your  VAX/VMS  adjacent  node,   use   the
         following  commands  as  a GUIDE for your VMS system manager.
         These  commands  establish  the  chosen  terminal  lines   as
         dedicated DDCMP lines.

          
         __ ____ ______ _____ ______ _______ ____ ____ __ ____ _____
         $! Load asynch DDCMP device driver. This must be done after
         __  _____ ______ _____
         $!  every system boot.
         _ ___ _________________
         $ run sys$system:sysgen
         _______ ______________
         connect noa0/noadapter
         ____
         exit
         __ ____ ___ _____ _____ ___ __ __ _________ __ _____
         $! Tell VMS which lines are to be dedicated to DDCMP
         __  ____ ____ __ ____ _____ _____ ______ ____
         $!  This must be done after every system boot
         ____ ____ ___________________________________________ _____
         $set term /protocol=ddcmp/speed=9600/notypeahead/perm ttb4:
         ____ ____ ___________________________________________ _____
         $set term /protocol=ddcmp/speed=9600/notypeahead/perm ttb5:
         __ ___ ___ __ ________ _________ ___ _____ ___ ________
         $! Use NCP to properly configure the lines and circuits
         __  ________ ____ ______ _______ ___ _________ ________
         $!  Remember that DEFINE changes the permanent database
         __  ___ ___ _____ ____________
         $!  and SET works immediately.
         _ ___
         $ ncp
         ______ ____ ______ _____ __ _______ _______ _
         define line tt-1-4 state on receive buffers 4
         ______ ____ ______ _____ __ _______ _______ _
         define line tt-1-5 state on receive buffers 4
         ______ _______ ______ _____ __
         define circuit tt-1-4 state on
         ______ _______ ______ _____ __
         define circuit tt-1-5 state on
         ____
         exit


      o  When  configuring  your  VAX/VMS  adjacent  node,   use   the
         following  commands  as  a GUIDE for your VMS system manager.
         These commands establish all  terminal  lines  as  switchable
         DDCMP lines (V4.2 and later only).

         ON THE VAX

         1.  The asynchronous DDCMP driver, NODRIVER, must  be  loaded
             on the VAX system.

             _______ _______ ______________
             SYSGEN> CONNECT NOA0/NOADAPTER

         2.  DYNSWITCH, the image that controls the switching  of  the
             line, must be installed as a shareable image on the VAX.

         
             ________ ______ _______________________________________________
             INSTALL> CREATE SYS$LIBRARY:DYNSWITCH/SHARE/PROTECT/HEADER/OPEN






                                 2-2
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


         3.  A virtual terminal must  be  created  in  order  for  the
             physical   terminal   connection  to  be  broken  without
             actually losing the logical connection  between  the  two
             systems.

             _______ _______ ______________________________
             SYSGEN> CONNECT VTA0/NOADAPTER/DRIVER=TTDRIVER

         4.  The terminal line must be set for 8 bit  characters  with
             no parity and have the attribute DISCONNECT on the VAX.

                                       NOTE

                 The  DISCONNECT  attribute  enables  the  virtual
                 terminal  to  be  used.  The DISCONNECT attribute
                 must be permanent; it must either  be  set  /PERM
                 after   every   boot,  or  the  default  terminal
                 characteristics must be set properly.  If you set
                 the   terminal   characteristics   for  your  own
                 terminal, you must log out and log back in  again
                 for them to take effect.  Also note that if modem
                 control is enabled, hangup must also be  enabled.
                 You  know  that  this  step  has  been  performed
                 properly  if  your  terminal  device   designator
                 begins with VT.


         5.  In the node database, the following  parameters  must  be
             set  for the node that will be switching the asynchronous
             connection:

              -  The INBOUND parameter must be set to either ROUTER or
                 ENDNODE.

              -  The RECEIVE PASSWORD must be set to match the  remote
                 node's EXECUTOR TRANSMIT PASSWORD.

                                         NOTE

                     The password will be converted  to  uppercase
                     unless it is defined as a quoted string.


      
     _______ ____        _______ _              _ _______ ________         
     NCP>SET NODE node-idINBOUND [router/endnode] RECEIVE PASSWORD password










                                 2-3
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


         ON THE PERSONAL COMPUTER

         1.  On a personal computer, the DECnet line must be set  OFF,
             either by default or by command with NCP.

         2.  The terminal line/terminal emulator must be set for 8 bit
             characters with no parity.

         3.  The EXECUTOR TRANSMIT PASSWORD must be set to  match  the
             RECEIVE PASSWORD specified for the node definition on the
             remote system.  The password must be entered in uppercase
             since  the  password  defined  on the VAX is converted to
             uppercase unless it is entered as a quoted string.

                                       NOTE

                 The EXECUTOR RECEIVE PASSWORD must  not  be  set;
                 when  DYNSWITCH is used, DECnet-VAX will not send
                 a password during routing initialization.  If the
                 receive  password  is set, the line will not come
                 up.


         4.  Both the terminal line and the DDCMP line must be set  to
             the  speed  of  the  line to be used; they will not share
             line characteristics.

         5.  Connect to the VAX as a  normal  terminal  user  using  a
             terminal emulator.

         6.  When the line is to be switched from a terminal line to a
             DDCMP line, the following DCL command is entered:

             ____ ________ ____________________________________
             $SET TERMINAL /PROTOCOL=DDCMP/SWITCH=DECNET/MANUAL


                                       NOTE

                 /MANUAL is only used when DECnet must  be  turned
                 on  manually.   When  the  switch is initiated, a
                 message appears on the terminal  indicating  that
                 the  switch  is  taking  place on the VAX and the
                 user must exit terminal emulation mode  and  turn
                 on the DECnet line.  If the line is not turned on
                 within  approximately   4   minutes,   a   static
                 asynchronous  line  will  return to terminal mode
                 and a dial-up asynchronous line with hangup  will
                 be disconnected.






                                 2-4
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


         Terminating a Switched DDCMP Connection

         A DDCMP connection created using DYNSWITCH can be  terminated
         from  either  end  of  the  connection by setting the line or
         circuit (VAX/uVAX only) OFF.  The following are  the  various
         scenarios that will occur when the line is disconnected:

         1.  The personal computer user sets the line OFF or the  line
             drops due to noise, etc.

             If the switched line is  a  hardwired  line  between  the
             personal  computer  and  the VAX, or a modem is used with
             /NOHANGUP specified, the circuit on the VAX side will  go
             into  an  ON/STARTING  state for approximately 4 minutes.
             This enables the personal computer user to set  the  line
             back  ON  and  have  it  operational without having to go
             through the entire DYNSWITCH procedure again.

         2.  The system manager on the VAX or uVAX can set either  the
             circuit or the line OFF.

             If either the circuit or the  line  is  set  OFF  on  the
             VAX/uVAX,  both  the  circuit  and  line  information are
             removed from the volatile database and  the  asynchronous
             line is returned to terminal mode.

         Miscellaneous Information

         1.  If a modem is used for a DYNSWITCH connection, the  modem
             signal will not be dropped during the switch.

         2.  If /NOHANGUP is specified on the terminal line, the modem
             signal  will not drop after the DDCMP circuit is set OFF.
             The line will return to terminal mode.

         3.  If DECnet is being turned on manually, a  <CTRL/C>  or  a
             <CTRL/Y>  after the switch message aborts the switch, and
             the line is returned to terminal mode.

         4.  For a dynamic  connection,  the  line  and  circuit  will
             automatically  be  added  to the volatile database on the
             VAX when the line is switched from terminal mode to DDCMP
             mode.   It  does  not  have  to  be manually added to the
             database.

         5.  An asynchronous terminal connection to a  VAX  through  a
             switch  or  a LAT terminal server cannot be switched to a
             DDCMP line using DYNSWITCH.






                                 2-5
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.2  Asynchronous Performance and Tuning


      o  If you have a poor Asynchronous DDCMP connection (such  as  a
         noisy  phone  line between modems), the following suggestions
         may help:

                                                      _
         Set the line speed lower (NCP SET LINE SPEED n).

         Set the personal computer's executor retransmit factor higher
                                                _
         (NCP  SET  EXECUTOR  RETRANSMIT FACTOR n).  The default is 6;
         try 10.  This is the  number  of  times  that  a  message  is
         retransmitted  before  the  logical  link is declared broken.
         Setting this parameter higher allows the network  more  times
         to retry messages with errors.

         Set the personal computer's segment  size  smaller  (NCP  SET
                                          _
         EXECUTOR  SEGMENT  BUFFER  SIZE  n).   A smaller segment size
         improves the chances that  messages  will  be  sent  with  no
         errors.   A  smaller segment size also means that the loss of
         one character causes fewer characters  to  be  retransmitted.
         The  VMS  minimum is 192.  Try 200 first.  The minimum of the
         peers is used.  NFT may produce "buffer too small" errors  at
         low values.

         Set the Host's EXECUTOR HELLO TIMER longer.  This affects how
         long  DECnet  will  wait for any traffic before declaring the
         line to be down.

         On VMS, SET CIRCUIT MAX  TRANSMITS  controls  the  retransmit
         count before recycling the line.  Default is 4, set it to 32.























                                 2-6
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.3  Asynchronous Configuration Problems


      o  When the network process has the line state  ON,  it  assumes
         that  it  has  complete control of the communications port of
         the system.  It will continue to run DECnet protocols in  the
         background.   If  you wish to use the communications port for
         other purposes (such as a terminal emulator), you must  first
         turn  the  line  state OFF with NCP.  This will disengage the
         network process and return the  communications  port  to  its
         previous state.

      o  The network process uses the communications parameters stored
         in  the DECnet database, NOT the parameters that the port may
         be programmed with by MS-DOS SETUP commands  on  the  Rainbow
         (or  PC-DOS  MODE  commands on IBM PCs).  Problems will occur
         if, for example, you do not properly adjust  the  line  speed
         with NCP to match the remote system.




































                                 2-7
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.4  Ethernet Performance and Tuning

The Ethernet controllers  supported  by  DECnet-DOS  V1.1  use  single
buffers  for  message reception.  Since the personal computer's CPU is
fairly slow compared to the speed of the Ethernet, it is possible  for
a message to be lost by a personal computer because it is busy getting
the last message off of the controller.   When  this  happens,  DECnet
will  detect  that  a  message  has  been lost (after a short time has
passed) and automatically retransmit the lost message.  This  loss  of
messages and subsequent recovery can be observed in counters displayed
by NCP and NTU, in failures in Ethernet loop circuit commands in  NTU,
and  in  short pauses during normal operations.  These symptoms do NOT
indicate correctable problems.  The loss of  messages  and  subsequent
recovery is expected.

A number of network management parameters can be changed in an  effort
to improve performance:

      o  In very large networks that include many routing nodes and/or
         many LAT services, each personal computer may have to receive
         a number of messages which are regularly broadcast by routing
         nodes  and  LAT  services.   These messages are necessary for
         normal operations.  However, received data performance may be
         improved   by  preventing  the  reception  of  these  regular
         messages.   Following  are  the  commands  which   turn   off
         reception  of  these messages and the effect of each command.
         Only after all commands have been typed  will  the  potential
         performance improvement be realized.

                  _
         1.  LAT /n

                  _
             The /n switch to LAT prevents LAT  from  being  told  the
             name  of each LAT service.  If you do not wish to use LAT
             services, just do not run LAT.  If you DO wish to use LAT
                                _
             services, use the /n switch when starting LAT and use the
             LAT-HOST keyword with the NCP SET NODE command to  inform
             LAT  which services should be available.  (This restricts
             your use of LAT services to those with service names of 6
                                                       _
             characters  or  less.) The default is no /n switch, which
             enables the reception of multicast messages.

         2.  NCP SET CIRCUIT SERVICE DISABLED      [ENABLED]

             This command prevents your personal computer  from  being
             able  to  respond to loopback requests or MOP requests at
             the circuit level.  The default is ENABLED, which  allows
             your  personal  computer to receive multicast messages in
             order to provide service functions.






                                 2-8
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


         3.  NCP SET CIRCUIT MULTICAST DISABLED    [ENABLED]

             This command causes your personal computer to listen  for
             announcements  concerning  which  node on the Ethernet is
             the router only when the line is started and  only  every
             ten  minutes  for  1  minute  after that.  The default is
             ENABLED, which allows your personal computer  to  receive
             multicast messages concerning routing.


      o  If logical links break, try setting the retry counter in your
         personal computer higher by typing:

         _______ ________ __________ ______ __
         NCP>SET EXECUTOR RETRANSMIT FACTOR 10


      o  If performance seems bursty, try setting  the  delays  before
         retransmission  lower by typing these commands on your remote
         (non-MS-DOS) systems:

         _______ ________ _____ ______ __
         NCP>SET EXECUTOR DELAY FACTOR 32
         _______ ________ _____ ______ _
         NCP>SET EXECUTOR DELAY WEIGHT 3

      o  If performance  seems  bursty,  you  may  also  want  to  try
         lowering  the  number of messages that a remote node can send
         to your personal computer at a time.  Type on  your  personal
         computer:

         _______ ________ _______ ____ _____ _
         NCP>SET EXECUTOR RECEIVE PIPE QUOTA 1


      o  If performance seems bursty, you may also want to try raising
         the  number  of  messages that a remote node can send to your
         personal computer at a time.  Type on your personal computer:

         _______ ________ _______ ____ _____ _
         NCP>SET EXECUTOR RECEIVE PIPE QUOTA 8


















                                 2-9
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.5  Ethernet Configuration Problems


      o  During power OFF and perhaps power ON,  Ethernet  controllers
         may introduce noise on the Ethernet.

      o  It may not be possible to format floppies on the IBM PC,  the
         IBM PC/XT, or the IBM PC AT while the Ethernet line is in the
         ON state.   The  DMA  of  bytes  to  and  from  the  Ethernet
         controller   may  interfere  with  the  floppy  timing  while
         formatting.  If this seems to be happening to  you,  use  the
         NCP command SET LINE STATE OFF before formatting and then SET
         LINE STATE ON after formatting.




2.6  General Problems


      o  Following  installation,  DECPARM.DAT  contains   information
         specific  to  the  line you are using (either Asynchronous or
         Ethernet).  Each time the DECnet  Network  Process  (DNP)  is
         started,  it  verifies  that  DECPARM.DAT contains the proper
         line information.  If you wish to switch between use  of  the
         Ethernet  line  and  use of the asynchronous line, you should
         keep two copies of DECPARM.DAT:   one  for  Ethernet  (called
         DECPARM.ETH,  for  example), and one for asynchronous (called
         DECPARM.ASY, for example).  Insure that AUTOEXEC.BAT does NOT
         run  the  DECnet Network Process (DNP).  After each boot, you
         can rename the appropriate DECPARM file  to  DECPARM.DAT  and
         then  run  the matching DNP.  If you attempt to use the wrong
         network process  for  the  current  permanent  database  file
         (DECPARM.DAT),  the  error message "wrong protocol type found
         in DECPARM.DAT" will be displayed.

      o  The network takes control of clock interrupts as soon as  the
         scheduler  component runs (SCHPC or SCHRB).  The network also
         takes control of com option interrupts when the line state is
         ON.  Other products which also take control of interrupts may
         not  be  compatible  with  DECnet.   In  order  to  run  such
         incompatible  software,  you must either turn the DECnet line
         OFF with NCP, or prevent the scheduler component  from  being
         run.   Note  also  that  use  of the DECnet virtual disks and
         printer may not be possible during execution of  incompatible
         software products.








                                 2-10
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


         If you are using an asynchronous DDCMP connection, note  that
         Symphony  from  Lotus,  as  shipped,  will  cause the network
         circuit to drop and therefore  will  not  allow  use  of  the
         virtual disk and printer.  However, using the INSTALL program
         that comes with Symphony you can make the  changes  necessary
         to  force  Symphony to ignore the communications port when it
         runs.  Run INSTALL to create a new driver set, or  to  change
         an  existing  driver  set.   Delete  the  drivers  for modem,
         protocol, (and for the Rainbow, 7201  asynchronous  support).
         Note  that if you modify an existing driver set, you must use
         the  method  documented  on  (or  about)  page  41   of   the
         Introduction Manual which describes how to use the minus sign
         to remove an option.

      o  The network process determines the system  type  that  it  is
         running  on  by  looking at ROM BIOS locations and/or calling
         the Rainbow software  interrupt  18  hex.   Due  to  hardware
         dependencies,  the  Rainbow  and  IBM  PC  processes  are not
         interchangeable.  An error message will  be  issued  and  the
         process will refuse to run on the wrong system.

      o  The transparent file access capabilities intercept the MS-DOS
         system  call  interface through interrupt 21 hex.  If you run
         other  programs  that  intercept  interrupt  21,   they   may
         interfere with the functioning of the transparent file access
         operations.

      o  Be sure to understand that sockets are not bound to programs.
         Once  a  socket  is  created,  it will stay alive until it is
         closed, even if the program that created it exits.  A symptom
         of too many open sockets is running out of buffer space.  Use
         NCP and  the  command  SHOW  ACTIVE  LINKS  to  display  open
         sockets, and SET ACTIVE LINK STATE OFF to close open sockets.

      o  All utilities accept the node specification as either a  node
         name or node address.  When node name alone is specified, all
         utilities  will  check  to  see  if  default  access  control
         information has been stored by NCP for that node and use that
         access control information to make the  connection.   If  the
         node  address  is  used,  checking for default access control
         information is BYPASSED.













                                 2-11
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


      o  All features of  DECnet-DOS  cannot  be  supported  on  small
         memory  systems.   If  you  find that the DECnet Installation
         Procedure (DIP) warns you about having too little memory,  if
         you  find  that  MS-DOS gives you an error message indicating
         too little  memory  after  running  a  utility,  or  if  your
         personal  computer  hangs  after  running  a utility, try the
         following:

          -  Study the appendix in the Installation Guide which  lists
             each  utility, to determine whether it is memory resident
             and its approximate size.
          -  Do not install any unnecessary third party software  that
             is memory resident.
          -  Do not install TTT.  It is memory resident.
          -  Do not install TFA.  It is memory resident.
          -  Do not install LAT.  It is memory resident.
          -  Set the FILES parameter in CONFIG.SYS as low as possible.
             64 bytes are used for each open file.
          -  Set  the  BUFFERS  parameter  in  CONFIG.SYS  as  low  as
             possible.  528 bytes are used for each buffer.
          -  Use NCP to lower the number of logical links supported.

                                      _
             NCP DEFINE EXEC MAX LINK n

          -  Use NCP  to  lower  the  maximum  number  of  buffers  to
             allocate.

                                        _
             NCP DEFINE EXEC MAX BUFFER n


         On a 256K personal computer there is enough room to run  NCP,
         NFT,  NTU,  CTERM based SETHOST, NDU with one virtual device,
         FAL, DTS, DTR, and MAIL if:

          -  FILES=8 in CONFIG.SYS.
          -  BUFFERS=2 in CONFIG.SYS.
          -  EXEC MAX LINKS 2 in NCP.
          -  EXEC MAX BUFFERS 12-14 in NCP.



Note that if DIP detects insufficient memory,  it  will  automatically
adjust  memory  usage  parameters  in an attempt to fit all components
into memory.










                                 2-12
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.6.1  Problems with Rainbow Only



      o  The Rainbow can suffer from crashes,  hangs,  memory  errors,
         and  other  problems if it contains bad memory chips.  It may
         be the case that your Rainbow can have bad  memory  which  is
         seldom  used  until DECnet is installed.  (The resident parts
         of DECnet cause more memory to be used.) As a result, it  may
         appear that the DECnet installation is causing these problems
         when it is in fact the memory.  If you are experiencing these
         problems,  have  your  local field service organization check
         your Rainbow for bad memory.

      o  In  order  to  avoid  problems   with   the   firmware,   all
         non-interrupt driven network processing is suspended while in
         SETUP mode.  Staying in SETUP mode for long periods  of  time
         will most likely cause your network sessions to be lost.

      o  The network process uses the Rainbow  MS-DOS  V2.11  Extended
         Communications  BIOS  User Defined Interrupt Service table to
         redirect communications  interrupts  to  it.   Use  of  other
         programs  that  use  the BIOS function to change or reset the
                                               _______  ______   _____
         service  routine  address  (see  the  Rainbow  MS-DOS   V2.05
         ____________  _____
         Programmer's  Guide  for  more  information) will effectively
         terminate DECnet communications if  the  process  is  active.
         For  example:   running  a poly-COM program will modify these
         addresses.  To recover, you must use  NCP  to  set  the  line
         state OFF and then back ON again.




2.6.2  Problems with IBM PCs Only



      o  The SETHOST utility uses interrupt 10H of the IBM BIOS  while
         running  to  control  screen  output, and takes over keyboard
         interrupt 09H to handle keyboard input.  Any  other  programs
         that you may use to enhance the keyboard or display operation
         may interfere with the operation of this utility.












                                 2-13
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.7  NFT - Network File Transfer


      o  The algorithm for determining whether  a  file  is  ASCII  or
         image  when  copying from personal computer to remote without
         switches is as follows:  If the first  512  bytes  contain  a
         CR/LF,  the file must be ASCII.  Otherwise, it must be image.
         Note that some image files may appear to be ASCII using  this
         rule.

      o  The SET command for paths on remote ULTRIX systems  does  not
         work.

      o  The use of MACY11 and LSA switches for  remote  DECsystem-10s
         and DECsystem-20s does not work.

      o  If a directory command specifies multiple subdirectories  and
         some  of  them  are  protected,  the  error  message fails to
         display the volume and directory names.

      o  The command DIR REMOTE::  defaults the file specification  to
         *.*.  This produces the correct results on all remote systems
         except ULTRIX.  On an ULTRIX system this only lists the files
         that  have  a  period  in  their  names.  To work around this
         problem, use the command DIR REMOTE::*.

      o  The SHOW command displays any part of a password string which
         follows  an  embedded  space.   This is not a serious problem
         since most passwords do not have spaces in them.

      o  If a wildcarded copy  from  a  remote  VAX  to  the  personal
         computer  specifies a wild file specification which matches a
         directory specification on the VAX, the directory  files  are
         copied  to the personal computer.  These files do not contain
         any useful information and can be deleted.

      o  If a wildcarded copy  from  a  remote  VAX  to  the  personal
         computer  requests  access  to  a  protected  directory,  NFT
         displays a message saying that there was  a  problem  with  a
         temporary file.  This is the wrong message.

      o  If a COPY command which copies files  from  a  remote  ULTRIX
         system  to  a  personal  computer  defaults  the  output file
         specification and  the  ULTRIX  file  specification  contains
         directories,  then  the resulting personal computer file will
         be named incorrectly.

      o  If the value of MRS is set too large (> 1024) then NFT  fails
         in unpredictable ways.





                                 2-14
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.8  Error Messages and Warnings

The following error messages and warnings are not listed in Appendix B
                            __________ ______ _____
(NFT Error Messages) of the DECnet-DOS User's Guide.




2.8.1  Error Messages


      -  Address already in use.
      -  Address family not supported by protocol family.
      -  Argument list too long.
      -  Argument too long.
      -  Attribute read error.
      -  Attribute write error.
      -  Bad address.
      -  Bad block on device.
      -  Bad file number.
      -  Bad terminator or bad value for switch:
      -  Bad version number.
      -  Broken pipe.
      -  Cannot close file.
      -  Cannot get JFN for file.
      -  Cannot open local file with DOS reserved names:
      -  Cannot PRINT list of files.
      -  Cannot PRINT local file.
      -  Connection refused.
      -  Connection reset by peer.
      -  Connection timed out.
      -  Destination address required.
      -  Device not available.
      -  Device not found.
      -  Device not ready.
      -  Device or file full.
      -  Disk full or other error in closing file.
      -  Disk full or other error in writing file.
      -  Disk usage exceeds quota.
      -  Error in data type.
      -  Error in file type extension.
      -  Failure to get transmit buffer.
      -  F11-ACP could not access file.
      -  F11-ACP could not create file.
      -  F11-ACP could not mark file for deletion.
      -  File activity precludes operation.
      -  File already open.
      -  File Exists.
      -  File extend failure.
      -  File is currently in an undefined state.
      -  Filename syntax error.



                                 2-15
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


      -  File name too long.
      -  File not found.
      -  FSZ field invalid.
      -  Illegal record encountered.
      -  Insufficient network resources.
      -  Invalid DAP message type received.
      -  Invalid DAP message format received.
      -  Invalid file options.
      -  Invalid object name format.
      -  Invalid wildcard context value.
      -  Logical name error.
      -  LPT page limit exceeded.
      -  Message too long.
      -  Mount device busy.
      -  Network capacity exceeded.
      -  Network dropped connection on reset.
      -  Network operation failed at remote node.
      -  Network operation not supported.
      -  Network operation timed out.
      -  NFAR error, FFIRST with dir in progress.
      -  NFAR error, file not open.
      -  NFAR error, FNEXT with no dir in progress.
      -  NFAR error, illegal access.
      -  NFAR error, invalid function.
      -  NFAR error, invalid RATs.
      -  NFAR error, missing ::.
      -  NFAR error, missing quote.
      -  NFAR error, no \\\\ or \\*\\.
      -  NFAR error, no more room.
      -  NFAR error, record buffer too small.
      -  NFAR error, socket not found.
      -  No buffer space available.
      -  Node name cannot be longer than 6 characters.
      -  Node is unreachable.
      -  No more sockets available.
      -  No such device.
      -  Not supported by remote.
      -  Operation illegal or invalid for file organization.
      -  Operation in progress.
      -  Operation not supported on socket.
      -  Operation would block.
      -  Parity error on device.
      -  Path and  file  names  not  valid  for  SET,  SHOW,  or  EXIT
         commands.
      -  Permission denied.
      -  Protocol not available.
      -  Protocol not supported.
      -  Remote object is too busy.
      -  Result too large.
      -  Socket is already connected.
      -  Socket is not connected.



                                 2-16
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


      -  Socket operation on nonsocket.
      -  Socket type not supported.
      -  Spool or submit command file error.
      -  Switches not valid for SET, SHOW, or EXIT commands.
      -  Task not available.
      -  Too many open files.
      -  Unexpected DAP message received.
      -  Unmatched quotes:
      -  Unrecognized  local  file  specification,  remote  to  remote
         operations not supported.
      -  Unrecognized object.
      -  Unrecognized remote file specification:
      -  Unrecognized  remote  file  specification,  local  to   local
         operations not supported.
      -  Unsupported DAP flag field received.
      -  VFC value must be less than 256.





2.8.2  Warnings


      -  Extra local file names will be ignored.
      -  Extra remote file names will be ignored.
      -  Warning:  Destination file name list longer than source list.



























                                 2-17
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.9  SETHOST


2.9.1  CTERM ONLY



      o  Use of the @ command for batch input is not  fully  supported
         by ULTRIX and RSX hosts.

      o  The VMS command SET TERM/INQ  does  not  work  properly  when
         embedded in LOGIN.COM and the @ command is used.

      o  VMS  TDMS  applications  are  not   supported   under   CTERM
         connections.   VMS  TDMS applications are supported under LAT
         connections.

      o  A protocol-based virtual terminal service can be slower  than
         a  direct  dumb  terminal connection.  Some sequences will be
         faster using CTERM because all  character  operations  for  a
         complete  line will be done locally in the Rainbow or IBM PC.
         Some operations will be slower (such  as  editing  with  EDT)
         because  each  character  typed  causes  a  number  of  CTERM
         protocol messages to be exchanged.

      o  Writing saved session files does not check for disk error.

      o  While command line editing to VMS, if text is inserted  which
         fills  a  line,  the image on the screen does not wrap to the
         next line properly.  The characters sent to the  remote  node
         are correct.

      o  If backspace characters  are  output  which  would  back  the
         cursor  up  before  the  beginning  of  the  line, text which
         follows the backspace characters appears on  the  next  line.
         Text should appear on the same line.


















                                 2-18
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


      o  For asynchronous  configurations,  characters  are  sometimes
         lost when typing ahead.

      o  The following information applies to IBM PCs only:

          -  VT100 emulation on IBM  PCs  does  not  fully  emulate  a
             VT100.   Double  height  and  double width text cannot be
             displayed, 132 character width mode cannot  be  selected,
             not all character attributes are available, and the local
             printer is not supported.

          -  The first ALL-IN-1 screen leaves the cursor in the  wrong
             place.   Typing  carriage  return  properly positions the
             cursor.

          -  Not  all  character  attribute  escape   sequences   work
             properly.   Both  black  and  white  and  color have some
             problems.

          -  After exiting from SETHOST on  an  IBM  PC,  some  screen
             attributes  are  not  reset to their state before running
             SETHOST, such as color and cursor format.





2.9.2  LAT ONLY


      o  Use of the @ command for batch input is not  fully  supported
         by ULTRIX and RSX hosts.

      o  Use of the @ command for batch  input  is  supported  by  VMS
         hosts.   However,  it  will  not  work  properly  if  the SET
         TERM/INQ command is embedded in LOGIN.COM and the  @  command
         is used.

      o  VMS TDMS applications are supported  under  LAT  connections.
         VMS   TDMS   applications   are  not  supported  under  CTERM
         connections.













                                 2-19
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


      o  The following information applies to IBM PCs only:

          -  VT100 emulation on IBM  PCs  does  not  fully  emulate  a
             VT100.   Double  height  and  double width text cannot be
             displayed, 132 character width mode cannot  be  selected,
             not all character attributes are available, and the local
             printer is not supported.

          -  Not  all  character  attribute  escape   sequences   work
             properly.   Both  black  and  white  and  color have some
             problems.

          -  After exiting from SETHOST on  an  IBM  PC,  some  screen
             attributes  are  not  reset to their state before running
             SETHOST, such as color and cursor format.


      o  If backspace characters  are  output  which  would  back  the
         cursor  up  before  the  beginning  of  the  line, text which
         follows the backspace characters appears on  the  next  line.
         Text should appear on the same line.

      o  Connections to RSX-11M-PLUS V3.0 can crash the system.   This
         problem is being solved by patches or future releases of RSX.

      o  Connections to RSX-11M-PLUS V3.0 can break.  This problem  is
         being solved by patches or future releases of RSX.

      o  Connections to the Ethernet  Terminal  Server  V2.1  (reverse
         LAT)  or  earlier  may  break.   This  problem is solved by a
         future release of the terminal server software.

      o  Connections to ULTRIX V1.2 (or earlier)  systems  can  break.
         This  problem is solved by patches or a future release of the
         ULTRIX software.

      o  If the NEW SESSION option  is  chosen  after  typing  ^\<RET>
         during  a  LAT  session,  SETHOST  allows you to create a new
         session.  However,  the  existing  LAT  session  is  aborted.
         (When  a  LAT  session  to  a  VMS  host is aborted, your job
         remains intact.  The next time you log onto the VMS host, you
         can reconnect to the same job.)

      o  When  using  <CTRL/S>  and  <CTRL/Q>  to  pause  output,  the
         response may be slow.  Pressing the <HOLD SCREEN> key (on the
         Rainbow) or the <ALT/F1> key (on an IBM PC)  is  faster,  but
         the response is still not immediate.







                                 2-20
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


      o  To send <CTRL/\> to the host system, be sure  to  repeat  the
         sequence  twice.  If you only do this once, SETHOST waits for
         you to press the <RETURN> key.

      o  If you use /CTERM/SAVE, you can only get back to using LAT by
         deleting the file SETHOST.DEF.




2.10  NDU - Network Device Utility


      o  When the NDU CLOSE command is issued  for  a  remote  virtual
         disk  file  which resides on a personal computer running FAL,
         FAL will report the "broken pipe"  error  message.   This  is
         only a warning; no error has occurred.

      o  If a virtual  disk  file  is  created  with  one  NDISK  file
         specification  and  then  an  attempt  is  made to delete the
         virtual disk file using the command:

                     ____       ____
         DELETE NODE node NDISK file

         with a different file specification which references the same
         file  (using logical names, for example), the delete function
         will fail.  Always delete the virtual  disk  using  the  same
         file  specification that it was created with if the delete is
         done for a connected disk.




2.10.1  NPDRV - Virtual Printer Driver


      o  If the remote FAL makes an error, the Rainbow or IBM  PC  may
         hang.  This will very seldom occur.

      o  On IBM PCs use of the virtual printer by the background print
         spooler may hang the system.













                                 2-21
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.10.2  NDDRV - Virtual Disk Driver



      o  If the remote FAL makes an error, the Rainbow or IBM  PC  may
         hang.  This will very seldom occur.




2.11  NCP - Network Control Program



      o  Setting the state of the  line  to  OFF  in  an  asynchronous
         configuration  will shutdown network processing, but will NOT
         hang up the phone, even if the circuit's modem  parameter  is
         set  to  full.   If  you must hang up the phone under program
         control, use the NCP command:

         _______ ____ _____ ______
         NCP>SET LINE STATE HANGUP


      o  The executor transmit and receive passwords  and  the  remote
         node  access  control  strings  may  be  quoted  or unquoted.
         Unquoted strings are forced to uppercase.

      o  Please be aware that some combinations of settings for buffer
         sizes,  buffer  counts,  and  timers  may  cause  performance
         problems  or  network  failures.    Please   change   network
         parameters  only to solve specific problems.  If new problems
         occur as a result, change back to the default settings.






















                                 2-22
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


      o  If you plan to use the SET KNOWN NODES FROM  REMOTE  command,
         be aware that in a large network, the resulting node database
         can be so large that the search time during  connections  can
         be very long.  In a large network, consider only defining the
         nodes you access frequently.

      o  When entering quoted strings as  part  of  the  command  line
         arguments, the quotes are removed.  For example:

         _______ ______ ____ _______
         NCP>SET ACCESS USER "bence"

         With the quotes removed, this results in:

         _______ ______ ____ _____
         NCP>SET ACCESS USER bence

         The username bence is then forced to uppercase.






































                                 2-23
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.12  NTU - Network Test Utility



      o  The  LOOP  EXECUTOR  command  requires  3  free  sockets  for
         successful   execution.   If  only  one  (or  no)  socket  is
         available, a proper error message is  returned.   If  exactly
         two  sockets  are  available, NTU reports:  "time-out waiting
         for connect".  This  does  not  indicate  a  failure  of  the
         network.

      o  The LOOP CIRCUIT commands  for  Ethernet  configurations  may
         fail  to  loop  some  messages.   This does not indicate that
         there is a problem which needs  to  be  corrected.   Personal
         computers  may  lose messages at times.  DECnet automatically
         retransmits  lost  messages,   but   the   circuit   loopback
         architecture does not.

      o  Access control strings may be quoted or  unquoted.   Unquoted
         strings are forced to uppercase.

      o  LOOP CIRCUIT to the DECnet Router Server V1.0/V1.1 will fail.
         This  does  not  indicate an error.  There is no loop circuit
         server software in the asynchronous router server product.






























                                 2-24
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.13  TFA - Transparent File Access


      o  One can use TFA to type and copy files as follows:

         TYPE \\f\node\\filespec
         COPY local-file \\f\node\\remotefile
         TYPE \\f\node\\remotefile >localfile

      o  TFA supports only one open file at a time.




2.14  TTT - Transparent Task-to-Task


      o  TTT supports up to 4 logical links at one time.




2.15  DTR/DTS


      o  DTR and DTS are tools used to test the  network  and  measure
         its  performance.   The  documentation  set  does not include
         documentation for DTR or DTS.  However, the fourth floppy  in
         the   distribution   kit  contains  the  file  DTS.TXT  which
         describes the use of these tools.

      o  Interrupt tests to TOPS-20 systems do not work properly.

      o  DTS on a personal computer  reports  sequence  errors  during
         echo tests, both to VAXes and to other personal computers.




2.16  MAIL


      o  MAIL.EXE can only SEND  mail  to  remote  nodes.   It  cannot
         receive mail.

      o  If one attempts to send a  non-ASCII  text  file  as  a  mail
         message,  MAIL  will  not produce a useful error message, but
         instead will behave erratically.






                                 2-25
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.17  FAL (File Access Listener)

      o  FAL does incoming access checking only if the file DECACC.DAT
         exists  in  the DECnet database path.  Such a file is created
         the first time the NCP SET ACCESS command is issued.   If  no
         such  file  exists,  or if you have not issued the SET ACCESS
         command, the system's files are  available  to  any  and  all
         incoming access requests while FAL is running.

         The DECACC.DAT file is deleted if the NCP command CLEAR KNOWN
         ACCESS  is issued.  Note that if one clears all entries using
                                           ____
         the NCP command CLEAR ACCESS USER user, the file  will  still
         exist, but have no entries.  In this case, FAL will do access
         checking, but allow access to no users.

      o  Since MS-DOS is a single tasking operating system,  FAL  must
         run to the exclusion of all other application programs.

      o  Some hosts may use as many as 4 logical links  to  perform  a
         single  file  access function.  If you plan to run FAL, it is
         suggested that you  increase  the  number  of  logical  links
         supported.  Type:

         __________ ________ _______ _____ _
         NCP>DEFINE EXECUTOR MAXIMUM LINKS 8


      o  Because MS-DOS  path  specifications  contain  the  backslash
         character  and  directory  names and file names have the same
         syntax, VMS cannot  use  path  specifications  without  being
         surrounded  with  double  quotes.   In  addition, a number of
         restrictions apply when using quoted file  specifications  in
         VMS.  To solve all these problems, FAL accepts VMS syntax for
         file specifications:

         $ DIR MSDOS::\TEST\*.C         will fail
         $ DIR MSDOS::"\TEST\*.C"       will work
         $ DIR MSDOS::[TEST]*.C         will work

         VMS does not understand that \foo is  sometimes  a  file  and
         sometimes  a  directory.   To  avoid  the  problems that this
         causes, always specify file names or use VMS syntax:

         $ DIR MSDOS::"\"                    will fail
         $ DIR MSDOS::"\*.*"                 will work

         $ COPY *.FOO MSDOS::"\DIR"          will fail
         $ COPY *.FOO MSDOS::"\DIR\*.*"      will work
         $ COPY *.FOO MSDOS::[DIR]*.*        will work





                                 2-26
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


         VMS  does  not  properly  separate  the  parts  of   a   file
         specification   when  it  does  wildcarding.   As  a  result,
         wildcard copies of files from  a  personal  computer  to  VMS
         using  VMS DCL cannot be done using MS-DOS file syntax.  Such
         copies must be done using VMS file syntax:

         $ COPY MSDOS::"\WORK\*.*" *.*  will fail
         $ COPY MSDOS::[WORK]*.* *.*    will work


      o  FAL does NOT do file locking.  If you will be using  FAL  for
         simultaneous  access  to the same file, insure that all users
         of the file open the file for reading  ONLY.   If  two  users
         attempt  to  open  the  same  file  for  simultaneous  write,
         unpredictable results may occur.

      o  If FAL is run under the SPAWNER, file access from VMS systems
         using  file  lists  may  fail after the first file.  Wildcard
         file access is supported.

      o  When the NDU CLOSE command is issued  for  a  remote  virtual
         disk  file  which resides on a personal computer running FAL,
         FAL will report the "broken pipe"  error  message.   This  is
         only a warning; no error has occurred.

      o  Trapping of hard device errors works for all IBM  PCs.   Hard
         device errors that occur on a Rainbow will cause FAL to stop.
         When FAL stops due to a device error,  all  its  sockets  are
         still  active.   Use  the  NCP command "SET KNOWN LINKS STATE
         OFF" to abort FAL's links and  sockets  before  starting  FAL
         again.























                                 2-27
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.18  DIP - DECnet-DOS Installation Procedure


     1.  The following information applies to Rainbows only:

          -  The files DNPETHRB.EXE and LAT.EXE are not a part of  the
             DECnet-Rainbow product, but are included on the floppies.
             Do not copy these files to your Rainbow.

          -  If you choose to install DECnet files to  floppies  (such
             that  loading  of  NDDRV.SYS and NPDRV.SYS will be from a
             floppy on system reboot), DIP  will  insert  a  dummy  --
             DEVICE=<x>:<path>DECDIP.SYS -- command line in CONFIG.SYS
             because MS-DOS will fail on loading the first driver  but
             will succeed on loading subsequent drivers specified.

          -  Due  to  problems  with  MS-DOS  and  <CTRL/C>  interrupt
             handling,  if  a  user enters a <CTRL/C> while in DIP and
             chooses to "terminate" DIP, any saved answers will not be
             written  to a saved answer file.  The only way to produce
             a saved answer file is by running DIP to  completion  and
             saving answers "normally".

          -  Numerous <CTRL/C>s may cause unpredictable results.


     2.  The display of disk  usage  after  copying  DECnet  files  is
         incorrect  when copy path and database paths are specified to
         be on different devices.

     3.  If installing DECnet V1.1 and DECnet V1.1  has  already  been
         installed  at  least  once,  database files do not have to be
         deleted from the DECnet default database path  (for  example,
         *.DAT).

     4.  If DIP is used to install DECnet, an existing DECPARM.DAT (if
         found  in the specified DECnet database path) will be deleted
         automatically.
















                                 2-28
              SOLVING PROBLEMS, RESTRICTIONS, AND HINTS


2.19  C Programming Library


      o  dnet_conn():

         This  function's  first  argument  is  a  node  specification
         string,  such  as a node name or node address.  If the string
         is a node address, no default access control information will
         be  passed  with the connect request.  For example, the local
         node's remote node database will  not  be  searched  to  find
         access control information that may be set up for this remote
         node address.

      o  It is necessary  to  recompile/reassemble  the  V1.1  library
         sources and produce a new library against which utilities can
         be  relinked.   This   will   help   to   ensure   that   any
         inconsistencies  or  incompatibilities  that  exist from V1.0
         will go away.

      o  The C code in the  programming  library  uses  long  variable
         names.  Be sure that your compiler can compile such sources.

      o  Functions required for DECnet network I/O are  documented  in
             __________ ____________ _________ ______
         the DECnet-DOS Programmer's Reference Manual.  In addition to
         these documented functions, many other undocumented 'support'
         functions are included as part of the C programming interface
         library found on the last kit floppy (DNETLIB.SRC).



























                                 2-29












                              CHAPTER 3

                            MODEM CONTROL




The information in this chapter is provided for  people  who  want  to
know  how  modem  control is implemented.  The information is intended
for people who understand modem operations.



3.1  Using Modem Control

To use modem control for DECnet on your personal computer, you  should
make  sure that cables and connections conform to the EIA RS-232-C and
CCITT V.28 and V.24 standards.  (Refer to Section 3.3  of  this  guide
for information about the cables and interface leads to use with these
standards.)

The  following  assumptions  have  been  made  for  this  release   of
DECnet-DOS:

      o  Connections that were established  before  turning  the  line
         state ON will be maintained.

      o  Connections that still exist when turning the line state  OFF
         will  be  maintained  (unless  the  data  set is specifically
         commanded to hangup).

You should also be aware of the following information:

      o  In the United Kingdom (UK), the R1 relay in modem  number  2B
         is held up for approximately 2 seconds in order to bridge the
         gaps in the ringing signal.  For proper  operation  in  calls
         that   are  automatically  answered,  the  2-second  hold  up
         requires that the amount of time from DSR=ON through  DTR=OFF
         and  back to DSR=ON be at least 5 seconds.  This will avoid a
         false second call seizure.  (Refer to State 7 in Figure 3-1.)





                                 3-1
                            MODEM CONTROL


      o  It is assumed that the terminal has two modes of operation:

          -  data leads only (modem control signals ignored)

          -  full modem control (modem control signals acknowledged)

         The data leads only mode is used for local connections,  such
         as  null  modem  applications.   The  proper mode signals are
         simulated internally to allow the use  of  a  single  control
         flow.  You can choose between the two modes by using a set-up
         parameter.




3.2  Modem States

Figure 3-1 shows the different states for the  modem.   (State  1  and
State  2  refer  to power ON and internal self test functions, and are
omitted from this diagram for purposes of clarity.)


































                                 3-2
                            MODEM CONTROL


 Power --> on                          from any state except off
        |                                         ||
 ______state 1_ OFFLINE     Line state --> hangup or Line state -->
off
        |                           |                      |
        |                       DTR --> off                |
        |                       RTS --> off                |
        |                       TXD --> mark               |
        |                           |                      |
        |                           |                      |
        |                           ________________________ 
                                     Disconnect DECnet from
                                      hardware COM device
   Line State=on                    ________________________ 
____________________ 
 Connect DECnet to
 hardware COM device
____________________ 
        | 
   ___ state 3_ IDLE 
    DTR --> on _________________________________ 
    RTS --> on _____________                    | 
   ____________             |                   |
        ^                   |                   |
        |                   |                   | 
        |          Modem Control=FULL   Modem Control=NULL ?
        |          and DSR --> on ?     (Data Leads Only)
        |          __________state 5_   __________state 4_ 
        |                                 Assume
        |             Start 30 sec         DSR --> on
        |             and 1 sec            CD  --> on
        |             timers               CTS --> on
        |          __________________   __________________ 
        |               |       |               | 
        |               |       |               |
        |               |   >1 sec and          |
        |               |   CTS --> on and      | 
        |               |   CD  --> on ?  _______state 6_ 
        |               |       |          Data Exchange
        |               |       |         _______________ 














                                 3-3
                            MODEM CONTROL


        |               |       |               |
        |               |      ___________state 6_ 
        |               |         Data Exchange
        |               |      Transmit if CTS=on
        |               |      Receive if  CD =on
        |               |      ___________________ 
        |               |                    |
        |         >30 sec or                 | 
        |         DSR --> off ?              |
        |               |               DSR --> off or
        |               |               CD  --> off for >2 sec ?
        |               |                    |
        |               |                    |
        |               |                    |
        |               |                    |
        |               |                    |
        |               |                    |
        |               |          _____________state 7_
        |                --------->      Disconnect
        |                             DTR --> off
        |                             RTS --> off
        |                             TXD --> mark
        |                             Start 5 sec timer
        |                          _____________________ 
        |                                | 
        |                             > 5 sec ? 
        |________________________________| 




Figure 3-1:  Modem States



The following sections explain the modem states that are  detailed  in
Figure 3-1.

















                                 3-4
                            MODEM CONTROL


3.2.1  General


The general states include:

      o  1, OFF, or MARK - these relate to the negative voltage at the
         interface pin.

      o  0, ON, or SPACE - these relate to the positive voltage at the
         interface pin.




3.2.2  State 1

This state is entered at power on.



3.2.3  State 2

This state is entered if the terminal is on-line.



3.2.4  State 3

This state exits unconditionally to State 4 if  the  data  leads  only
mode is selected.  If the full modem control mode is selected, State 5
is entered (as soon as Data State Ready, DSR, has come on).  The  wait
for  DSR  is  untimed.   State  3  is the state an on line terminal is
normally in before connection has been established.

In State 3, the Data Terminal Ready (DTR) and Request  to  Send  (RTS)
signals  are  turned  on.   In this state, the modem can switch itself
on-line only if DTR is ON.  The RTS signal is needed by some modems to
prepare the transmit channel.

                                 NOTE

        In some cases (such as private wire), it  is  possible
        for  DSR  to be ON before DTR is ON.  This is possible
        if there is a manual connection from the modem to  the
        line.









                                 3-5
                            MODEM CONTROL


3.2.5  State 4

In this state, the actual signals  from  the  modem  are  ignored  and
forced internally ON (if the data leads only mode is selected).  State
6 is then entered.



3.2.6  State 5

This state is entered only after Data Set Ready  (DSR)  has  come  ON.
This  indicates that the modem is on-line.  The modem can come on-line
either automatically or manually.  It will come on-line  automatically
if  there is a call coming in through the automatic answer unit of the
modem.  It will come on-line manually when you switch  from  voice  to
data  after  you  have  established  an incoming or an outgoing manual
call.

Once the modem is on-line, two timers are  started.   The  timers  are
called T1 and T2.  The timers operate as follows:

      o  T1  protects  against  a  non-data  call.   This  is  a   PTT
         requirement in Germany.  If no data link has been established
         within 30 seconds after the modem has gone on-line (State 6),
         an automatic disconnect is initiated.

      o  T2 protects against data transfer  within  the  first  second
         after the modem has gone on-line.  This avoids garbage due to
         transient effects in some older modems.


If Clear to Send (CTS) and Carrier Detect (CD) have both come ON,  the
link is considered established.



3.2.7  State 6

This state is the normal data exchange state of the terminal when  the
call is established.



3.2.8  State 7

This is the disconnect state.  The disconnect is initiated by loss  of
carrier  (CD)  for  greater than 2 seconds, or by the loss of Data Set
Ready (DSR).  The terminal waits 5 seconds, then a new  connection  is
anticipated  by  entering  State  3.   This sequence provides a proper
disconnection for all known modems.




                                 3-6
                            MODEM CONTROL


Figure 3-2 illustrates the minimum implementation of the V.24 circuits
for full duplex modem control.


INTERNAL DTE                      ISO 2110 MALE               V.24
SIGNAL NAME                       CONNECTOR PIN               CIRCUIT
(TYPICAL)            See State 7  NUMBER                      NUMBER
                     in Figure 2-1

PROT GND ----------------TT-------->  1   PROTECTIVE GROUND    101

     TxD -------------|>----------->  2   TRANSMITTED DATA     103

     RxD -------------<|----------->  3   RECEIVED DATA        104

     RTS -------------|>----------->  4   REQUEST TO SEND      105

     CTS -------------<|----------->  5   READY FOR SENDING    106

     DSR -------------<|----------->  6   DATA SET READY       107

 SIG GND -------------------------->  7   SIGNAL GROUND        102

      CD -------------<|----------->  8   RECEIVED LINE        109
                                          CARRIER DETECT

     DTR -------------|>----------->  20  DATA TERMINAL        108/2
                                          READY




Figure 3-2:  Minimum Implementation of V.24 Circuits for  Full  Duplex
             Modem Control




















                                 3-7
                            MODEM CONTROL


3.3  Interface Requirements

The following tables specify the interface leads which are required to
use  DECnet-DOS  in asynchronous mode, either with a direct connection
or with a modem.  (The DECnet software  will  not  monitor  the  modem
leads  when  direct  connection  is  specified.   This  allows for the
connection to a remote node using a null modem, a modem eliminator, or
null  modem cable.  These are cables and devices which may not provide
all the signal leads required for a modem connection.)

Following each table is a list of the part numbers  for  the  DEC  EIA
RS-232 communication cables which will provide these leads.



Table 3-1:  Asynchronous Mode, Direct Connection

                                          CCITT V.24     EIA RS-232-C
Pin No.        Function                   Circuit No.    Circuit No.

1              Protective Ground          101            AA
2              Transmit Data              103            BA
3              Receive Data               104            BB
7              Signal Ground              102            AB

Communication Cables:

BC22D 6  wire null modem cable (transmit  and  receive  leads  crossed
         within  cable, eliminating the need for a separate null modem
         device.)
BC22E 16 wire modem cable
BC22F 25 wire modem cable
BCC14 16 wire modem cable (with thumb screw connectors)
BCC04 25 wire modem cable (with thumb screw connectors)




















                                 3-8
                            MODEM CONTROL


Table 3-2:  Asynchronous Mode, Modem Connection

                                          CCITT V.24     EIA RS-232-C
Pin No.        Function                   Circuit No.    Circuit No.

1              Protective Ground          101            AA
2              Transmit Data              103            BA
3              Receive Data               104            BB
4              Request to Send            105            CA
5              Clear to Send              106            CB
6              Data Set Ready             107            CC
7              Signal Ground              102            AB
8              Carrier Detect             109            CF
20             Data Terminal Ready        108/2          CD

Communication Cables:

BC22E 16 wire modem cable
BC22F 25 wire modem cable
BCC14 16 wire modem cable (with thumb screw connectors)
BCC04 25 wire modem cable (with thumb screw connectors)

































                                 3-9
                            MODEM CONTROL


3.4  Modem Option Selections

To use  a  modem  with  the  asynchronous  port,  the  modem  must  be
configured  to match the line characteristics used by DECnet-DOS.  For
many modems these will be the standard factory  settings.   Table  3-3
lists some of the user-selectable options you may find on your modem.



Table 3-3:  User-selectable Modem Options

                                                Setting for Use with
Option                  Description             DECnet-DOS

Character Length        No. of bits used to     10 bits -
                        encode a character.     8  data bits, 1 start
                                                bit, and 1 stop bit.

Speed Indicate/Select   Indicate mode: modem    Indicate  mode.  (Pin
                        indicates modem         23, CCITT  V.24  111,
                        speed on pin 12         is never asserted and
                        (CCITT V.24 112).       pin  12,  CCITT  V.24
                                                112, is not monitored
                                                by DECnet-DOS.)

Receive  Responds  to   Allows modem to         Enabled (if you  want
RDL                     respond to a remote     to  allow  a   remote
                        digital loopback        modem test).
                        test request.

Other selectable modem options should be set according  to  the  modem
user's  guide  for  the  particular  modem  application you are using.
(Other  options  include  a  public  switched  line,  a  leased  line,
asynchronous or synchronous mode, etc.).




















                                 3-10

Downloaded From P-80 International Information Systems 304-744-2253
