Demon Internet Ltd
==================
Gateway House
322 Regents Park Road
Finchley, London, N3 2QQ
0181-371 1234  (Sales - London)
0131-552 0344  (Sales - Edinburgh)
0181-371 1010  (HelpLine)
0181-371 1150  (Fax)
0181-371 1000  (Switchboard)
email internet@demon.net

MODEM.TXT - INFORMATION ON CONFIGURING A MODEM FOR CONNECTING TO THE
INTERNET
Last updated: 19 April 1995

The latest version of this document is available from
ftp.demon.co.uk:/pub/doc/Modem.txt


Contents
========

1. General
2. Essentials
3. Telephone Exchange
4. Internal Modems
5. Which Phone Number
6. Modem and Telephone Leads
7. Serial Chips
8. Speed
9. Trouble Shooting
10. Software and Other Factors
11. Help for Specific Computers
 11.0. IBM PC Compatibles running DOS
 11.1. OS/2
12. Individual Modem Settings
 12.0. Setting up a kind of modem not described below
 12.1. Setting Up a US Robotics/Miracom Modem
 12.2. Apple Express Modem
 12.3. BT NS 2232 M
 12.4. Dowty
 12.5. Dynalink
 12.6. Gateway
 12.7. Global Village
 12.8. Mistral
 12.9. Multitech
 12.10. Pace Microlin
 12.11. Pace Mobifax
 12.12. Racal
 12.13. Rockwell chipset modems
 12.14. SmartOne
 12.15. Supra modems
 12.16. Yoriko modems
 12.17. Zoltrix
 12.18. Zoom modems
 12.19. Zyxel
13. Testing
14. Finally


1.   General
============

This document will point out some general essentials and advice on
setting up your modem.  A section at the end discusses specifics
regarding a DOS setup running the KA9Q NET.EXE program.  Due to the vast
combinations of computer and modem setups it is impossible to give
specific help for all types.

Making an Internet (IP - Internet Protocol) connection via a modem is
very different from a standard dial-up connection.  Do not assume that
just because you can download from a BBS (and maybe upload) or use other
services that you have your communication (comms) set-up 100% sorted out.
Due to the nature of IP, if you get errors, throughput can be hit very
badly.  Under IP information is sent in packets and for maximum speed
these should generally be as large as possible up to a maximum of about
1500 characters.  If a packet gets messed up (garbled) its entire
contents will have to be resent - hence a large speed degradation may
occur.

One exception to this is when an interactive sessions are sharing a
TCP/IP link with more voluminous transfers such as NNTP or SMTP.  In this
case it can be preferable to have smaller transmission units (Maximum
Transmission Units setting or MTU) so that keystrokes/screen updates will
fit into the data stream with less delay.  If a large MTU is used this
can lead to what feels like a jerky or intermittent session.

Enough of the technical parts, there follows some sound advice that
everybody should take note of.



2.   Essentials
===============
          Correct modem settings:

               Full hardware handshaking (CTS/RTS),
               Flow control
               XON/XOFF (software handshaking) set to off
               Settings must be bi-directional where appropriate.

         A full specification modem cable (open yours up - if it has
         only 3 wires it is no good).

         A serial chip that can cope with the high speeds (if using a
         high speed modem).  Extended memory drivers and Terminate Stay
         Residents (TSRs) etc. can interfere with the handling of
         interrupts from serial chips.



3.   Telephone Exchange
=======================

          The Demon Internet Service (DIS) is on modern digital exchanges
          so you should have little trouble with ringing tones etc when
          connecting to us.  If you are on an older exchange, your modem
          may not recognise the dialling tone.  If this happens, look in
          your manual and change the setting that overrides the dial tone
          recognition.

          Note that when you make changes to a modem's settings you
          should always reset the modem first, make the change and then
          save the settings.  You will need a comms or "terminal
          emulation" package such as Telix, Procomm, Window's Terminal, Z-
          Term, Microphone etc.  Look in your modem manual for
          instructions.  Mostly you will be able to type ATZ <return> to
          reset your modem.  On a US Robotics/Miracom modem you could
          type:

          ATZ            Reset the modem
          ATX3           Alter a setting
          AT&W           Write the settings to Non-Volatile RAM (NVRAM)

          The last bit (AT&W) is useful as it means that when the modem
          is reset, it will remember the settings you have stored.

          If going through a private telephone network (or PABX) first,
          you will probably need to dial a number such as 9 to get an
          outside line.  Make sure your dial string has this in.  You may
          need to separate this from the number to dial by a separator
          such as a comma so that there is a pause to give your telephone
          system time to give you an outside line:

          9,01813434848



4.   Internal Modems
====================

          Internal modems have the advantage of not having a serial lead
          to worry about but the disadvantage of using an extra interrupt
          and generally don't have any lights to let you know what is
          going on.  Ensure that the interrupt on which the modem sits
          does not interfere with any others - refer to the setup program
          for your computer and your modem manual.  This may require
          altering a jumper (a small connector) on the main computer
          board (mother board) on your computer or on a separate board.
          This should be well documented and is well within the scope of
          the average user.  Ensure that the modem is seated correctly in
          the expansion slot.



5.   Which Phone Number
=======================

          We have multiple Points of Presence (PoPs) - please see
          /pub/doc/Demon.txt for details.  Thus you will have a choice of
          numbers to ring.  You may use any of our PoPs at any time.



6.   Modem and Telephone Leads
==============================

          Your modem lead should be in good condition and preferably not
          wrapped in a tight circle or running parallel to high power
          cables etc.  This will normally only affect longer runs and, as
          your cable should be earthed, will not often be a problem.  The
          cable should be connected securely at both ends as should the
          telephone cable.  If you suspect your telephone socket may be
          causing a problem then test it with a standard plug in
          telephone.  Use the correct type of modem lead - they vary from
          country to country.



7.   Serial Chips
=================

          The type of serial chip (Universal Asynchronous
          Receiver/Transmitter - UART) in use can make a big difference
          to comms performance/reliability.  At higher speed the computer
          can sometimes not service the serial chip fast enough to catch
          all of the characters arriving down the line.  This problem
          increases if running under a multi-tasker such as Windows,
          certain memory managers and other TSRs.



8.   Speed
==========

          Close to every modem user's heart is the speed at which they
          can operate.  There are two different speeds: the first is the
          speed at which a modem can talk to another modem; the second is
          the speed at which the modem can talk to its controlling
          computer (the DTE rate).

          Firstly, we will discuss the connect rate.  A V.22bis modem can
          connect at a speed of 2,400 bits per second.  There are 8 bits
          in a byte (a byte is usually one character) so that is a
          maximum of 300 characters per second (cps).  Due to start and
          stop bits, each byte will take 10 bits reducing the speed to
          240 characters per second.  When running over IP there is a
          slight overhead and so you will never see this maximum.
          However, as you can (and will) have several things happening at
          once, you will be able to make very good use of your available
          bandwidth.

          Many modems have compression protocols built in to them.  MNP/4
          and V42 use synchronous connections to provide an error free
          connection between modems, saving the start and stop bits.
          This gives at least a 20% increase in throughput.  V42bis adds
          compression, provided that the DTE rate is higher than the
          connection rate.  This means that when downloading a plain text
          (or ASCII) file, it is possible to get faster speeds by
          compressing the data.  The data is compressed so that the same
          information can be encoded in to a smaller space.  The
          receiving modem will of course unscramble the data for you.  If
          news normally flows in at say 200 cps, then, on a 2400 cps
          link, you have up to 44 cps left at the same time for mail,
          telnet'ing, ftp'ing etc.  Compression techniques do not work as
          effectively on binary files and make very little difference to
          pre compressed files (such as .zip, .zoo, .lha etc.).

          Note that MNP5 will usually degrade throughput on an IP link
          due to the packet based nature of it's compression method.
          V42bis does not suffer this problem as it is capable of
          optimising itself dependent on the type of data being
          transferred.

          Now we will discuss the second speed - the speed at which the
          modem and computer communicate with each other.  This is called
          the Data Terminal Equipment (DTE) rate.  If you have a slow
          modem, e.g. a 2400 baud one without MNP or V42, then it will
          probably only work correctly when talked to by the computer at
          the same speed.  For the facts on your particular modem and
          computer you should refer to your manuals.  On faster modems
          you will only be able to take advantage of some of the
          compression features by making the computer talk to the modem
          at a faster speed than modem is talking to the remote modem
          down the telephone line.  Thus you should talk to a 9600 modem
          at 19200 or even 38400.  You should check the maximum speed at
          which the serial port on your modem can talk and then set your
          communication package to work at the highest mutually available
          speed.  Don't forget that without a buffered UART you are
          unlikely to sustain reliable high speed comms above 9600 baud.

          Please note that we only support modems capable of V22bis
          (2400) and upwards.  If you have a US Robotics/Miracom HST
          modem, you may not get very good throughput in HST mode.  In
          practice HST mode is fine if FTP'ing from a site without
          anything else happening (sending mail etc.) as it works fine in
          one direction at a time only.



9.    Trouble Shooting
======================

          If you are getting garbled characters on the screen then
          something is wrong!  Garbled characters are often a sign of
          mismatched speeds, lack of handshaking or a non-locked DTE
          rate.  If you get as far as the login prompt but no further
          then make sure that your dialler script is working on 8 bit
          standard comms: 8 bits, no parity, 1 stop bit. See
          /pub/doc/Demon.txt for the full logon script details.

          Having checked your setup according to the information above,
          try reducing the speed at which the computer talks to the modem
          (if using a high speed modem) until the connection works.  If
          you have to do this then either you are attempting to drive
          your computer or your modem at too high a speed, or you have
          other processes running which interfere with the correct
          running of your serial communications (as per Serial Chips
          above).

          If you have finished your live session and log off you may
          sometimes find that your phone line is not dropped.  This can
          result in an unwelcome phone bill!  There are a number of
          computer/software specific solutions to this problem and some
          answers are given in /pub/doc/Support.faq which may have been
          included in your installation.  One thing to check on your
          modem is that the setting that makes the phone line drop when
          the computer tells the modem that it has finished, is on.  The
          computer uses the serial port and drops DTR (Data Terminal
          Ready) and the modem spots this and hangs up the line.  The
          setting often &D2 and you should read the section below which
          tells you how to set this.  It is definitely &D2 for US
          Robotics, SupraFax and Dowty Quattro modems.

          If your modem sometimes seems to fail to recognise a ringing
          tone, reporting it as BUSY.  This can be cured by adding a
          comma after the dial number, e.g. "ATDT0813434848,".  This
          makes the modem pause and ignore the first rings which it
          sometimes things is a busy single.  Some US Robotics modems can
          exhibit this problem.

          ATZ is the command that resets the modem.  Setting your
          initialisation string to ATZA0 etc where A0 is the
          initialisation string is very likely to fail.  This is because
          the modem takes a while to reset and throws away the data being
          sent to it in the meantime.  Some people beg to differ on this
          point.  However it is certainly true on US Robotics modems.

          Just to confuse matters further there are often some switches
          on the modem which you can use to make further settings or to
          default to different options.  These are referred to as DIP
          switches.  Mostly, the advice contained in this document,
          refers to modems that have not had their switches tampered
          with.  If you have the manual for your modem (and I hope you
          have!) then that will probably tell you what the default
          factory switch settings were.  Make a careful note of the
          current settings and then change back to the factory defaults.
          If you already use your modem with other packages, make sure
          they still work.  These DIP switches must be set to ensure that
          the reset command ATZ resets the modem to the stored values.
          On some modems it is possible to make ATZ restore to factory
          settings which rather defeats the object of configuring it!
          Some modems have ATY commands instead of DIP switches and so it
          is important that the correct ATY command has been used.
          Fortunately, the default will ok if no ATY command has been
          issued.

          If you are getting a no response from the modem before dialling
          (eg. The dialler in KA9Q reporting "INPUT LINE WAIT 3000 OK")
          then that means that either your modem is not connected
          properly (check the cables, or for internal modems, check
          jumper settings, and check software configuration to check that
          the dialer is trying to talk to the modem on the correct port),
          or your modem is not configured for verbal result codes.
          Normally the command to accomplish this is ATV1 .

          There is a section below which specifically refers to problems
          that may be encountered by PC users.


10.  Software and Other Factors
===============================

          By configuring your software correctly you can make significant
          improvements to an under performing communications connection.
          Things to check for include badly fragmented disks (run a disk
          de-fragmenter such as Norton's Speed Disk), no disk cache, no
          or insufficient buffering inside the software and unnecessary
          checking protocols or indexing taking place.  Refer to your
          software's instructions for details on these.



11.  Help for Specific Computers
================================

    Some extra comments for some operating systems which may be of use
    follows.


    11.0.     IBM PC Compatibles running DOS
    ========================================

          In addition to the above info there is some specific advice
          below for those of you running DOS.

          Some modems send back "OK" when sent ATZ (the reset command)
          even though they are not ready.  This means that the dialer
          program will try to ring out even though the modem is not
          ready.  The effect is that you will see ATZ on the screen
          followed by OK and then the program will not dial.  Eventually
          it will time out.  To avoid this, send AT instead of ATZ in the
          modem initialisation string.

          Extended memory drivers can interfere with the correct
          operation of your serial communications.  If you suspect this,
          rename your CONFIG.SYS and AUTOEXEC.BAT files and then reboot
          your computer to see if the connection improves.

          If you have a V.32bis 14,400 modem you will probably want to
          talk to it at 38,400.  Unless you have a suitable serial chip
          then you will get errors and, as explained at the start of this
          document, this can seriously impact the throughput.  When
          running NET.EXE you can type asystat at the net> prompt and
          information about your serial comms will be printed to the
          screen.  The interesting parameter is the third one on the
          second line, 'hw over'.  This shows how many hardware overruns
          (characters lost because they weren't fetched from the serial
          chip in time) have occurred.  These overruns are usually due to
          lack of either a buffered UART or hardware handshaking.

          As already stated, for maximum performance you will need to
          have a buffered chip.  For this you will need a 16550A - this
          is the number that is written on the chip.  The asystat command
          will tell you if a 16550 is detected.  Unfortunately, even top
          manufacturers overlook this area so it is quite likely that
          your chip is below par.

          If in doubt, open up your computer and locate the serial chip.
          If it is not a 16550 then it might need replacing.  If you are
          handy with a soldering iron you could replace it, but this is
          not advisable unless you are really confident.  If the chip is
          socketed then it can be removed and a 16550 (costing about #16
          - we sell them) be put in its place.  If not then you could buy
          an extra serial card with a 16550 already on it costing from
          around #30 to #70 depending on the specification.

          Some internal modems use a 16450 with a large buffer (1K) and
          this may be enough to stop hardware overruns.

          If you are using a standard serial port then the settings
          offered for COM1, 2, 3 or 4 in the configuration program in
          DIS.EXE will probably be fine.  Otherwise you should refer to
          your manuals and enter the appropriate IRQ number and I/O base
          address.

          If you install an extra serial card then be aware that if you
          have, for example, a mouse on COM1 then you should not use COM3
          for your modem using the default IRQ setting as they share the
          same interrupt.

          There is another factor that can impede throughput and that is
          software overruns.  Using the NET.EXE software, at the net>
          prompt having just received some news or ftp'd a file, type
          asystat and look at the figure before sw over.  If this is not
          0 then you are getting software overruns.  To fix this,
          increase the buffer size in the attach line near the top of
          autoexec.net:

          attach asy 0x3f8 4 ppp sl0 4096 1500 38400

          Alter the 4096 in the above to be 8192, 12288 or higher until
          the software overruns are cured.

          More information on tuning is available in
          /pub/doc/ka9q/Tuning.faq.


    11.1.     OS/2
    ==============
         If intending to run the DIS DOS software in an OS/2 2.x DOS
         session you should get a copy of sio126c.exe and install the
         communications driver in it before running DIS.  sio126c.zip is
         available on our ftp server or via our guest download account.
         This is because the standard communications drivers do not pass
         to DOS the buffering of your 16550A buffered serial chip.



12.  Individual Modem Settings
==============================


    12.0.     Setting up a kind of modem not described below
    ========================================================

         To change the settings of your modem, use a program that can
         talk directly to the modem, such as a standard communications
         package.

         (*) In Windows, you can use Terminal (in the Accessories
         Group), setting it for the correct connector (COM Port).
         (*) On the Macintosh, you can use ConfigPPP by switching
         Terminal Window on, and clicking Open.  When you are finished,
         switch off Terminal Window again.

         Type the reset command, usually ATZ <RETURN>, and see the
         response OK.  Then continue through the list of settings.  You
         can type ATI4 <RETURN> or AT&V <RETURN> to see what your
         current settings are on a lot of modems.  For connecting to
         Demon we recommend the following:

         Use V.32bis modulation/CCITT protocols rather than HST
         Originator mode
         Local echo ON
         Duplex OFF; receiving system sends duplicate data
         All result codes displayed
         Display result codes in verbal (not numerical) mode, e.g. OK
         not 0
         Enable additional error control indicator, e.g. LAPM/V42BIS
         Serial port remains at fixed setting
         Modem send CD (Carrier Detect) on connection
         Terminal sends DTR (Data Terminal Ready)
         Data Set Ready (DSR) controlled by the computer
         Hardware CTS (Clear to Send) transmit data flow control
         Received Data h/ware (RTS) flow controlled by computer
         Received Data software flow control disabled (make sure the
                 modem uses hardware flow control, and switch off
                 XON/XOFF flow control, also known as software flow
                 control)
         MNP 5 data compression disabled
         Variable link speed negotiation
         1800Hz UK guard tone on. (Probably AT&G2)

         When done, type the command that saves the settings to Non
         Volatile Ram (NVRAM) (usually AT&W) so that they areremembered
         when the modem is reset.


    12.1.     Setting Up a US Robotics/Miracom Modem
    ================================================

          To set up your modem, use a standard communications package.
          Type ATZ <RETURN> and see the response OK.  Then continue to
          make the settings.  You can type ati4 <RETURN> and ati5 to see
          what your current settings are.  For connecting to Demon we
          recommend the following:

          B0     V.32bis modulation rather than HST
          C1     Transmitter enabled
          E1     Local echo ON
          F1     Duplex OFF receiving system sends duplicate data
          Q0     Result codes displayed
          V1     Display result codes in verbal (not numerical) mode
          &A3    Enable additional error control indicator
          &B1    Serial port remains at fixed setting
          &C1    Modem send CD (Carrier Detect) on connection
          &D2    Terminal sends DTR (Data Terminal Ready)
          &G2    1800Hz Guard Tone
          &H1    Hardware CTS (Clear to Send) transmit data flow control
          &I0    Received Data software flow control disabled
          &K3    MNP 5 data compression disabled
          &N0    Variable link speed negotiation
          &R2    Received Data h/ware (RTS) flow controlled by computer
          &S1    Data Set Ready (DSR) controlled by the computer

          e.g. type AT&K3 <RETURN>.  When done type AT&W <RETURN> to save
          the settings to Non Volatile Ram (NVRAM) so that they are
          remembered when the modem is reset.

         Some US Robotics occasionally mistake a System X (and Y?)
         ringing tone for a busy tone and hang up just as the Demon end
         answers.  Sticking a pause on the end of the dialling sequence
         stops the modem's response long enough for the Demon end to
         start its negotiating sequence.  This means that the confusing
         System X tone is ignored.  If the Demon end is busy you just to
         wait a bit longer for the BUSY string, but not as long as the
         setting in S7.  Add a pause by adding a comma to the end of the
         string.


    12.2.     Apple Express Modem
    =============================
     Just AT&F then AT&C0 to disable compression


    12.3.     BT NS 2232 M
    ======================

         (Note this doesn't work reliably with dial, but does work with
         TIP or with an outboard Kermit script.)

         at &f0 s0=0 x7 m2 &u1 &k0 b0 s30=26 &e5 &r1 &d2 &c1 l3
         &f0 - reset to factory default
         s0=0 - suppress auto answer
         x7 - maximum message generation (for diagnostic purposes)
         m2 - speaker always on, so you can hear retrains
         &u1 - RTS flow control
         &k0 - CTS flow control
         b0 - CCITT mode
         s30=26 - CTS follows DCD **, plus defaults
         &e5 - V.42bis (and LAPM)
         &r1 - RTS locked on (??)
         &d2 - DTR is Data Terminal Ready
         &c1 - CD Normal
         l3 - Speaker loud

         ** the theory is that it would otherwise try to track RTS when
         that is used for flow control.



    12.4.     Dowty
    ===============
         Dowty Quantum 144

         To configure this modem for CTS/RTS only (hardware
         handshaking):

         &k2      Use CTS on transmission
         &u2      USE RTS on receive



    12.5.     Dynalink
    ==================
         Dynalink 1414VE: AT&Q9W1S37=11S48=0M0

         &Q9      The modem will attempt V.42bis, fallback to V.42(LAP-
                   M), then fallback to normal mode.
         W1       Reports the error correction protocol and the carrier
                   speed used.
         S37=11   Sets DCE speed (modem to modem) to 14400bps.
         S48=0    Disables protocol negotiation. Forces LAPM.
         M0       Turns off the speaker. (This thing is loud!).

         ATZ or AT&F as the first command as both of these seem to annoy
         the modem into false starts.

         ACTIVE PROFILE:
         B1 E1 L0 M0 N1 Q0 T V1 W0 X4 Y0 &C1 &D1 &G0 &J0 &K3 &Q9 &R0 &S1
         &T4 &X0 &Y0
         S00:000 S01:000 S02:043 S03:013 S04:010 S05:008 S06:002 S07:050
         S08:002
         S09:006 S10:014 S11:095 S12:050 S18:000 S25:005 S26:001 S36:007
         S37:011
         S38:020 S44:003 S46:138 S48:000 S49:008 S50:255



    12.6.     Gateway
    =================

         Gateway Telepath modem: AT&K3s48=0s46=138s36=1

         The modem works fine at 38400 and most of the time is OK with
         14400 carrier. On occasion it works better by setting it down
         to 9600 with n0s37=9 added to the init string.



    12.7.     Global Village
    ========================
From a user:
The specs for AT commands for a Global Village PowerPort Silver and Gold
modems are as follows:
AT {code}       command...                         action...
    \N5 (Set Operating Mode)            Set auto-reliable(V.42 LAPM only)
    \Q3 (Set Serial Port Flow Control)  Enable bidirectionable hardware
                                        flow control
    \J0 (BPS Rate Adjust)               Disable port rate adjust;
                                        serial port rate independent of
                                        the connection
    %C1 (Data Compression)              Enable data compression
                                        (V.42bis in LAPM)
<these following could be helpful...>
    &W1 (Store Active Profile)          Save active configuration as User
Profile 1
    &Y1 (Select Stored Profile On Power Up) Recall User Profile 1 on power up
    &V1 (View Active Configuration and Stored Profile) View profile 1


    12.8.     Mistral
    =================

         For an Amber Logic Mistral FX144 modem.
         Use the factory defaults and the following:
         &E4            Forces the modem to reject the connection with
         the
                        'NO CARRIER' message if it cannot establish a
         V42 link
         S31=2          Locks the DTE baud rate to 38400



    12.9.     Multitech
    ===================

         AT&F
         This just resets to factory settings.

         From one of our users with a Multitech MT1932ZDXK V32Ter and
         fax modem:

         AT&F&E2&E7$MB14400X4M0S0=0

         The X4 just gives you full result codes - not essential unless
         you want to
         know exactly what kind of connection you've got.

         From a Multitech dealer:

         &E4            Hard CTS/RTS
         &BA0           Baud rate altering off
         &E2            V.42 with no fall back to MNP5
         &E15           Compression on
         &D2            Hang up the line when DTR is dropped


    12.10.    Pace Microlin
    =======================

         AT &K3B0E1F0Q0V1%C2&C1&D2\N3

         &K3 - RTS/CTS Handshaking
          B0 - CCITT protocols
          E1 - Enable Echo
          F0 - Negotiate connect speed - may want to use F10 <14.4> if
               saving for use with demon only.
          Q0 - Enable result codes
          V1 - Verbose result codes
         %C2 - V42 but no MNP5 compression
         &C1 - DCD follows carrier
         &D2 - hang up on DTR
         \N3 - Autoreliable link - use \N2 to reject links negotiated
               without error correction.

         AT &W to save as default, or AT &W1 to save in second NVRAM
         section for recall with ATZ1 as modem initialisation string.

    12.11.    Pace Mobifax
    ======================
         For connecting to Demon we recommend the following:

         Command   What it does
         B0        Use V.32bis modulation/CCITT protocols rather than
         HST
         &C1       Modem send CD (Carrier Detect) on connection
         E1        Local echo ON
         F0        Variable modem-to-modem speed negotiation
         Q0        All result codes displayed
         V1        Display result codes in verbal (not numerical) mode,
         e.g. OK not 0
         X4        Gives full CONNECT string
         &D2       Terminal sends DTR (Data Terminal Ready)
         &S1       Data Set Ready (DSR) controlled by the computer
         &K3       RTS/CTS flow-control

         When done, type the command that saves the settings, AT&W, so
         that they are remembered when the modem is reset.


    12.12.    Racal
    ===============
         From a user:
          My modem is a model Racal Maxam V 9600 baud, about 2 years
          old.I have been told that a Racal connected to a US Robotics
          the Racal can detect a higher baud carrier as its own 9600
          carrier.When connected you will get lots of 8bit characters
          and the modem will then drop the line.This can be solved by
          forcing the modem to 9600 and not checking for errors at this
          baud rate.

         The command string is atn0f8&e0&w0 for a Racal:
         n0      - Do not seek the baud rate
         f8      - Force baud to 9600
         &e0     - No error check
         &w0     - Write change


    12.13.    Rockwell chipset modems
    =================================

         Rockwell chipsets are used in a variety of modems, namely Supra
         and SmartOne.
         B0  v32bis modulation
         E1  Local echo on
         V1  Word response for errors
         Q0  Modem sends responses
         F1  Duplex off. (Can't find any not to)
         &A3
         &S1

         There is an "undocumented" feature present in the Supra
         V.32/V.32bis FAX Modems that can help improve the quality of
         FAX and Data transmissions.

         The AT\E1 command is not documented in Supra's manuals, but is
         present in the Rockwell V.32/V.32bis firmware/chipsets on which
         the Supra V.32/V.32bis FAX Modems are based. This command is
         documented in the RC96AC and RC144AC Modem Designer's Guide
         from Rockwell International.



    12.14.    SmartOne
    ==================
     (also badged Best Data, CalCom)
         &F      Restore factory settings
         B0      Select CCITT V.22 and V.21 mode
         C1      Normal transmit carrier switching
         E1      Command character echo enabled
         F1      On-line state character echo disabled
         Q0      Result code messages sent to machine
         V1      Result code messages sent in English word format
         &C1     DCD indicates on-line data carrier detected
         &D2     Modem disconnects when DTR drops
         &G2     1800 Hz Guard Tone
         &K3     Enable CTS/RTS flow control
         &Q6     Select Asynchronous operation in normal mode
         &R0     CTS follows RTS
         &S1     DSR turned off while carrier is lost
         \G0     Disable Xon/Xoff flow control

         For v32bis (14,400 baud) models:

         S37=11  Attempt to connect at 14400 bps


    12.15.    Supra modems
    ======================

          Supra 14.4k fax modems need the ROM revision 1.70B or later but
          their ROM revision number is odd.  Revision 1.8 or 1.4 are also
          apparently OK.

          Information providing features
              Enable all CONNECT, PROTOCOL & COMPRESSION mesgs:   s95=41
              loudspeaker control (low volume, on until carrier): l1m1

          Modem/PC signals
              modems disconnects when DTR drops:                  &d2
              DCD follows line carrier:                           &c1
              Enable hardware flow control:                       &k3

          Speed connection, reject bad lines
              new models, only make LAPM Reliable connections:    \n4
              old models, make AutoReliable connections:          \n3
              Disable negotiation, make V42 (LAPM) connection:    s48=0
              connect at highest shared data rate:                n1

          Compression
              new models, V.42bis (BTLZ) Enabled, (but not MNP):  %C2
              old models, enable data compression (BTLZ or MNP):  s41=1

          An initialisation string for this would be:

          ats95=41 l1m1&d2&c1&k3 \\n4 s48=0 n1 %C2
                           ^note the double '\' is needed if typing this
                           into some dialer programs

          To put this into the modem's memory (NVRAM) type at&w




    12.16.    Yoriko modems
    =======================

          Yorikos work OK with a simple AT&F&C1&D2 set-up.



    12.17.    Zoltrix
    =================

         These are one of our user's settings for a Zoltrix v32bis
         internal fax/modem.  He writes:

         With X4, W1 and V1, I've managed to configure it very nicely to
         redial if the line's are busy after only 5 seconds, report
         CONNECT, PROTOCOL CARRIER, and BUSY

         The only bit I'm vaguely unsure about is, whether disabling
         compression (%c0 on mine), disables v42bis also, as I really
         only want to knock out MNP 5. &Q9 I think attempts v42bis,
         falls back to LAP-M+v42, then to normal.

         An annoying feature is that at&v only digs out probably a
         quarter of the settings - the '\' and '%' commands don't
         feature; some of them appear extremely useful: %Q for instance
         purportedly reports line signal quality, and %L received signal
         level, which I reckon might be relevant to one recent spate of
         postings, and you can tune up v42bis with others.

         S86 stores a connection failure cause code.

         OK
         at&v
         ACTIVE PROFILE:
         B0 E1 L0 M0 N1 Q0 T V1 W1 X4 Y0 &C1 &D2 &G0 &J0 &K3 &Q9 &R0 &S1
         &T4 &X0 &Y0
         S00:000 S01:000 S02:043 S03:013 S04:010 S05:008 S06:002 S07:060
         S08:002 S09:006
         S10:014 S11:095 S12:050 S18:000 S25:005 S26:001 S36:007 S37:000
         S38:020 S44:003
         S46:138 S48:007 S49:008 S50:255

         Another user writes:

         Rom revision (use ATI0 or similar to check) : See below

         AT&Q5S48=7S46=138S95=46

         Rom revision
         ------------

         I have listed what comes out of ATI0 to ATI4 as ATI0
         doesn't make sense!

         ATI0 = 14400
         ATI1 = 007
         ATI2 = OK
         ATI3 = V1.410-AP39
         ATI4 = a007880284C6002F
                bC60000000
                r1005111151012004
                r3000111170000000


         Additional modem string info. (may be of some use)

         &Q5    = set error correction mode
                  causes the modes to try v42bis, then MNP5, then normal
                  connection
         S48=7     = enable V42 negotiation
         S46=138   = error correction with compression
         S95=46      = display extended result codes
                  so I can see that i've got error correction
                  and compression :-)


         I also have a line

         echo atz > com3:

         in my demon.bat file to reset my modem as my fax software
         leaves it in a bit of a state :-(  Two 'init' lines don't seem
         to work (not that I'm bothered!)

         Yet another user writes:

         This might be helpful if anyone calls using a Zoltrix 28800/
         Internal / Fax.

         Setup straight from box, using a comms package.
         Using factory settings, AT&F,
         then alter s7 to = 20   ATS7=20
         then alter b1 to b0     ATB0
         then alter &q6 to &q5   AT&Q5
         optional  ATL1 to ATL2  ATL2 - modem volume to hear connect.

         and then write these to the stored profiles

         AT&W0
         AT&W1

         Software used:

         Windows 3.11 for workgroups
         MS-Dos 6.22

         DISWIN.EXE from Demon
         DIS216C.EXE  "     "

         Cybercom.drv - from ftp.qualcomm.com (can't rem exact loc)
         to replace standard comm.drv, supports higher speed 57600+
         rather than 19200

         In windows system.ini under 386Enh

         Com*fifo=1


    12.18.    Zoom modems
    =====================

         From one user comes this:

                        Zoom 14.4X FaxModem Settings
                        ============================

         These setting are in use to connect to demon both via KAQ9 and
         trumpet winsock (SLIP). The settings enable 14400 bps with V42
         error correction and V42bis data compression. In operation I
         achieve 2600 cps when obtaining mainly text news. Whilst I am
         sure the settings work I do not vouch for the accuracy of my
         interpretation of what they mean!!

         To reset modem to stored profile:-
         ATZ      - sets to profile 0
         ATZ0     - sets to profile 0
         ATZ1     - sets to profile 0

         To store current profile:-

         AT&W0    - store as profile 0
         AT&W1    - store as profile 1

         For brevity I have left out setting that have no functional
         relevence.


         Profile     Command      comments
         E1          ATE1         Command characters echoed
         N0                       *ATN0 (zero)   Disable auto-mode
                                   detection; connection speed specified
                                   by register S37
         Q0          ATQ0 (zero)  Enable response to computer (DTE)
         X3                       *ATX3     Monitors busy tones; sends
                                   X2 messages
         Y0          ATY0 (zero)  Disable long space disconnect
         &C0         AT&C0 (zero) Forces RLSD (DCD) on
         &D0         AT&D0 (zero) Data terminal ready options
         &G2         *AT&G2       Enable 1800Hz guard tone
         &J0         *AT&J0 (zero)Disable adjusting DTE speed
         &K3                      AT&K3     Enable RTS/CTS flow
                                   control. VITAL for slip connections
                                   such as Trumpet winsock
         &R1                      AT&R1     CTS is always on in
                                   synchronous or drops if required by
                                   flow control in asynchronous
         &S1*                     AT&S1     DSR active after answer
                                   tone detected and inactive after
                                   carrier loss.
         &T4                      AT&T4     Responds to remote modem
                                   request for digital loopback.

         Registers
         Set using ATSn=v  Sets register n to value v

         S37 11 *

         All lines with an * are for items than are altered fron the
         factory default settings.

         We would recommend &d2 otherwise your modem may not hang up the
         line when you have finished your call.

         From yet another user: The best I've got so far for the Zoom
         14.4X is AT&F0W0&C1&D2%C2

         &F0 (manufacturer's defaults, so we know where we are)
         W0 (limit the messages coming from the modem)
         (W1 gives lots of messages from the modem but causes problems
         for some people)
         &C1&D2 (for hardware flow control)
         %C2 (enable V42 bis but not MNP5)



    12.19.    Zyxel
    ===============

         From one of our users again:

         The following "dial_cmd" is for a Zyxel U-1496E+ modem

         "ATL2N1X7&G2*E1DT"
         L2 --- sets a low (but not inaudible) speaker volume
         N1 --- sets a low (but not inaudible) ringing volume
         X7 --- sets result code options so that the "connect" message
         is, for example, "CONNECT 14400/Arq/V42b"
         &G2 -- enables 1800 Hz guard tone
         *E1 -- terminate call if error control negotiation fails, ie.
         insist on error-control or end call
         DT --- dial using DTMF tones



13.  Testing
===========

          To test out your setup you could try using ping.  ping
          gate.demon.co.uk whilst logged on directly to gate should
          return a speed of about 270ms on a fast link down to 1000ms on
          a slow link.

          Try using ftp to ftp.demon.co.uk and downloading files from
          /pub/test.  There are files of varying contents that have also
          been compressed in various ways.  "empty" files are there so
          that you can test the maximum throughput on blank data.  "full"
          files contain a thorough mix of characters and so little
          compression by your modem will be possible. "regular" files are
          a mixture - just like this document or a Usenet news message.
          Each of these three have been compressed using popular methods
          and so you can try working on the compressed files as well if
          you like.  Try uploading these files to
          ftp.demon.co.uk:/incoming to test the link in that direction as
          well.

          Using a V.32bis modem, the maximum throughput you are likely to
          get on a binary file is 1,600 cps.  On an ASCII file the
          maximum is about 2,800 cps.



14.  Finally
============

          Please try to sort out your setup by following the above
          advice.  If you are still stuck then telephone the support line
          on 0181-371 1010 during support hours to see if further help
          can be offered.  Full support line details are available in
          /pub/doc/Welcome.txt.
