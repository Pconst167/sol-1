From vistachrome.com!andy@cyan.vistachrome.com Sat Jan 23 10:43:12 1993
Received: from relay1.UU.NET by relay1.geis.com with SMTP
	(15.11/15.6) id AA05664; Sat, 23 Jan 93 10:43:12 est
Received: from uunet.uu.net (via LOCALHOST.UU.NET) by relay1.UU.NET with SMTP
	(5.61/UUNET-internet-primary) id AA10185; Sat, 23 Jan 93 10:40:33 -0500
Received: from cyan.UUCP by uunet.uu.net with UUCP/RMAIL
	(queueing-rmail) id 103724.3730; Sat, 23 Jan 1993 10:37:24 EST
Received: by vistachrome.com (4.1/SMI-4.1)
	id AA14654; Sat, 23 Jan 93 10:17:39 EST
From: andy@vistachrome.com (Andrew Finkenstadt)
Message-Id: <9301231517.AA14654@vistachrome.com>
Subject: Coherent FAQ
To: andy@genie.geis.com
Date: Sat, 23 Jan 1993 10:17:38 -0500 (EST)
X-Mailer: ELM [version 2.4 PL20]
Content-Type: text
Content-Length: 59572

From: mike@array.com (Mike Willett)
Date: 23 Jan 93 01:57:43 GMT
Newsgroups: comp.os.coherent
Subject: Coherent FAQ, General Information



A N  I N T R O D U C T I O N  T O  T H E  C O H E R E N T  F O R U M :

    Comp.os.coherent (Usenet) / Coherent list on ListServ@IndyCMS
                               Rev. 2.3


         A N  I N T R O D U C T I O N  T O  C O H E R E N T

      General Information FAQ for the Coherent Operating System

                          C O N T E N T S :


               What is Coherent?
               Will Coherent run on my system?
               What incompatibilities are known?
               Can I still run DOS?
               What about technical support?
               What revision is Coherent?
               How many people run Coherent?
               Can source postings be made in this newsgroup (comp.os.coherent)?
               Public domain software:
               Where do I get the public domain software?
               Heated discussions of the group:

               MISC:
               Disclaimer:
               Trademarks:


          A N  I N T R O D U C T I O N  T O  C O H E R E N T
-----------------------------------------------------------------------
WHAT IS COHERENT?
    Coherent is a multi-tasking, multi-user operating system for IBM
    PC's and compatibles.  It will run on most systems with a 286,
    386, or 486 CPU. Coherent closely represents the Unix operating
    system, but, it is not Unix.  Coherent appears to be very similar
    to Version 7 Unix, or for those of you that have not had the
    pleasure, close to System 5 Unix. Coherent includes uucp (Coherent
    to Coherent Copy) :) and many more functions you would expect with
    Unix. Coherent is small and simple, easy to maintain, and does not
    require extensive CPU resources to operate well. It does not have
    network nor X windows support, and does not require an AT&T
    license for Unix. It is as advertised, a quick, elegant Unix-like
    multi-tasking, multi-user Operating System, with good
    documentation.

WILL COHERENT RUN ON MY SYSTEM?
    Coherent runs on just about all 286-386-486 systems.  To list them
    here would make this document far too lengthy.  It is suggested
    that if you are in doubt, buy Coherent, and when it is almost
    beyond a doubt that you can not run Coherent on your machine, to
    return the software and documentation to the the Mark Williams
    Company within 60 days for a full refund as per their policy.

WHAT INCOMPATIBILITIES ARE KNOWN?
    IBM XT compatibles will not work, since the Coherent version 3.2
    operating system uses the 286 protected mode.  Coherent version
    4.0 only works on 386 or 486 proccessors and operates in the 386
    protected mode.

    Coherent will not run on an AT&T 6300, IBM PS/2 model, or with the
    Western Digital WD1004-27X (XT) or other XT controllers.  Coherent
    exhibits a slight problem with some 386 AMI BIOS, whereas Coherent
    requires a cold boot (hit the reset switch, not CTL- ALT-DEL) to
    boot Coherent after previously running DOS. The latest revisions
    of the AMI BIOS may not exibit this problem.

CAN I STILL RUN DOS?
    Yes, Coherent can reside on a disk partition separate from DOS,
    and likewise DOS on a partition separate from Coherent.  You can
    boot either one at boot time via a "boot strap" program.  They
    will not run concurrently however. DOS file systems are available
    to Coherent with the Coherent DOS command, so files can be
    transferred from DOS to Coherent, Coherent to DOS.

WHAT ABOUT TECHNICAL SUPPORT?
    It is generally felt that Mark Williams Company provides excellent
    technical support of their software within the U.S.A..  They can
    be reached via phone (708) 291-6700, or email:

    uunet!mwc!support       (General uucp address)
    support@mwc.com         (Internet address)
    mwcbbs!support          (from your system directly to the uucp connection
                             they provided by the Mark Williams Company)

WHAT REVISION IS COHERENT?
    Coherent is offered in two revisions.  Revision 3.2 will run on
    systems with a 286 or higher processor, but does not take
    advantage of the 386 architecture, and has the 64K executable and
    64K data limits.  Revision 3.2 is the last revision of Coherent
    for the 286 protected mode OS. Bug fixes will continue to be
    posted to mwcbbs to support customers of the 3.2 version.

    COHERENT 4.0 was announced in May of 1992, and is targeted for the
    386 and 486 processors.  This revision does not have the 64K
    limits of revision 3.2, but, still does not include a virtual
    memory system that swaps pages out to disk. See the 4.0 specific
    FAQ posted with this FAQ for more information.

    Both versions of OS are available at $99.00, and updates from 3.2
    to 4.0 are now priced at $79.00.

HOW MANY PEOPLE RUN COHERENT?
    The Mark Williams Company has stated that the sales volume has
    passed 40,000 copies since its introduction to the market in 1990.

CAN POSTINGS BE MADE IN THIS NEWS GROUP (COMP.OS.COHERENT)?
    It is somewhat accepted that source for Coherent will be posted in
    this news group occasionally.  Keep in mind that large postings
    cost money to those that pay for telephone and connect time, so
    perhaps a short posting to query general interest should precede
    the posting. Direct mailing should be used if there is small
    interest, and a posting to archive sites such as raven.alaska.edu.
    If the interest is overwhelming, a posting to this news group may
    be in order, along with posting to an archive site such as
    raven.alaska.edu. Posting to this newsgroup has been a topic of
    constant debate...  :( We hope to have a source news group for
    coherent, yet another topic of debate...  :)

PUBLIC DOMAIN SOFTWARE:
    Several public domain packages are available for use on a Coherent
    machine.  These range from improved mailing packages and spread
    sheets, to at least four news programs, such as bsnews, cnews,
    gnews, wnews, along with readers such as rn, tass, tin and more.

WHERE DO I GET THE PUBLIC DOMAIN SOFTWARE?
    There are several ways to get public domain software:

    1. Mark Williams Company bbs (mwcbbs)
    2. FTP sites
    3. Mailserver (ListServ@IndyCMS)
    4. The OZ / NZ Coherent Users Group
    5. The Pacific Australian Coherent Users Group

    MWCbbs (mwcbbs)
    Access information on the mwcbbs is included in the documentation
    provided with Coherent.  In short, it is a uucp site with public
    domain software as well as updates to the Coherent release, along
    with Coherent news (not usenet) and a "home" for all Coherent
    sites to uucp to. For most of us, that is a long distance phone
    call, as the Mark Williams Company is located in Illinois.

    FTP sites:
    Jay C. Beavers has been keeping the Coherent Archives for quite
    some time on the ftp site orca.alaska.edu, and has moved these to
    an Ultrix machine for better access (raven).  When a previous ftp
    site was no longer available, Jay quickly put raven into action.
    Hats off to Jay!

    Machine            I'net Address          Archive administrator
    ---------------    -------------     ----------------------------------
    raven.alaska.edu   137.229.10.39     J.C. Beavers:sxjcb@orca.alaska.edu

            on raven: cd /pub/coherent

    MailServers:
    ListServ@IndyCMS has been offering a mailserver service since
    before the start of comp.os.coherent. It is a gateway between two
    nets:

    Machine Address                         Mailserver Administrator
    ------------------------------------    ------------------------
    ListServ@IndyCMS (CREN)                 IJBH200@IndyVAX (CREN)
    ListServ@IndyCMS.IUPUI.Edu (Internet)   IJBH200@IndyVAX.IUPUI.Edu (I)

    Coherent@IndyCMS is bidirectional gateway between the ListServ
    list Coherent and Usenet newsgroup comp.os.coherent co-owned and
    coordinated by John Harlan and Phil Corporon.  All original
    postings to comp.os.coherent Usenet group are automatically
    distributed to the ListServ list, and everything posted to the
    ListServ list Coherent, is automatically posted to
    comp.os.coherent on Usenet.  John Harlan humorously adds: "And all
    without mail looping :-)"

    To get a list of Coherent files from ListServ, mail the ListServ
    mailserver as follows, with the contents of the message being the
    mailserver command:

                    % mail ListServ@IndyCMS.IUPUI.Edu
                    Subject: (none)

                    INDEX COHERENT

    Privately Owned BBSs:

        The Australian Coherent Users Group:
        (From: rjl@spectre.pub.uu.oz.au.)
        In order to support Coherent users in oz & nz, Mark Williams
        Co. have agreed to supply a mirror of the downloads directory
        from their uucp BBS in the states for distribution here [in
        Australia]. This is being supplied to the Australian Coherent
        User Group, initially in one 13MB chunk to get things kicked
        off, then subsequently updated on a monthly basis.

        Software is available to all registered Coherent users, and
        may be obtained either by direct UUCP transfer from this
        machine, or on 1.2MB floppies for a nominal media/postage
        charge.

        Anyone interested in this, or in ACUG in general, (as well as
        in APANA - the Australian Public Access Network Association)
        may contact me by email at rjl@spectre.pub.uu.oz.au.

        Australia-Pacific Coherent User Group.
        (Robert Chalmers. d10590@tanus.edu.au. Mackay, Queensland. Australia)
        ---------------------* ao zhong youyi wan sui *----------------------
        Privately operated public uucp site, based in Mackay, North
        Queensland,  Australia.  The system connected 24 hours a 7
        days a week, apart from some down time for maintenance.
        Purely Coherent system.  Technical: 386-25DX, 4Mb RAM, 130Mb
        IDE HDD. 1 x 1.2, 1 x 1.44 FDD.  Maestro 2400ZXR Modem.
        Wangtek Tape Drive.(not yet working).Cannon BJ330 bubble jet.
        Version 4.00 Coherent. Mono.

        Support: Robert can pass on internet fixes and messages to
        local users, such as this FAQ, and is a MIRROR site for MWC,
        receiving thly updates from MWC.  Can supply elm, tin and
        wnews red.

        Contact details:  (There are no fees or subscriptions involved.)
        APCUG nanguo!root   (AUS)
        UUCP mwcbbs!nanguo!earth  (USA)
        UUCP nanguo!root  +61 79 521070 AEST:24 Hours. in:nuucp rd:uupublic
        MYNAME=bbsuser in your Permissions file.
        Info is in ~/INFO

               Home address: 22 Minster Street.
               Mackay. 4740
               Queensland. Australia.    ( The Coral Coast )

        Currently the site supports uucp using a chat script exactly
        the same as the mwcbbs chat script listed in their manual.
        The public directory is really /usr/spool/uucppublic. The
        default directory is available for incoming material and the
        INFO file, which contains most of the details concerning me
        and the site.

        Direct login is also available using the following login and
        passwd. login: public passwd: coherent

        This is a public user area, mostly used by my students
        locally, but you are welcome to log in and leave mail. (mail
        root).  Modem details are: 2400 N81. (v22bis). Please note
        that you MUST have MYNAME=bbsuser in the Permissions file for
        site nanguo and uucp, or Coherent will return a site unknown
        error.  Even if you only uucp mail to me, mail nanguo!root,
        all are welcome to use these facilities for the exchange of
        information.
                                                            Bob Chalmers.

HEATED DISCUSSIONS OF THE GROUP:
    Mark Williams Company has a patent on bit ordering, which is a
    software patent.  Most think that this is obvious art in software,
    and should not be patentable, not to mention a move in the
    software world (i.e., FSF) that "software" should not be
    patentable in the first place.  The Mark Williams Company has
    committed to comment on this some time in the future.

DISCLAIMER:
    ANY REFERENCE TO THIS ARTICLE, IN ANY FORM, IS PURELY AT YOUR OWN RISK!
    All opinions, tips, and instructions in this article are those of
    the contributors, and not of any company associated with the
    individual contributor, or any company mentioned in this article.
    The information contained within is not guaranteed to be free of
    errors in any way.

    The intention of this note is only to inform curious usenet
    readers about some aspects of the operating system of Coherent,
    and those companies mentioned are encouraged to add corrections,
    additions, or suggest deletions to this note to as per their
    policy or willingness to provide positive criticism.

TRADEMARKS
    Unix is the trademark of AT&T / Unix System Laboratories, Inc.
    Coherent is the trademark of the Mark Williams Company.





















































--
-------------------------------------------------------------------------------
mike@array.com              So much fun, so little time to enjoy it....
-------------------------------------------------------------------------------
From: mike@array.com (Mike Willett)
Date: 23 Jan 93 02:42:27 GMT
Newsgroups: comp.os.coherent
Subject: Re:Coherent FAQ, General Information

After a long dry spell of my postings not making it out, here
are the FAQs.  I realize I am less than punctual about posting
these, but, after my upstream site changed news host names,
not posting one made it out of here for nearly 3 months.  We
are not what you would call a high volume site, although
incoming is usually near 40 megs a day, our outgoing doesn't
make it past two or three postings a week.  My last posting
from an Internet host was unusual.  Since I pay $$$ for time
on that host I never read news there, and so I never had an
idea that my postings never made it upstream.  However, I
have always verified that they were going to my site
(minuet.omc.com) which is a down stream leaf node, and so I
thought all was well.   It wasn't.  So if you are reading
this, the FAQs should again start coming out in a semi-punctual
manner, well, maybe even more punctual manner.

The current FAQs are at REV 2.3.  When I make a change to any
FAQ, all the REVs roll to reflect them as a "set".  This set
had some formatting corrections and some input from Robert
Chalmers is OZ.  I appreciate the updates and corrections!

I have received some offers for help with the FAQs, and I have
forwarded my ideas to those people.  I hope the quality and
consistancy of the FAQ can be improved with a second set of eyes
and effort.

						--Mike
--
-------------------------------------------------------------------------------
mike@array.com              So much fun, so little time to enjoy it....
-------------------------------------------------------------------------------
From: mike@array.com (Mike Willett)
Date: 23 Jan 93 01:59:38 GMT
Newsgroups: comp.os.coherent
Subject: Coherent FAQ Features and Sales Information for 4.X







                Features Overview FAQ for Rev 4.X

                          FAQ Rev. 2.3

  Comp.os.coherent (Usenet) / Coherent list on ListServ@IndyCMS


Coherent Overview and Features:
---------------------------------
COHERENT exists as two revisions. The 4.0.X revision supports the
386/486 architectures, and revision 3.X.X supports the 286 archi-
tecture.

Coherent 4.0 capitalizes on the 386  and  486  architecture,  and
Coherent 3.2 allows users to run Coherent on the 286 architecture
as well as 386 and 486 CPUs, but, is limited to 64K  memory  seg-
ments.

COHERENT 4.0 FEATURES OUTLINE:
------------------------------
- 32-bit flat address space (386 native mode).
- Virtual consoles and multi-session support.
- Support for third-party C++, COBOL, FORTRAN and BASIC compilers.
- Monolithic K&R C compiler with in memory temp files (it's fast!).
- Fully documented assembler supports conditional assembly, listings and
  assembly time variables.
- Optimizing linker.
- Terminfo support.
- Record locking.
- Enhanced buffer cache.
- New async driver supports up to 32 ports.
- over 200 UNIX commands,
- Bourne and Korn shells
- vi, MicroEMACS, sed, ed
- 386 assembler, awk, lex, yacc, m4
- linker, archiver, assembly language debugger, make
- UUCP, ckermit
- ar, cpio, tar, compress, uncompress, zcat
- nroff, troff with LaserJet and Postscript support.
- Many Berkeley utilities
- International and user-definable keyboard support.
- Improved DOS utilities support DOS 5.0 filesystems.
- Built-in support for multi-user cards made by ARNET Corp.,
  Comtrol Corp., Connect Tech, DigiBoard, GTEK, Sea Level Systems
  and other third party vendors.

INSTALL NOTES/MORE on FEATURES:
----------------------------
COHERENT 4.0  The entire distribution consists of 6 floppy disks and
installs in under 1 hour. (Possibly longer for most of us)

COHERENT will run on machines with 1MB of RAM and 20MB hard disks.  The
more ram and disk you have, the better it runs.

COHERENT 4.0 runs on most 386 and 486 ISA/EISA based IBM compatible
computers. 8 bit SCSI from Future Domain and Seagate are supported, as
are IDE, RLL, MFM, ESDI and Perstor hard disk controllers. 16 bit
controllers such as the Adaptec 154X, DPT Smart Connex SCSI host adapter
(WD emulation) and the DPT Smart Cache Plus EISA 16 bit bit (WD emulation).

Future support will include the Always IN2000 and the Future Domain 16 bit
SCSI host adapters.

COHERENT 4.0 requires a minimum of 1 MB of RAM and will support systems with
up to 16MB of RAM.  It works with monochrome, CGA, EGA, and VGA/SVGA displays.

COHERENT's kernel is around 100K.

COHERENT 4.0's new features is a development system which produces System V
Intel BCS compliant COFF binaries that run on many other compliant PC UNIX
systems, such as The Santa Cruz Operation's (SCO) SCO UNIX System V/386
Version 3.2.2, a licensee of AT&T's System V UNIX.

COHERENT 4.0's development tools include an optimizing C compiler, a new
optimizing linker, and versions of lex, yacc, awk, make as well as termcap,
terminfo and curses.

COHERENT 4.0 also comes with a new 386 macro-assembler.  The assembler is
fully documented and supports conditional assembly, listings, and assembly
time variables.

COHERENT 4.0 also contains versions of the traditional UNIX text processing
utilities, nroff and troff, along with support for the LaserJet(PCL) and
PostScript.

COHERENT comes with UUCP, ckermit and kermit.

COHERENT's administrative commands include several archiving utilities,
a Bourne shell, a Korn shell, System V style cron, virtual console
support, on-line manual pages and many of the popular Berkeley utilities.

COHERENT 4.0 has built in support for multi-user cards made by ARNET Corp.,
Chase Research, Inc., Comtrol Corp, Connect Tech, Inc., DigiBoard, GTEK, Inc.,
Sea Level Systems, Specialix Corp., Sritek, Inc., and Stargate Technologies.

COHERENT SALES CONTACTS:
------------------------
Mark Williams Company continues to make every effort to keep  the
price  of  COHERENT  down  and  to provide customers with maximum
value.  COHERENT 4.0 costs $99.95.  This price includes unlimited
free  technical  support,  an  unlimited user license, and a 1200
page manual.  Registered users can upgrade to COHERENT  4.0  from
COHERENT  3.2 for $79.95.  COHERENT 4.0, and the COHERENT 4.0 up-
date, are available from the Mark  Williams  Company,  60  Revere
Drive, Northbrook, Illinois, 60062, United States of America.

(If ordering, tell us the size of your 'A' drive.  Update  custo-
mers are required to also include their serial number.)

Phone; 1-800-627-5967 or..   1-708-291-6700 Fax;   1-708-291-6750

For Sales Literature or electronic ordering, e-mail complete mailing
address to...  sales@mwc.com or uunet!mwc!sales

For specific technical information, e-mail... (No literature sent.)

support@mwc.com or uunet!mwc!support Compuserv; 76256,427 BIX; join mwc

Internet Forum; comp.os.coherent

COHERENT is a registered trademark of the Mark Williams Corporation.
Intel386 is a registered trademark of Intel Corporation.
UNIX is a registered trademark of UNIX System Laboratories, Inc.
SCO is a registered trademark of the Santa Cruz Operation.



--
-------------------------------------------------------------------------------
mike@array.com              So much fun, so little time to enjoy it....
-------------------------------------------------------------------------------
From: mike@array.com (Mike Willett)
Date: 23 Jan 93 02:01:37 GMT
Newsgroups: comp.os.coherent
Subject: Coherent FAQ, Technical Info for Version 3.2







       T E C H N I C A L  T I P S  F O R  C O H E R E N T  3.2

              Technical Tips FAQ for Rev 3.2 of Coherent

    Comp.os.coherent (Usenet) / Coherent list on ListServ@IndyCMS

                             FAQ Rev. 2.3


               C O N T E N T S :
               -----------------
               Modem devices:
               Remote logins:
               Fast modems:
               Simultaneous users:
               Usenet news software:
               Email packages:
               The 64K question:
               Compiler hints:
               Hardware configurations:
               Termio hints:
               Curses:
               More uucp:
               How to create a bootable >>>R/W<<< floppy from Coherent:
               Master Boot Reinstallation:
               Line Printer Help:
               Moving data from a Sun to Coherent:
               Multi-Volume Archive:
               SCSI MKFS Notes:
               DOS to Coherent:
               Uuinstall Bug Help:
               Xwindows:
               Tar Help:
               Setting Boot Partition: DOS or Coherent?
               A Backup Script:

               MISC:
               Disclaimer:
               Trademarks:

                     T E C H N I C A L  T I P S :
-----------------------------------------------------------------------

MODEM DEVICES:
Q: What devices should I use with a modem for dialing in / dialing out

A: For dialing in you should use a device with modem control. For example
   com1r or com2r. That is important to ensure that when the calling site
   dropped carrier, that also at your site SIGHUP is sent to already running
   processes, to ensure that the modem hangs up (dropping DTR) and a new
   getty is opened on that port to enable further logins.

   For dialing out or local terminals you do not need modem control
   Also you do not have to worry about cabling problems, just use some
   of those null modem cables available in most computer stores.

REMOTE LOGINS:
Q:  How do I enable logins via modem to my machine:

A:  I assume that modem is set to AUTO-ANSWER (ATS0=1) and the cabling
    is ok.
    Edit the file  /etc/ttys. Here an example for com2:

    0rPcom2r

    0            = not yet enabled (enable = allow login, run getty)

    r            = remote access   (will enable asking of a password
                                    for remote-access (see /etc/passwd)
                   Why ? System security, additional password

    P            = speed (your modem is connected to the computer)
                   P = 9600 Baud, I use this for my Telebit Modem

    com2r        = device with modem control, when CARRIER is lost it
                   will sent SIGHUP to all processes running on that
                   line and will also drop DTR so a modem hangup or
                   a modern modem does a hardware reset.

     Now type the following:
     enable com2r    (for Coherent 3.2 that's enough)
     kill -1 1       (Coherent 3.0.0 or 3.1.0, Process INIT will start
                      a getty on com2r)

FAST MODEMS:
Q:    Can I use fast modems with Coherent 3.2?

A:    Yes you can. But you must think about the following:

      a) maximum  Baud rate between modem - machine is 9600 Baud
         (Coherent as a multiuser/multitasking environment is
          not fast enough for 19200 Baud)

      b) cps-rates in transfer depend on modem/method

         calling into my machine (T2500) with a USR, using sz for transfer:
                   480 cps to 600 cps (compressed, uncompressed files)

         calling out with uucp (T2500):
                   860 cps

         The rate may differ if you use a slow 286 or 386. The above results
         were yielded with a 386/33.

SIMULTANEOUS USERS:
Q:    I want to use Coherent 3.2 as a multiuser operating system. How many
      users can work with it at the same time ?

A:    Now 11 User:
      console   : 1
      com1      : 1
      com2      : 1
      Multiport : 8
      --------------
                 11

USENET NEWS SOFTWARE:
Q:    Is there any Net-News Software for Coherent ?

A:    Yes, there are several packages available:

       CNEWS  -  the famous package
         difficult to install (although there is a nice installation
         script in the Coherent version). Only for advanced users !
         Has no reader !

       WNEWS 3.0  -  News for MINIX, ported to Coherent
         based on BNEWS - small, not bad
         Has no reader

       rn
          the well known newsreader

       tass
            curses based newsreader. Nice, but you should not have
            too much groups or articles in /usr/spool/news.

       bsnews
          small news package for receiving news via email

        and others...

EMAIL PACKAGES:
Q:    I do not like Coherent's mailer. What can I use instead of it ?

A:    WMAIL 3.63  -  a minix port, MAILX-clone

      comb 1.29   -  curses based mailer, nice interface

      You should ensure that in both cases you have smail 2.5 as
      a smart-mailer that understands domain addresses.
      smail 2.5 is already in Coherent 3.2

THE 64K QUESTION:
Q:    Does Coherent really have a 64 kb limitation ? I want to port
      the GNU-C-Compiler and compile big programs.

A:    Coherent programs are limited to 64 K for code and 64 k for data
      and stack. The limit is not in the compiler, it's in the kernel
      or at least in the actual system design. No process can exceed this
      limitation.
      But Binaries in Coherent are about 40 % smaller so big programs
      for "Real-UNIXES" may also be portable

COMPILER HINTS:
Q:    I write a C-program that seems to be ok but it still core dumped.
      Is this a compiler error ? Is my program wrong ?

A:    If a program needs a lot of space for local data (resided on the
      stack in most cases) then the maximum size for the stack may be
      exceeded and your return addresses or other important things were
      overwritten.
      With the program fixstack you can increase the size for the stack
      (and also cut the space for data)
      Try size my_prog before and after fixstacking to see the difference.

HARDWARE CONFIGURATIONS:
Q:     What hardware (Motherboard, hard disk) do I need for Coherent ?

A:     Difficult question. Minimum is a AT 286 with 640 KB RAM and a
       hard disk (MFM,RLL,ESDI,SCSI (some), IDE (some)) with at least
       10 MB free disk space.

       Nevertheless Coherent is not the fastest operating system, so
       a 386 with at least 25 MHZ and 4 MB RAM and a fast hard disk
       (a hard disk is always too small !!!!) is the minimum config-
       uration for a usable multi-user-operating.

TERMIO HINTS:
Q:    I compiled a program that uses termio but it did not work.

A:    The termio in Coherent (at least 3.1.0 and the first 3.2.0) did
      not work in all cases. So try the sgtty, that works fine.
      When porting programs try to find the -DBSD-parts. There you will
      find in most cases the sgtty-parts you need for porting.

CURSES:
Q:    I compiled a program that uses curses but the screen sometimes get
      garbled or the machine seems to hang

A:    Maybe you still have an old libcurses.a. Replace it with a newer
      copy.

MORE UUCP:
Q:    I often loose email or files after receiving them with UUCP.

A:    Try to get the newest UUCP-update from MWCBBS. The old packages
      still have some problems. Check the permissions, at least for example
      with comparing them with those on your original diskettes.
      Check also the permissions of the needed directories.
      In /usr/spool/uucp/Logs./uucp-program you will find the "hints" of the
      "uucp-program" (uucico, uucp, uux,uuxqt) what goes wrong.
      In Coherent 3.2. you have the program uucheck that will check your
      uucp-installation and is also able to "fix" problems. But you have to
      run it twice if you run it as root because the first time it creates
      the needed directories and the second run sets the correct permission.

Q:    I am having a problem connecting to uucp sites not running Coherent
      after updating to Coherent 3.2.  The error looks like a parity
      problem, with an {expect} / {actually got} output like:
        uu315323t 342og310n:   (With backslashes before the numbers)

      Again, get the latest UUCP package from MWCBBS.  The 3.2 Coherent
      release may exhibit a parity problem which is cured with the latest
      uucp release.

HOW TO CREATE A BOOTABLE >>>R/W<<< FLOPPY from Coherent
        From: Peter Fillingham  fillingham@att.com
The COHERENT Operating System Release Notes (Release 3.1.0) along with
the  main  manual  suggest  ways  of  creating a bootable floppy.  One
difficulty of this procedure  is  that,  after  producing  a  bootable
floppy,  one  can't  write  to  it !  The following shell programs are
suggested as a way making a bootable floppy,  and  below  is  the  fix
recommended by mwc for making the bootable floppy system read-write.

    (0) first boot your system from your hard disk, login in as  root,
use  mkdir to make a convenient subdirectory [e.g., /bin/temp ]. cd to
/bin/temp. Place disk #1 of your mwc original floppies  in  drive  A:,
then enter

        dd if=/dev/fha0 of=cohboot count=80 bs=30b

Run it in the background if you wish [follow the above line with an &;
use  ps  -axfl  if  you  are curious].  This will take just over three
minutes depending on the speed of your system.  What is  going  on  is
that  dd  is  creating  an  image  of  your boot floppy in you default
directory with the file name cohboot. When it finishes, remove the mwc
original floppy, and insert a blank disk.

(1) Next run the following shell program:

        echo "/etc/fdformat -v /dev/fha0"
        /etc/fdformat -v /dev/fha0
        echo "/etc/badscan -o proto /dev/fha0 2400"
        /etc/badscan -o proto /dev/fha0 2400

    Run it in the background if you wish; it  takes  time.   The  echo
    lines  simply  display each command line just before it is carried
    out to tell you what is going on.  The  second  and  fourth  lines
    format  the  floppy  and  check  for bad blocks, respectively.  In
    addition,  a  file  (proto)  is  being  built  in   your   default
    subdirectory.   This  file  will contain a list of the bad blocks:
    look for a line with %b in it. Probably it is best to use  only  a
    floppy with NO bad blocks: so try until you find one.

    (2) make sure you have a subdirectory /f0 on your hard disk;
        if not, use mkdir /f0.

    (3) Next run the following shell program:

        echo "/etc/mkfs /dev/fha0 proto"
        /etc/mkfs /dev/fha0 proto
        echo "cp /conf/boot.fha /dev/fha0"
        cp /conf/boot.fha /dev/fha0
        echo "dd if=cohboot of=/dev/fha0 count=80 bs=30b"
        dd if=cohboot of=/dev/fha0 count=80 bs=30b
        echo "/etc/mount /dev/fha0 /f0"
        /etc/mount /dev/fha0 /f0
        echo "cd /f0 "
        cd /f0
        echo " DONE but f0 still mounted !"

    The second line produces the file system on the floppy  using  the
    information  from  file proto.  The fourth line copies boot.fha to
    the floppy.  The sixth line transfers the  image  of  your  system
    boot  floppy  to  your newly formatted disk (note all these things
    take time). Finally, the floppy is mounted so that while you  have
    booted  from the hard disk and have root permissions you can write
    to the floppy. The last line simply rings the bell and  tells  you
    it is done.

    (4) next (noting that your default directory is /f0, i.e. the
          floppy disk) enter:

          mv begin autoboot
                then enter
          db coherent
                then enter
          ronflag
                the response is
          ronflag=001
                then enter
          .=0
                then a response appears
          ronflag=000
                then enter
          :q
                and you should get back your prompt.

    (5) Finally while the floppy is still mounted, cp over  your  most
        useful  programs  to  the appropriate directories (e.g., vi or
        me, du, df ...) Lastly umount f0, shutdown, sync and boot your
        writable floppy.

MASTER BOOT REINSTALLATION:
            From: doug@mwc.com (Doug Peterson)
    I want to upgrade the DOS partition from MS-DOS 3.3 to 5.0, and the
    installation program refuses to work with the Coherent master bootstrap
    program. It no longer asks for the ability to boot Coherent!

    The problem specifically is caused be Microsoft's faulty update install
    procedure. They assume you have no other operating system on the
    computer.

    When the 5.0 update install is run, the procedure archives the original
    master boot block of the hard drive and rewrites a brand new one.
    Problem is, it takes Coherent's master boot along with it. To restore
    the master boot is very simple:

    Use dos 5.0 fdisk to change the active partition to COHERENT. Reboot.

    Use COHERENT's fdisk utility with the -b option to rewrite a new master
    boot. Specifically; fdisk -b /conf/mboot /dev/at0x <ENTER>

    Once completed, you can now boot either system no matter which one is
    active or inactive.


LINE PRINTER HELP: From: dave@uvm-gen!pete (Dave Peterson)
    I have my printer hooked up to lpt1 and cannot get any output.  I have
    checked my files, but, no luck.  What's the problem?

    1) ls -li   ( The i will list the inode number, this will tell you where
                  you have linked /dev/lp to. )

    2) ln -f /dev/lpt2 /dev/lp  ( link to lpt2  IBM and MWC number the ports
                               differently thus lpt2 is the first printer )
                               [ you need to be root or bin to do the link ]

    This is a partial listing of my /dev directory note the first number is
    the inode number.  I have linked lp to lpt2.
      174 c-w--w--w-  2 bin        bin          3   1 Mon Nov 25 17:36 /dev/lp
      101 c-w--w--w-  1 bin        bin          3   0 Fri Apr 27  1990 /dev/lpt1
      174 c-w--w--w-  2 bin        bin          3   1 Mon Nov 25 17:36 /dev/lpt2
      173 c-w--w--w-  1 bin        bin          3   2 Fri Apr 27  1990 /dev/lpt3

    As a final point when you send data to /dev/lpt2 use pipes not redirection.
    Try cat (file) | /dev/lpt2  it works for me.

MOVING DATA FROM A SUN TO COHERENT:
                    (From: PINEAU@uqac.uquebec.ca (Louis Pineau))
    First, the floppy have to be formatted whether on the  sun  or  on
    the  Coherent  system  (with fdformat /dev/rfd0c on the sun). Once
    the floppy is formatted, there is no need to reformat or  mkfs  it
    for the life of the floppy or until something unusual happens.

    To write and read the floppy, on both system (sun and coherent), I
    use  the  command  "ustar"  since it can handle multi-volume files
    (files that are too large to fit on a single floppy).

    Thus, on the sun, I do:
      /usr/5bin/ustar -cvf /dev/rfd0c file [files ...]    to write on the floppy
      /usr/5bin/ustar -tvf /dev/rfd0c                     to list the floppy
      /usr/5bin/ustar -xvf /dev/rfd0c [file ...]          to read the floppy

    On my coherent  system,  I  use  the  same  commands  without  the
    /usr/5bin  prefix  and with the proper floppy device (/dev/fva1 on
    my system).

    I know that there is a way  to  read  or  write  ms-dos  formatted
    floppy  but  in  order  to  mount  or unmount the floppy, you must
    become superuser.

MULTI-VOLUME ARCHIVE: (From: jr@connie.de.convex.com (Joachim Riedel))
    I'm trying to archive a 5 mb file (which is  itself  a  compressed
    cpio file) from hard disk onto floppy disk (fva1). I've tried cpio
    and tar and even pax directly but cannot get past one volume.

    Use the raw device (i.e. /dev/rfva1 ) instead of the device  fva1.

SCSI MKFS NOTES: Answer From: stephen@mwc.com (Stephen Davis)
    I am trying to add a second scsi drive to my  system.   mkfs  will
    not accept a proto file.  What do I do?

    You do not badscan a SCSI drive. Instead of giving  mkfs  a  proto
    file, you give it the total number of blocks in the partition. The
    number of blocks is listed in the partition table under f-disk.

DOS TO COHERENT:
    Q: The question is, is it possible to read DOS-format 360KB-diskettes?

    A: yes it is :-)   From: lvds@tfpbbs.uucp (Laurent Cas)

    Here is the device type reference table:
    Device name  Sectors/track  Heads  Sectors  Bytes   Format
    /dev/f9a0          9          2      720    360 KB   5.25"
    /dev/fqa0          9          2     1440    720 KB   3.5"
    /dev/fha0         15          2     2400    1.2 MB   5.25"
    /dev/fva0         18          2     2880    1.44 MB  3.5"

    If your 360KB drive is 'A:' (MSDOS reference) you  can  do  dos  t
    /dev/f9a0  to  list  your  disk, or if your 360KB is 'B:' you will
    have to do dos t /dev/f9a1

    drive A is number 0 and drive B is number 1 ; same for  partitions
    on your hard disk...

    Cheers, Laurent.

UUINSTALL BUG HELP: (From norm@mwc.com)
    Using Coherent 3.2, I run UUINSTALL, upon exiting, I am back at my
    prompt,  but,  the  system  hangs.  the  only way to restart via a
    reboot.  Is this problem specific to 3.2 or is it something I have
    possibly done?

    This is a bug in the 3.2.0  release  of  uuinstall.  Occasionally,
    upon  exiting,  it leaves your terminal in "raw" mode.  The Errata
    sheet which is included with 3.2 releases mentions this, as far as
    I  know.   To fix your terminal after exiting uuinstall, enter the
    following (note that <ctrl-J> is the control key plus  the  letter
    J):

            <ctrl-J> stty sane <ctrl-J>

XWINDOWS:  (From doug@mwc:)
    From time to time,  we  get  people  asking  about  X  windows  on
    Coherent.  Many  new entrants into the field of UNIX have probably
    heard of the popular UNIX graphics interface called X-WINDOWS.

    X-WINDOWS was developed by MIT. To the best of our knowledge  they
    still  hold  the rights to the source code and it is in the public
    domain.

    To the best of our knowledge, the source code takes  up  110mb  of
    disk  space!   The  binaries,  an  additional  12 - 20mb's of disk
    space. It requires TCP or Streams support, neither of which is  in
    COHERENT.

    X-windows it seems, has become somewhat of a popular GUI for  UNIX
    in  a  very  short time. Various hardware firms have developed and
    are marketing X-workstations, servers and cards.

    On page 14 of the November 1991 issue of UNIX REVIEW, is an ad for
    X11  Release 5 for System V/386. The price advertised is $495 with
    printed manuals,  $395  without.  So,  X  is  not  cheap  via  the
    commercial route.

    Given  COHERENT  3.2's  small  model  compiler,  it  is  obviously
    impossible at this time for COHERENT to even compile the code, let
    alone run it.

Tar Help:
    The Coherent version of tar has been known to create problems  for
    users.   It  is  believed  that  the  latest  version  of  tar has
    alleviated most of these problems. Some of the  original  problems
    include  inability to read a tar archive to tar creating recursive
    inode/file loops that can only be removed  by  "clri".   The  more
    recent  Coherent releases also includes ustar, which appears to be
    much more robust.  It has been suggested to use the ustar  command
    instead of the Coherent native tar command in most cases.

Setting Boot Partition: DOS or Coherent?
    Occasionally, a user may want to boot to  Coherent  for  the  most
    part,  rather  than  come up in DOS by default.  You can leave the
    DOS partition in tact, and switch between the preferred  operating
    systems on as "as needed" basis.  To do this, simply use the fdisk
    program in either operating system and make the  partition  active
    for  the  operating  system that resides there. Reboot the system,
    (AMI Bios system owners require a hard reset) and the system  will
    now  boot to the partition made active with fdisk. For example, if
    you wish to boot DOS by default, make the first partition  active.
    If you want to boot Coherent by default, make the partition active
    that Coherent resides on.

DISCLAIMER:
    ANY REFERENCE TO THIS ARTICLE, IN ANY FORM, IS PURELY AT YOUR OWN RISK!
    All opinions, tips, and instructions in this article are those  of
    the  contributors,  and  not  of  any  company associated with the
    individual contributor, or any company mentioned in this  article.
    The  information  contained within is not guaranteed to be free of
    errors in any way.

    The intention of this  note  is  only  to  inform  curious  usenet
    readers  about  some  aspects of the operating system of Coherent,
    and those companies mentioned are encouraged to  add  corrections,
    additions,  or  suggest  deletions  to  this  note to as per their
    policy or willingness to provide positive criticism.

TRADEMARKS
    Unix is the trademark of AT&T / Unix System Laboratories, Inc.
    Coherent is the trademark of the Mark Williams Company.






















--
-------------------------------------------------------------------------------
mike@array.com              So much fun, so little time to enjoy it....
-------------------------------------------------------------------------------
From: mike@array.com (Mike Willett)
Date: 23 Jan 93 02:03:29 GMT
Newsgroups: comp.os.coherent
Subject: Coherent FAQ, Technical Info for Version 4.X







       T E C H N I C A L  T I P S  F O R  C O H E R E N T  4.X

              Technical Tips FAQ for Rev 4.X of Coherent

                             FAQ Rev 2.3





                               Help With Installation:
                    4.0 Binary compatability with other software:
                                 Compiling programs:
                        Help with serial ports and terminals:
                    Creating a Bootable Floppy for Emergency Use:





Help With Installation:     From: Bob Hemedinger <support@mwc.com>
  -----------------------
  1) I'm updating from version 3.x to 4.x and am being asked for
     a serial number from a registration card. I don't have one.

          - updating users do not need new serial numbers. Use
            the number supplied with your 3.x version. If you don't
            know what it is, read the file /etc/serialno.

  2) I'm seeing various characters in the upper right hand corner of
     my screen when Coherent boots.

          - These are used by MWC for debugging some installation
            problems. If installation fails to boot, the last character(s)
            displayed in the corner of the screen will give a significant
            clue as to where the failure occurred.

  3) I get a core dump during the installation. The last digits of the
     eip register are 2EF.

          - Call MWC for a new set of installation diskettes.

  4) I see a prepare_gift() message when Coherent boots.

          - The tertiary boot program, /tboot, is attempting to read your
            CMOS to get your hard drive parameters and other information.
            This process met with an unexpected error, usually related to
            the initialization of cache memory. If Coherent continues to boot
            and run, ignore the message. If the boot fails, try this:

                  - hit <space> when prompted by tboot to abort the
                    boot process. Type 'info' at the first '?' prompt.
                    Ignore the returned data. At the next '?' prompt,
                    type 'update' or 'begin' if updating or installing,
                    or enter the name of the kernel to boot. Follow
                    this procedure exactly. Do NOT try the 'info' command
                    more than once.

  5) When booting the installation, I come to a # prompt with a message
     displayed that I didn't boot properly and need to reboot.

          - tboot failed to pass what you typed at the '?' prompt
            to the installation program. A prepare_gift() message
            was probably displayed before this, sometimes too quickly
            to be seen unless one is looking for it specifically.
            One can either reboot and use the procedure from item #4
            (above), or type 'build' at the # prompt to install, or
            type 'build -u' at the # prompt to update from 3.x.

  6) During boot, I see a message about not being able to brelease a
     modified buffer.

          - In most cases, Coherent will continue to boot normally. In some,
            the message will scroll endlessly. This is an indication of an
            incompatible bios and is a very rare case. The Epson bios set
            has sometimes produced this problem. If at all possible, update
            the bios chips in the computer. Phoenix is the bios chipset
            MWC recommends.

  7) After installing disk #1, I reboot Coherent from the hard drive, but
     am never prompted to enter a diskette -or-, I reboot Coherent from the
     hard drive, and the system hangs with a Coherent banner message on the
     screen.

          - Thou hast most likely chosen to use either virtual consoles,
            or no virtual consoles but did select a loadable keyboard
            table. Coherent is hanging at the point where keyboard 
initialization
            takes place, indicating that the keyboard does not properly support
            IBM scan code 3. This is a different keyboard mode than DOS
            uses, and probably a good 10% of keyboards of Asian origin will
            have problems with this. Reinstallation without virtual consoles
            nor loadable keyboard tables should resolve this.

  8) All diskettes install without a hitch, but after rebooting, fsck finds
     all sorts of DUP blocks and bad i-nodes.

          - This is rare, but is usually the result of installing onto a
            large partition. This is possibly related to sector translation
            firmware and/or the manner in which the firmware deals with
            bad blocks... we don't know yet. Break the large partition into
            smaller partitions and try installation again. If this is an ESDI
            drive, and the controller is doing sector translation, try switching
            it to native mode.


  4.0 Binary compatability with other software:
  --------------------------------------------

  Coherent 4.x compiles and runs COFF executables. Third party COFF software
  will most likely run if the following conditions are true:

          - does NOT use shared memory nor shared libraries. We plan to
            implement these in the next release of Coherent. Coherent
            4.0 shared memory is not System V compliant.

          - does NOT rely on sockets nor streams. Again, we plan to have
            have at least one of these in the next release.

          - does NOT use graphics. Coherent 4.0 is strictly a text-based
            system. Again, we plan to have some form of graphics support
            in the future.

  Some examples of 3rd party software running under Coherent 4.x:
          ACUCOBOL
          Xtree
          BASIS International BBX/Progression 3 (BASIC)
          FilePro

          - For more info, please contact MWC, or email sales@mwc.com.


  Compiling programs:
  -------------------

  1) The compiler is complaining about not enough memory.

          - You may have a significant amount of memory, say 2 or 4 Megabytes,
            but one must also account for other running processes. The compiler
            by default tries to do all of its work in core (memory). If it
            aborts due to not enough memory, then add a -T0 to your cc command
            line. This will force the compiler to use temporary files on
            the hard drive, rather than in core.

  2) I'm trying to port software from a bbs or the net. Is Coherent closer to
     System V or BSD?

          - You should select System V wherever possible. We tend to
            avoid BSDisms.

  3) When compiling a package, the linker complains that getwd() doesn't
     exist. This worked under 3.x. What happened?

          - With Coherent 4.0, we have gone to getcwd() in place of
            getwd(). We have supplied _getwd() for people that need
            getwd(), but we are planning on dropping this in the
            future.


Help with serial ports and terminals:
  -------------------------------------
                  d10590@tanus.oz.au (Robert Chalmers) Coherent V4.0/4.01.
                          Thanks, Robert!

  If you follow the installation instructions, and choose their defaults,
  you will end up with a ttys file very similar to the following.

          0lPcom1l <--|
          0lPcom2l    | -- The four standard COM1, COM2,
          0lPcom3l    |    COM3 & COM4 ports. NOT CONFIGURED.
          0lPcom4l <--|    See the notes below for configuration.
          1lPmono0 <--|
          1lPmono1    | -- The terminal virtual consoles.
          1lPmono2    |    These REPLACE the V3.x's 1Pconsole
          1lPmono3 <--|     entry in that versions ttys file.
                            You dont have to touch these.

  For example, on my  system  I  have  the  following  hardware.   One
  standard HDD/FDD Controller (IDE) with COM1, COM2 and LPT1 on board,
  and enabled. These live at 3F8 - IRQ4, and 2F8 - IRQ3. LPT1 uses 378
  and IRQ7.

  One standard Taiwan Multi I/O card with 2  COM  ports,  one  printer
  port,  and  one  game port. This card can be configured as COM1/2 or
  COM3/4, and LPT1 or LPT2. I have the jumpers set for the  following.
  COM3  at 3E8 - IRQ4 and COM4 at 2E8 - IRQ3, with the second printer,
  LPT2 at 278 - IRQ5.

  Now, setting them up, as applied to this type of 2 board setup.   If
  you   are  not  sure  if  your  installation  configured  the  ports
  correctly, then follow the instructions in  the  Release  Notes  and
  Installation Guide under 'Asy' exactly as they appear, regarding the
  making of the devices.  Dont change anything. yet.  Now,  the  thing
  to  note  is  the rule on IRQs and Polling. If you are using COM2 as
  your modem port, (seems to be the most used option), and COM1  as  a
  terminal  connection,  and  both  are using IRQs, then the other two
  must be Polled. COM3 and COM4 must be Polled.  Observe  my  settings
  listed,

          0lPcom1l <--- Serial terminal on COM1. IRQ4
          1rLcom2r <--- Modem, incoming, on COM2. IRQ3
          0lLcom2l <--- Modem, outgoing (the same modem) on COM2. IRQ3
          0lPcom3pl <--- Serial terminal on COM3. Polled
          0lPcom4pl <--- Serial terminal on COM4. Polled
          1lPmono0 <-|
          1lPmono1   |
          1lPmono2   | --virtual screens.
          1lPmono3 <-|

  The Serial terminals are shown as 'disabled' in the  above  listing,
  but  when  they  are  connected, you simply type 'enable com3pl' and
  presto!, you get a login prompt on that terminal.

  In SUMMARY:
  Install with all defaults.
  Run the three configuration commands in the Asy entry.
  The asyxxx entries in your /dev directory are the prototypes for
  the comxx devices, so you can ignore them for the purposes of this.
  Decide which lines you will use, and check your IRQ/Poll combination.
  Check your physical wiring.

  For terminals, you only need three wires:

  D25 connectors. TXD to RXD, RXD to TXD, Common Ground.
          2 --> 3
          3 <-- 2
          7 <-> 7
  D9 connector. TXD to RXD, RXD to TXD, Common Ground.
          2 --> 3
          3 <-- 2
          5 <-> 5

  In the above setting, to call out on the modem, you MUST type
   'disable com2r' before you can call out  on  com2l.  When  you  are
  finished, type 'enable com2r' to put your modem back on line.

  Other things of note: Old Xt's with a com port and  any  version  of
  TELIX/PROCOMM/etc etc make good cheap terminals, as do old terminals
  that businesses throw away as obsolete.

  Windows 3.1's Terminal will emulate a vt100. If you have a second PC
  connected to a Coherent serial port, its 'almost!' like having Xterm
  running Coherent in a Term  window.  You  can  even  cut  and  paste
  between Word for Windows etc and vi. So who needs X I ask?

  Creating a Bootable Floppy for Emergency Use:
  ---------------------------------------------
          Forwarded here by Robert Chalmers, work done by Udo and Vlad
  | Udo and Vlad have done a MARVELOUS job here. -- Robert Chalmers     |

          [Two spaces have been added to the start of each line to
           avoid mailer and nroff problems... --Mike]

  -------------------------Cut Here-------------------------------
    # shell script to create a bootable floppy disk
    # Works with COHERENT 3.x and COHERENT 4.0.
    # Written by Udo Munk (udo@umunk.GUN.de)
    # with help from Vladimir Smelyansky (vlad@mwc.com)
    clear
    if [ $USER != root ]
    then
      echo "This program must be run as user root!"
      exit
    fi
    echo "This programm creates a bootable floppy disk for COHERENT."
    echo "Because booting the PC hardware only works with floppy drive A"
    echo "I want to know the size of your A device first."
    echo
    while true
    do
      echo -n "Is your A devive a 5,25
      read answer
      if [ $answer = y -o $answer = n ]
      then
        break
      else
        echo "answer with y or n please!"
        echo
      fi
    done
    if [ $answer = y ]
    then
      echo "Fine, let us create a 5,25
      dev=/dev/fha0
      devsize="5,25
      devblocks=2400
      boot=/conf/boot.fha
    else
      echo "Fine, let us create a 3,5
      dev=/dev/fva0
      devsize="3,5
      devblocks=2880
      boot=/conf/boot.fva
    fi
    echo
    echo "Now please put a" $devsize "floppy disk into your drive A".
    echo "WARNING: ALL DATA ON THIS FLOPPY DISK WILL BE DESTROYED!"
    echo
    echo -n "Type y if you want to continue, any other to abort: "
    read answer
    if [ $answer != y ]
    then
      exit
    fi
    clear
    echo "Step 1: formating floppy disk..."
    /etc/fdformat $dev
    echo "Step 2: building the bad block list..."
    /etc/badscan -o bootdisk $dev $devblocks
    echo "Step 3: building a filesystem..."
    /etc/mkfs $dev bootdisk
    rm bootdisk
    echo "Step 4: copy the bootstrap onto the floppy disk..."
    cp $boot $dev
    /etc/mount $dev /mnt
    if [ -f /tboot ]
    then
      cp /tboot /mnt
    fi
    cp /dpb /mnt
    echo "Step 5: copy the kernel and patch it..."
    cp /coherent /mnt
    ln /mnt/coherent /mnt/autoboot
    if [ -f /tboot ]              # we are running Coherent 4.x
    then
      if [ $dev = /dev/fha0 ]     # drive A is 5,25"
      then
        /conf/patch /mnt/coherent rootdev=makedev14)
        /conf/patch /mnt/coherent pipedev=makedev14)
      else                                # drive A is 3,5"
        /conf/patch /mnt/coherent rootdev=makedev15)
        /conf/patch /mnt/coherent pipedev=makedev15)
      fi
    else                          # we are running Cohherent 3.x
      if [ $dev = /dev/fha0 ]     # drive A is 5,25"
      then
        /conf/patch /mnt/coherent rootdev_=makedev14)
        /conf/patch /mnt/coherent pipedev_=makedev14)
      else                                # drive A is 3,5"
        /conf/patch /mnt/coherent rootdev_=makedev15)
        /conf/patch /mnt/coherent pipedev_=makedev15)
      fi
    fi
    echo "Step 6: copy all neccesary files to the floppy disk..."
    mkdir /mnt/mnt
    mkdir /mnt/tmp
    cpdir /dev /mnt/dev
    cpdir /drv /mnt/drv
    mkdir /mnt/conf
    cpdir /conf/kbd /mnt/conf/kbd
    mkdir /mnt/bin
    cp /bin/bad /mnt/bin
    cp /bin/check /mnt/bin
    cp /bin/chgrp /mnt/bin
    cp /bin/chmod /mnt/bin
    cp /bin/chown /mnt/bin
    cp /bin/cmp /mnt/bin
    cp /bin/cp /mnt/bin
    cp /bin/cpdir /mnt/bin
    cp /bin/date /mnt/bin
    cp /bin/db /mnt/bin
    cp /bin/dcheck /mnt/bin
    cp /bin/df /mnt/bin
    cp /bin/find /mnt/bin
    cp /bin/grep /mnt/bin
    cp /bin/icheck /mnt/bin
    cp /bin/ln /mnt/bin
    cp /bin/ls /mnt/bin
    cp /bin/lc /mnt/bin
    cp /bin/mkdir /mnt/bin
    cp /bin/mv /mnt/bin
    cp /bin/ncheck /mnt/bin
    cp /bin/ps /mnt/bin
    cp /bin/pwd /mnt/bin
    cp /bin/rm /mnt/bin
    cp /bin/rmdir /mnt/bin
    cp /bin/scat /mnt/bin
    cp /bin/sh /mnt/bin
    cp /bin/stty /mnt/bin
    cp /bin/sync /mnt/bin
    mkdir /mnt/usr
    mkdir /mnt/usr/tmp
    mkdir /mnt/usr/bin
    cp /usr/bin/vi /mnt/usr/bin
    cp /usr/bin/me /mnt/usr/bin
    cp /usr/bin/more /mnt/usr/bin
    if [ -d /usr/lib/terminfo ]
    then
      mkdir /mnt/usr/lib
      mkdir /mnt/usr/lib/terminfo
      mkdir /mnt/usr/lib/terminfo/a
      cp /usr/lib/terminfo/a/ansipc /mnt/usr/lib/terminfo/a
    fi
    mkdir /mnt/etc
    cp /etc/.profile /mnt/etc
    cp /etc/ATclock /mnt/etc
    cp /etc/badscan /mnt/etc
    cp /etc/clri /mnt/etc
    if [ -f /etc/drvld ]
    then
      cp /etc/drvld /mnt/etc
    fi
    cp /etc/drvld.all /mnt/etc
    cp /etc/fdisk /mnt/etc
    cp /etc/fsck /mnt/etc
    cp /etc/init /mnt/etc
    cp /etc/mkfs /mnt/etc
    cp /etc/mount /mnt/etc
    cp /etc/reboot /mnt/etc
    cp /etc/umount /mnt/etc
    cp /etc/serialno /mnt/etc
    cp /etc/timezone /mnt/etc
    cp /etc/termcap /mnt/etc
    echo "Step 7: create lost+found with enough empty directory slots..."
    mkdir /mnt/lost+found
    for I in 0 1 2 3 4 5 6 7 8 9
    do
      for J in 0 1 2 3 4 5 6 7 8 9
      do
        touch /mnt/lost+found/$I$J
      done
    done
    rm /mnt/lost+found/*
    echo "Step 8: create some files, so that boot ends in single user mode..."
    cat >/mnt/etc/brc <<!
    . /etc/timezone
    /bin/date -s `/etc/ATclock` >/dev/null
    /etc/drvld.all
    exit 1
    !
    >/mnt/etc/checklist
    >/mnt/etc/mount.all
    echo "Last step: check the filesystem of the created floppy disk:"
    /etc/umount $dev
    /etc/fsck $dev
    echo "Fine, floppy disk ready, store it at a cold and dry place but"
    echo "where you can remeber in case of an emergency :-)"
    -------------------------End Here-------------------------------




















--
-------------------------------------------------------------------------------
mike@array.com              So much fun, so little time to enjoy it....
-------------------------------------------------------------------------------
  